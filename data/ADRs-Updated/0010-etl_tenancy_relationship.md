# ETL and Tenancy Relationship ADR


## Status

Proposing

## Context

The PriveXMl results generated by ETL on the processing of data feed files must be capable of categorization based on specific tenants (Company, Client & Account) data. Due to the fact such data will change overtime based on client requests, every sections of PriveXML Contents (Ticker + Position + Transaction) section should generally be able to be connected to giving tenant. But using just the tenant Id or primary key as a relationship marker isn't suitable, as during migration and over-all during the life of our archives, seperation of the tenant changes and the PriveXML events will import insertion but increase complexity on the read/consumption end as we may need to re-read all changes for tenant before being able to consume the PriveXML to generate current state.

## Decision

We increase complexity during insertion by including all necessary tenant information as part of a PriveXML event and also provide event objects which could only just contain specific changes to client information within the same topic. This then enforces us to think of this topic as a general topic for ETL which may contain an event to process a new PriveXML result or process tenant data change. 

More so, the topics for each tenant must be tenant specific due to necessary policies and requirements to create seperation of data on physical levels.


## Consequences

We need to deploy tenant specific topics and ensure the PriveXML data contains complete tenant information (not partial) to avoid possible issues with a break in tenant data consistency in CDH. But these must be specific to CDH, in general ensuring separation of specific relationship should not be combined as this, but this just make sense for CDH and ETL tenancy data.
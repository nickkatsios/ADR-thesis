# Infrastructure Secrets Approach

* Status: Accepted
* Deciders: [Daniel Grant](https://github.com/danielgrant),
  [Robert Kenny](https://github.com/kenoir), [Gary
  Tierney](https://github.com/garyttierney),
* Date: 2020-01-12

Technical Story: to identify the approach to be taken with regard to
the creation, management and utilisation of secretes and other
configuration parameters within the Identity project.

## Context and Problem Statement

Any reasonably sized infrastructure deployment requires the creation,
management and utilisation of secrets and configuration. Any approach
taken to achieve these goals must be sensitive to maintaining not only
the secure storage and usage of these secrets and parameters, but should
reduce friction in the design, deployment, and maintenance of the
infrastructure.

## Decision Drivers

* Secure storage of the secrets and parameters.
* Ease of integration with infrastructure tooling (e.g. Terraform, AWS).
* Ease of maintenance of secrets and parameters.
* Low ongoing costs.

## Considered Options

* AWS Secrets Store
* AWS Systems Manager

## Decision Outcome

Chosen option: a combination of both AWS Secrets Store and AWS Systems
Manager for storing both secrets and configuration parameters
respectively.

For secrets and parameters created outside of the scope of the
Terraform, AWS Secrets Store and AWS Systems Manager resources will be
created in Terraform with placeholder values provided for the initial
resource creation. Actual secrets and parameters will then be manually
curated by developers and support staff. This approach allows such
secrets and configuration to be referenced in the Terraform by other
resources, without exposing them.

For secrets and parameters generated by Terraform, these will be fed
directly into other Terraform resources that require them.

## Pros and Cons of the Options

* Provided as a service by the target cloud environment, i.e. AWS.
* Integrates tightly with Terraform.
* Provides a secure, easy to manage store for secrets and parameters.
* Aligns with Wellcome Collection's existing approach.

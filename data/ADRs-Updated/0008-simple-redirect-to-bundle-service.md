# 8. Simple Redirect to Bundle Service

Date: 2020-11-19

## Status

Accepted

## Context

User facing production instances for the Snippets Service only do simple URL
manipulation and redirect requests to a CloudFront backed S3 bucket which stores
the Bundles. For this function to work, it's not required to run the whole
Django app on production instances along with the required DB and Cache backing
services.

Bundles are pre-generated by the Admin instance of snippets-service. Snippets
Admin is the only part of Snippets Service which depends on the Django app and
thus requires database access.

This is now possible because the support for pre "Activity Stream Router" (ASR)
Snippets has been dropped and lots of legacy code was removed. The legacy code
required Django and it's backing services (DB and Cache) to generate bundles on
the fly.


## Decision

Build a simple app that will redirect to the correct bundle. App should be
deployable both to our k8s clusters and to AWS Lambda. Use Lambda service to
create a failover for when kubernetes instances are not available.


## Consequences

Only positive outcomes are expected from this change:
 - Less infrastructure to manage, as non-master DBs and replication will be removed.
 - Less infrastructure costs.
 - Higher availability due to the Lambda failover.

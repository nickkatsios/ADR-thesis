urisurls remote resource proposed alex discussed currently cli allows user launch pipeline based configuration file hosted locally text konduit serve somepathtoconfigjson however addition serving local file want support serving pipeline hosted remotely text konduit serve httpswwwsomewebsitecompipelinesconfigjson konduit serve sseuwestamazonawscommyaccountmodelsmyconfigyaml konduit serve wasbmycontainermyaccountblobcorewindowsnetdirectorymyconfigjson addition launching server configuration hosted remote location also want ability load model hosted nonlocal uri loading model type location model specified term uri configuration modeluri field dljmodelpipelinestep tensorflowpipelinestep downloaded perhaps cached consider following simple case text pip install konduitserving konduit serve httpsservingkonduitaipipelinesimagesclassificationmobilenetvjson assume model specified mobilenetvjson hosted remotely also say httpsservingkonduitaimodelsmobilenetvpb case remote configuration remote model work overall aim support following uri type configuration model location httphttps http basic authentication maybe like http oauth ftp ftp basic authentication hdfs hadoop filesystem hdfs amazon azure storage account blob storage wasb wasbs google cloud storage simply ability download single file given uri point uploading directory listing etc required supported type uris extensible also user able add type needed utilize standard java apis uri url urlconnection inputstream java uri uricreatehdfssomepathpipelinesconfigjson url url utourl urlconnection connection urlopenconnection tryinputstream connectiongetinputstream read data three issue resolve approach uri url protocol handler protocol type reminder uris describe resource url additionally provide mechanism access resource ensuring protocol handler classpath required every protocol handler always classpath simple solutionoption though pollute classpath bunch additional dependency user wont risk introducing dependency divergence version issue authentication deal authentication may optionally present absent many uri type note also may multiple set different credential launching one pipeline example may require one set credential httpssomewebsitecommyconfigjson entirely different set credential httpsothersitecommymodelpb uri url protocol handler standard protocol type http ftp built konduitservingpipeline protocol requiring party dependency hdfs etc placed separate module name konduitservingprotocolkonduitservingprotocolname protocol module konduitservingprotocol parent module name example azure wasb wasbs konduitservingazure module also konduitservingpipeline provide following someurlstreamhandler extends javaneturlstreamhandler someurlconnection extends javaneturlconnection underlying dependency azure apis example may provide already finally actually register new class attempt uri url conversion apparently way httpsaccuorgindexphpjournals register factory register via system property system property approach somewhat ugly might easiest solution possible set runtime systemsetproperty anything would attempt read url would content system property fully qualified class name likely simply collect available handler mechanism similar konduitservingmeta already collecting available pipeline step type alternative urlseturlstreamhandlerfactory unfortunate design callable entire jvm httpsdocsoraclecomjavasedocsapijavaneturlhtmlseturlstreamhandlerfactoryjavaneturlstreamhandlerfactory second call urlseturlstreamhandlerfactory throw exception also risk incompatible party dependency also call method see also httpswwworeillycomlibraryviewlearningjavaapashtml authentication credential unfortunately credential likely going protocolspecific different way setting credential different protocol example azure may require environment variable set example access key whereas protocol may require system property mechanism look available authentication method protocol want support system property environment variable well provide mechanism launching server calling cli protocol cli unless dependency protocol type azure hdfs etc especially large file size problematic dependency problem simply include protocol type default cli problem always available cli design switch alternative approach standard protocol http ftp etc available default another protocol required wasbs hdfs etc download appropriate module dependency build tool module entry point downloading file run download file launch new temporary process cli simply call module main method order download configuration file exit note however well probably alternative approach future anyway enable support custom protocol via cli protocol runtime model server two case discussed adr cilaunchingvsbuildmd first immediate cli launch case second deployment artifact launch case case start always including protocol module per cli prof problematic consider alternative alternative approach implemented necessary approach already determining module dependency server via build tool look provided configuration jsonyaml find relevant uris determine module needed example configuration contains modeluri ssomepathtomodelpb know include konduitservings module launching server extensibility custom protocol type likely approach custom protocol soon added additionaldependencies additionaljars cli build tool setting one user make protocol handler custom type available cli runtime file caching additional consideration file caching suppose launching server remote uri shut immediately restart server upon restart download model large model could significant problem dont want redundantly download model every time launch server account cache downloaded model say konduitcache launching server check cache file exists download normal file exist open urlconnection check value returned urlconnectiongetlastmodified urlconnectiongetcontentlength either differs delete old file download scratch note opening url fails say retries hence cant check cached file latest default provide warning cached version anyway downside potentially old model server reduces probability intermittent network problem causing server launch failure even model weve got cached totally fine however anyway default behaviour switchable fail cant validate via system property environment variable perhaps konduitservingcachevalidationwarnonly set true default false exception validation failure preferred instead implement downloading model cache record separate file content length last modified value also record recent time cache entry accessed allow delete old entry example havent say day default thus implement method check clear cache per jvm launch server cache usedaccessed implement caching downloading model add uriresolver class konduitservingpipeline public static file getfileuri uri getfilestring uri method handle downloading caching etc uriresolver class within pipeline step runner launch model note scheme provided getfilestring method uriresolver assume local file hence add file scheme provided path user shouldnt get obscure uri syntax exception trying launch local file forget add file start every single path finally workaround potentially stale cache entry implement system property konduitservingcacheclear set true clear cache launching rarely needed available lastmodified contentlength check fail identify updated remote file reason consequence advantage user launch server automatically download model configurationmodel specified term remote uri work possible directly launch remote pipelinesmodels publicly available password protected etc caching system avoid redundant downloads disadvantage module added konduit serving authentication add complexity implementation user discussion
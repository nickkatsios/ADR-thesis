usage readthenwrite write weve implemented different method editor interface write readthenwrite refactorings write create new code ast write editor still refactorings readthenwrite first read code string editor write new code main problem readthenwrite end manipulating string instead ast usually mean implementation complex instead manipulating ast retrieve correct selection read mix read code transformation produce final output final code straightforward case tackled instead relying ast parser job however one key advantage absolutely preserve code written editor even though recast preserve code style much possible perfect refactoring consist reusing exactly code written readthenwrite way know preserve exactly original style well readthenwrite preserve code exactly written refactoring consists moving existing code without transforming extract variable inline variable refactorings well write refactoring transforms code change preserving original style much possible recast consequence refactorings readthenwrite harder maintain result refactoring end user would expect without bad surprise
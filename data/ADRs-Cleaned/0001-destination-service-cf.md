destination service cloud foundry document aim give concise complete overview communication flow necessary retrieve destination cloud foundry destination service listed step implemented sdk document consider setup multitenant application one provider application corresponding tenant subscriber tenant call provider tenant prov exemplary subscriber tenant sub general provider subscriber able define destination retrieving destination differentiate provider subscriber destination additionally destination service differentiates instance subaccount destination instance destination destination defined specific instance destination service recommend customer havent found yet still support subaccount destination destination defined whole subaccount every application belongs respective subaccount access destination service give preference instance destination subaccount destination accessing destination service requires access token token retrieved xsuaa service depending case one two flow simply retrieving list destination client credential flow sufficient triggering oauthsamlbearerflow sap btp destination system user token refresh token flow needed sdk user want access specific destination consider cross product subscriberprovider instancesubaccount possibility get access token retrieve necessary destination let consider provider subaccount first sensible default get access token get uri xsuaa service envvcapservices get clientid clientsecret destination service envvcapservices execute clientcredentialsgrant request curl post httpsprovauthenticationsaphanaondemandcomoauthtoken accept applicationjson authorization clientidclientsecret cachecontrol nocache contenttype applicationxwwwformurlencoded clientidclientidgranttypeclientcredentials return something like accesstoken sometokenvalue tokentype bearer expiresin scope uaaresource destinationxsappnamebread destinationxsappnamebmodify jti somestring get destination retrieved token destination service three endpoint retrieving destination instancedestinations subaccountdestinations destinationsname obviously choose subaccountdestinations execute following call curl get httpsdestinationconfigurationcfappssaphanaondemandcomdestinationconfigurationvsubaccountdestinations authorization bearer sometokenvalue cachecontrol nocache thats basic flow instancedestinations simply endpoint order retrieve subscriber destination little change get access token instead talking xsuaa via httpsprovauthenticationsaphanaondemandcomoauthtoken simply substitute tenantspecific subdomain prov respective subscriber tenant case sub give final url httpssubauthenticationsaphanaondemandcomoauthtoken give access token destination service give subscriber instance subaccount destination finally there one relevant case suppose destination authentication type basic get username password directly retrieving instancesubaccount destination destination authentication type oauthsamlbearerassertion aka destination system principal propagation trigger propagation principal calling destination service destinationname endpoint given destination however since want propagate principal user whose behalf retrieving destination kind access token reflects user first executing user token grant request user jwt clientid destination service curl post httpsprovauthenticationsaphanaondemandcomoauthtoken authorization bearer theusersjwt cachecontrol nocache contenttype applicationxwwwformurlencoded clientidclientidgranttypeusertokenresponsetypetoken give response accesstokennull refreshtokensomevalue take refresh token get new access token client credential destination service like curl post httpsssdkauthenticationsaphanaondemandcomoauthtoken authorization basic clientidclientsecret cachecontrol nocache contenttype applicationxwwwformurlencoded granttyperefreshtokenrefreshtokensomevalue give accesstoken call destinationname endpoint destination service original user propagated system give access token authenticate system
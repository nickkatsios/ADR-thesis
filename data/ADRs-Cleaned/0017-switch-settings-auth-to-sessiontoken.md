switch oauth sharing sessiontoken graphql server setting redesign auth proposed deciders orchard ben bangert danny coates ryan kelly issue httpsgithubcommozillafxaissues httpsjiramozillacombrowsefxa problem statement setting redesign app query mutate protected user data existing setting app hosted contentserver require form authentication authorization manage data adr wed decided oauth mechanism upon attempting implement discovered missing oauth token rendered unusable driver basically adr smooth security development velocity ease integration considered reuse existing sessiontoken contentserver authserver apis authenticate via oauth authserver apis outcome chosen reuse existing sessiontoken contentserver authserver apis least novel requiring fewest change authserver positive consequence easiest path authenticating authserver api request work almost exactly like setting client already negative consequence defeat security promise hawk really relying wed also like move away hawk future anyway pro con reuse existing sessiontoken contentserver authserver apis setting redesign frontend hosted accountsfirefoxcombetasettings per fxa mean access credential original setting frontend contentserver pro done seamless user visit new setting without confirmation requires little change authserver since existing sessiontoken auth process followed con sessiontokens long lived problem one leaked though unlikely passing credential client server defeat purpose hawk however drawback considered acceptable dont take advantage hawk security promise replay protection ignored fxa served via http dont security unencrypted http wed like move away hawk altogether future authenticate via oauth authserver apis would like someday deprecate session token mechanism altogether could start pro security property oauth authn authz known entirely novel authserver apis reused small change neutral graphql server proxy authserver apis con apis authserver auth strategy change accept oauth token may initially require hack similar paymentsserver pregenerated access token passed along oauth access token would reimplementation many contextual detail sessiontoken different level authentication verification like accountunverified sessionunverified totprequired could implemented scope additional work
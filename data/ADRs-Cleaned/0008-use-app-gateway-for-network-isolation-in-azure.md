app gateway network isolation azure deferred weve played fast loose infrastructure security set process let avoid putting kube stack internet without protection adrs may focus aws gcp one focus azure app gateway azure terraform recipe azure simple provisioning create managed subnet managed identity virtual expose kube api internet instead propose putting app gateway internet kube cluster decided defer deciusion later progress available azureappgateway branch repository background diagram tbd tradeoff configuration get complicated resource explicitly managed sequencing reference resource always created right order cost app gateway cost money even servicemesh awareness agic understand istio configuration traffic routed agic istiogatewayservice stability app gateway ingres controller availble either addon supported terraform preview azure otherwide provision helm link agic configuration page microsoft app gateway provisioning terraform consequence continue expose workshop cluster internet
adr ensuring consistent edition state unpublishing ensure consistency state publishing api mainstream publisher database unpublishing edition unpublishing also known archiving form distributed transaction achieved database transaction applying change database rolling back publishing api return error applying change publishing api successful updating database database transaction common pattern achieving would create transaction database based result calling publishing api either commiting rolling back transaction version mongo transaction instead application replicate transaction twophase commits version introduce transaction disadvantage fair amount effort implement twophase commits would increase complexity upcoming planned work migrate postgres advantage none rollback database change error returned publishing api code currently applies change database call publishing api could add exception handling publishing api call update database undo change made disadvantage due version mongodb supporting transaction change made first update calling publishing api visible second update reverse change made possible second database change rollback first update could fail would result inconsistent state moment advantage minimal change way code currently work question system designed make forward rollback way change state edition archived unpublish via publishing api first instead updating mainstream publisher database first calling publishing api order could reversed call publishing api first update database response publishing api success disadvantage database update fails system inconsistent state instead publishing api mainstream publisher database database update lot reliable call publishing api however see advantage advantage least complex solution implement database update unlikely fail opportunity get inconsistent state much reduced comparison current implementation implement unpublishing via publishing api first simplest implementation change failure scenario database update fails unlikely happen furthermore happen mainstream publisher actual unpublishing desired user happened consequence unlikely event database update fails manual intervention required unpublish edition mainstream publisher match actual state publishing api
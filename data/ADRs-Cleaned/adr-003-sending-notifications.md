adr sending notification jeremy well proposal depreciated superceded definition command message message stream generated user action command service service listens command message data message message stream generated another service asking persist data application send notification end user certain event example send volunteer email say application however rule around sending notification example volunteer receive application following true engagement isaccepted true opp confirmationson true notification time based restriction example may desirable email wait amount time sending notification event coordinator move engagement around without causing flood email rule mean engagement confirmation turned confirmation get turned notification existing engagement get sent engagement point time also sent create email command service example would require code engagement service opps service engagement code would check isaccepted confirmationson opps service would check confirmationson loop engagement order implement timing rule service would add sendat email record email service would something startuml actor user participant engagement control email control data user engagement isaccepted true engagement engagement confirmationson alt true engagement email send end engagement data update enduml startuml actor user participant opps control email control data user opps confirmationson true loop isaccepted engagement opps email send end opps data update enduml pro natural way write con service many responsibility duplication complexity loop opp engagement hard prevent duplicate email create separate service listens data topic engagement opps see update isaccepted confirmationson performs rule sends email topic brevity user omitted startuml participant engagement control data participant engagement control email engagement data update isaccepted true data engagement engagement engagement confirmationson engagement email send enduml startuml participant opps control data participant engagement control email opps data update confirmationson true data engagement loop engagement engagement email send end enduml pro service single responsibility testing easier con complexity loop opp engagement hard prevent duplicate email introduce notification model service thus instead emitting email specific message service emit normal data message given example engagement notification created notification model service deal logic engagement notification collected opp confirmationson flag set existing notification sent implementation notification service would run schedule loop startuml participant engagement participant engagement control data database database engagement data update isaccepted true data database update engagement data data create notification data database create notification enduml startuml participant notification database database control email notification scheduler notification database load database notification loop notification notification notification condition check alt true notification email send email notification database remove notification end end enduml pro duplication service single responsibility notification logic separated notification tracked notification generic support email con code notification logic separated notification model service requires logic preference consequence
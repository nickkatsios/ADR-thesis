adr light client fork detection changelog content copied old adr wip copied old adr rework addition core verification logic light node way receive data full node detect conflicting information report conflict many way full node provide bad information really looking misbehaviour validators reflected conflicting commits commits different block height detect detection module checking backup node reporting conflicting information request header backup node compare verified header primary conflict attempt verify conflicting header via verifier verified indicates attack light client punishable relevant information two conflicting commits passed publisher publisher publisher log error writes conflicting commits file exit leave future document describe information actually published blockchain validators punished tendermint may expose new rpc endpoint facilitate see related tendermint issue address book simple list http address corresponding full node node connects one randomly selected primary others serve backup essential light node connect least one correct full node order detect conflict timely fashion keep mechanism simple future advanced peer discovery mechanism may utilized sequential sync initial state time height headerh valsh describe happy path request headerh commith valsh primary check well formed correct height pas headerh commith valsh valsh verification library check valsh valsh correctly reflected headerh check commith headerh check validators correctly signed hash headerh request headerh backup check match headerh received primary update state headerh valsh increment return fails mark primary bad select new peer primary return conflicting header verify header requesting corresponding commit running verification verification pass fork evidence published validators get slashed leave mechanic evidence future document light client log error exit verification fails mean backup provided conflict bad removed skipping sync skipping sync essentially sequential except point instead verifying sequential header attempt skip ahead full node recent height skipping permitted validator set changed much last trusted validator set signed commit height attempting skip validator set change much bisect height space attempting skip lower height recursively worst case bisection take sequential height
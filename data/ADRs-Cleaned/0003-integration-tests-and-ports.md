integration test port two way currently see one building stub bundle serialization port function test async supplyportsports thispage await thispage await thispageevaluatefun corequerywith evalfun coreonsavede consolelogactionsaved windowconsolelogreset hacker news port added action listener corenews portstoptostring note portstoptostring serializing function still leaf disconnected though cant mock share memory test function serialized sent across wire change proposing agreed implement consequence becomes easier difficult risk introduced change mitigated
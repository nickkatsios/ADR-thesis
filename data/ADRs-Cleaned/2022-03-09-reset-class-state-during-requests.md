title resetinterface reset instance state request area core tag php architecture performance many place memoization store data inside instance variable cache data reuse request without needing recomputefetch currently reset data rely fact every request kernel rebooted request new instance service like phpfpm modern php application server roadrunner swoole case anymore service instance maybe shared reused multiple request symfony provides way reset data request kernelresettag class hold memoized data instance variable provide method reset data service tagged accordingly dicontainer consistency implement symfonycontractsserviceresetinterface add public function reset void reset performed exception rule service already implement resetmethod thus cannot add one case add method different suitable name reset internal state configure method reset data service tag way build part shopware already way compatible modern php application server futureproof reset especially important cloud environment next request may different shoptenant wont reset data would serve stale data wil instead data different instance additionally make unit testing easier phpunit already reuses service instance execution test case already made trouble past consequence wherever class hold memoized data instance variable php class fooservice private array data public function getdata array thisdata return thisdata return thisdata thisfetchdatafromsomewhere implement resetinterface provide reset method reset internal state request php symfonycontractsserviceresetinterface class fooservice implement resetinterface private array data public function getdata array thisdata return thisdata return thisdata thisfetchdatafromsomewhere public function reset void thisdata additionally tag service kernelreset tag xml service idfooservice tag namekernelreset methodreset service way symfony reset data request automatically additionally weve added hook integrationtestbehaviour also reset state execution test case make unnecessary reset internal state manually reflection overwrite reset internalprivate instance variable test case clearly show resetinterface kernelreset tag instead rely reflection test case reset data major red flag
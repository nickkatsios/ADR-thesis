adr checkout adr detail behavior actionscheckoutv new action written typescript moving away runnerplugin action want take opportunity make behavioral change document scoped difference input yaml repository description repository name owner example actionscheckout default githubrepository ref description branch tag sha checkout checking repository triggered workflow default reference sha event otherwise default tomaster token description personal access token pat fetch repository pat configured local git config enables script run authenticated git command postjob step remove pat recommend service account least permission necessary also generating new pat select least scope necessary learn creating encrypted secretshttpshelpgithubcomenactionsautomatingyourworkflowwithgithubactionscreatingandusingencryptedsecrets default githubtoken sshkey description ssh key fetch repository ssh key configured local git config enables script run authenticated git command postjob step remove ssh key recommend service account least permission necessary learn creating encrypted secretshttpshelpgithubcomenactionsautomatingyourworkflowwithgithubactionscreatingandusingencryptedsecrets sshknownhosts description known host addition user global host key database public ssh key host may obtained utility sshkeyscan example sshkeyscan githubcom public key githubcom always implicitly added sshstrict description whether perform strict host key checking true add stricthostkeycheckingyes checkhostipno ssh command line input sshknownhosts configure additional host default true persistcredentials description whether configure token ssh key local git config default true path description relative path githubworkspace place repository clean description whether execute git clean ffdx git reset hard head fetching default true fetchdepth description number commits fetch indicates history tag branch default description whether download gitlfs file default false submodules description whether checkout submodules true checkout submodules recursive recursively checkout submodules sshkey input provided ssh url beginning gitgithubcom converted http default false note ssh support new persistcredentials new path behavior different refer detail fallback github api sufficient version git path fallback web api download tarballzipball note file included archive therefore fail set true submodules also included archive persist credential credential persisted disk allow user script authenticated git command like git fetch post script remove credential cleanup selfhosted user may optout specifying persistcredentials false note user scripting git commit may set username email service provide reasonable default value user add git config username name git config useremail email document guidance pat githubtoken pat token persisted local git config config key httphttpsgithubcomextraheader enables auth header specified authenticated command authorization basic baseup note auth header scoped github httphttpsgithubcomextraheader additional public remote also work user want authenticate additional private remote provide token input ssh key ssh key written disk runnertemp directory ssh key removed action postjob hook additionally runnertemp cleared runner job ssh key must written strict file permission ssh client requires file readwrite user accessible others user host key database sshknownhosts copied unique file runnertemp value input sshknownhosts added file ssh command overridden local git config git config coresshcommand ssh runnertemppathtosshkey stricthostkeycheckingyes checkhostipno userknownhostsfilerunnertemppathtoknownhosts input sshstrict set false checkhostip stricthostkeychecking overridden note sshstrict set true default ssh checkhostip safely disabled strict host checking verifies server public key therefore verification unnecessary noisy example warning permanently added rsa host key address list known host since gitsshcommand override coresshcommand temporarily set env var fetching repo cred persisted coresshcommand leveraged avoid multiple checkout step stomping modify actionsrunner mount runnertemp enable scripting authenticated git command container action refer ssh config detail fetch behavior fetch sha built set depth significantly reduces fetch time large repos sha isnt available multi repo fetch specified ref depth input fetchdepth control depth note fetching single commit supported git wire protocol version git client protocol version default desired protocol version overridden git config fetch command line invocation protocolversion override fetch command line transparency git client version released june required wire protocol version checkout behavior checkout create local ref upstream set allows user script git normally would continue checkout detached head branch special branch merge commit created server doesnt match user local workflow note consider deleting local ref cleanup help avoid collision testing required path mainline scenario disklayout behavior remains remember given repo johndoefoo mainline disk layout look like githubworkspacehomerunnerworkfoofoo runnerworkspacehomerunnerworkfoo introduces new contraint checkout path location must githubworkspace whereas checkoutv constraint one level runnerworkspace longer change githubworkspace follow wherever self repo checkedout behavioral change align better container action documented filesystem contract githubhome githubworkspace note github action must run default docker user root ensure dockerfile set user instruction otherwise able access githubworkspace githubworkflow note tracking config updated reflect path workflow repo existing workflow repo moved checkout path change fact customer want checkout workflow repo twice side side different branch action operate root self repo expose path input default value path input path input default rooted githubworkspace default fit mainline scenario well single checkout multicheckout user must specify path input least one repository note self repo default repos default reponame however nested layout atypical git layout therefore good default user supply path info example nested layout following example checksout two repository creates nested layout yaml self repo checkout githubworkspace checkoutv repo checkout githubworkspacemyscripts checkoutv repository myorgmyscripts path myscripts example side side layout following example checksout two repository creates sidebyside layout yaml self repo checkout githubworkspacefoo checkoutv path foo repo checkout githubworkspacemyscripts checkoutv repository myorgmyscripts path myscripts path impact problem matcher problem matcher associate source file annotation today runner verifies source file githubworkspace otherwise source file property dropped multicheckout complicates matter however even today submodules may cause heuristic inaccurate better solution given source file path walk directory first gitconfig found check match self repo url httpsgithubcomownerrepo drop source file path submodules pat ssh key support able provide frictionless support submodules scenario recursive nonrecursive relative submodule path fetching submodules follow fetchdepth setting also fetching submodules sshkey input provided convert ssh url http urlhttpsgithubcominsteadof gitgithubcom credential persisted submodules local git config port typescript checkout action typescript action github graph following reason enables customer fork checkout repo modify serf example customer demystifies checkout action manifest simplifies runner reduce amount runner code port ever note mean jobcontainer image git path checkout branching strategy release tag create servicing branch releasesv merge change master release new tag preview stable release new tag consequence update checkout action readme update sample consume actionscheckoutv job container require git path checkout otherwise fallback rest api minimum git version update problem matcher logic regarding source file verification runner
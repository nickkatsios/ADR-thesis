step function backend check file tdr uploaded run antivirus server side checksum droid file format check also set various file consignment based result check also know redacted file consignment considered existing process existing process driven notification trigger backend check lambda communication lambda handled sqs queue advantage event driven dont manually trigger process cheaper cost step function disadvantage controlled queue large consignment uploaded followed small judgment consignment judgment consignment wait large consignment finish may take several hour difficult check apply across file consignment example file checked redacted api called file cause lot load database step function step function run per consignment triggered api gateway authenticated existing consignment export authoriser lambda advantage run per consignment wont block smaller transfer larger one run lambda file check complete make easier update consignment require file allows lot update related backend check decoupled api allows centralise error handling sending error notification service exception process disadvantes expensive pay step function transition well lambda invocation already paying prevent blocking smaller transfer another solution example larger instance would mean increased cost elsewhere decided move backend check step function main reason prevent larger consignment blocking smaller one tdr support transfer judgment mean lot small single file transfer happen daily considered something tdr would support original design addition slas regarding time taken process judgment transfer moving lot logic api step function make api complicated easier maintain updating api per consignmnent run check parallel reduce time taken check large number file
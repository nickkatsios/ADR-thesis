adr ibc passive channel changelog provide sample code detail initial draft proposed current naive ibc relayer strategy currently establishes single predetermined ibc channel atop single connection two client potentially different chain strategy detects packet relayed watching sendpacket recvpacket event matching channel sends necessary transaction relay packet wish expand naive strategy passive one detects relay channel handshake message packet given connection without know channel advance relaying order accomplish propose adding comprehensive event expose channel metadata transaction sent xibcchannelkeeperhandshakego xibcchannelkeeperpacketgo module example would chanopeninit const eventtypechannelmeta channelmeta attributekeyaction action attributekeyhops hop attributekeyorder order attributekeysrcport srcport attributekeysrcchannel srcchannel attributekeysrcversion srcversion attributekeydstport dstport attributekeydstchannel dstchannel attributekeydstversion dstversion emit event channel metadata relayer pick relay chain appears immediately successful return statement ctxeventmanageremiteventssdkevents sdknewevent typeseventtypechannelmeta sdknewattributetypesattributekeyaction openinit sdknewattributetypesattributekeysrcconnection connectionhops sdknewattributetypesattributekeyhops stringsjoinconnectionhops sdknewattributetypesattributekeyorder orderstring sdknewattributetypesattributekeysrcport portid sdknewattributetypesattributekeysrcchannel chanenlid sdknewattributetypesattributekeysrcversion version sdknewattributetypesattributekeydstport counterpartygetportid sdknewattributetypesattributekeydstchannel counterpartygetchannelid destination version yet known value necessary pad event attribute offset sdknewattributetypesattributekeydstversion metadata event capture header information needed route ibc channel handshake transaction without requiring client query data except connection willing relay intended channelmetasrcconnection event key indexed passive relayer function handling channel open attempt case passive relayer one chain sends chanopeninit relayer inform chain open attempt allow chain decide continues handshake chain actively approved channel opening rest handshake happen current naive relayer implement behavior propose replacing cbsonchanopentry callback new cbsonattemptchanopentry callback explicitly handle msgchannelopentry usually resulting call keeperchanopentry typical implementation xibctransfermodulego would compatible current naive relayer follows func appmodule onattemptchanopentry ctx sdkcontext chankeeper channelkeeper portcap capabilitycapability msg channelmsgchannelopentry sdkresult error require portid portid transfer module bound boundport amkeepergetportctx boundport msgportid return nil sdkerrorswrapfporttypeserrinvalidport invalid port expected msgportid boundport begin new code assert protocol version overriding relayers suggestion msgversion typesversion continue chanopentry chancap err channelhandlemsgchannelopentryctx chankeeper portcap msg err nil return nil err end new code rest callback similar existing onchanopentry msg directly callback would implementation xibchandlergo case channelmsgchannelopentry lookup module port capability module portcap err kportkeeperlookupmodulebyportctx msgportid err nil return nil sdkerrorswraperr could retrieve module portid retrieve callback router cbs kroutergetroutemodule return nil sdkerrorswrapfporterrinvalidroute route found module module delegate module onattemptchanopentry return cbsonattemptchanopentryctx kchannelkeeper portcap msg reason structured interaction xibchandlergo port module explicitly negotiate version etc wish constrain app module finish handling msgchannelopentry transaction even block expose event allow passive connection relayers enable applicationinitiated channel via passive relayers allow port module control handle opentry message consequence positive make channel complete applicationlevel abstraction application full control initiating accepting channel rather expecting relayer tell passive relayer know kind channel version string ordering constraint firewalling logic application support negotiated directly application negative increased event size ibc message neutral ibc event exposed reference agoric vms ibc handler currently accomodates attemptchanopentry
file json output proposed user submit form created form builder data user handed system processing fulfilled json output generated one category data present file form document image file user may upload part form submission order hand file system somehow present json consideration taken board security ease implementing ease integration consider data sent securely accessible intended recipient solution cost effective therefore cheap implement maintain integrating system able receive file ease therefore able provide cost effective solution dont know suspect various case management system json submission would eventually end take different approach ingesting file associated submission could include limited file encoded embedded post request post url file retrieve via http sync async store post url file retrieve via sftp sync async store post url file expect able retrieve demand forever post url file expects user manually download file reupload sftp form builder business supporting directly business making data submission request arbitrary format authentication protocol etc define standard approach form builder support ideally scale clear boundary responsibility platform user discussed pro con possible include file json document base encoded string pro super simple single post entire payload delete data submission handed con potentially large post body file base encoded increase size payload processing client decode file embed signed many aws url json possible encrypt file reach therefore client downloading file would know decryption key decrypt file pro lightweight json payload deal file con must retain file client pick client must pick file within week constraint retain file day exposed link lead unencrypted file available download client pick data within day submission file lost embed signed form builder url similar however instead embedding url embed custom form builder generated url control would requires form builder extra application deal flow file encrypted form builder application proxy file upload download encrypting decrypting file respectively pro lightweight json payload deal file finer grain control token able regenerate new token maximum day limit con must retain file client pick retain file day exposed link lead unencrypted file available download client pick data within day submission file lost requires additional ingres another form builder application handle flow likely become performance bottleneck still constrained day limit multipart post includes json file pro base encode file delete data submission handed con potentially large post request sort convention tie multipart file json representation decrypt file submission embed signed url since file encrypted decrypt file submission generate signed url handed another system pro lightweight json payload deal file con must retain file client pick client must pick file within week constraint retain file day exposed link lead unencrypted file available download client pick data within day submission file lost work done post submission file decrypted associated back submission storing file unencrypted store serve pskencrypted file directly expect receiver retrieve file opposed form builder sending move file separate bucket different permission user datastore bucket part processing json submission encrypt file preshared key psk serve file encrypted expect receiver decrypt psk native signed url without proxy application week expiry time signed url pro lightweight json payload deal file file encrypted next thing file continue stored encrypted con must retain file client pick client must pick file within week constraint retain file day client pick data within day submission file lost additional complexity put onto adapter may put user approach altogether resulting email submission probably secure manual work involved form builder may end building maintaining large number adapter outside bound platform resulting still deal complexity integrating layer abstraction involved actually several involved far form builder responsibility help platform user deal range possible way could expect ingest file form builder may help individual basis building adapter outside platform preferably owned another entity however form builder offer mechanism enables entity able integrate system offer way system integrate form builder whether send file receiver let know request form builder latter likely reliable scalable proceeding basis excludes whether encrypt file regard encryption area file encrypted rest transit receiver would require file stored unencrypted period time handed excluding file encrypted required client decrypt known psk long keep file retrievable whether directly available proxy application receiver case may involve human intervention get file push regarding transfer file leaf client hold file indefinitely whereas pull due constraint file available week whether native signed url generate manage signed url latter whether generate singleuse signed url request request authenticated receiver whether timelimited url possibly ability revoke callback confirming receiver successfully retrieved stored file negative form builder managing signed url additional work required build maintain feature application maintain state know url available whether theyve expired result choosing would require additional work issue concerning encryption dont encrypt file receiver make available url unencrypted much careful bucket misconfiguration short lived url revokable url alerting reuse url attempt traverseenumerate bucket content considered prevent attempt gain access unintended audience leaf negative point encrypt file dont worry much accidental misconfiguration bucket attempt traverseenumerate even dont proxy application front pro encrypt file also serve encrypted dont worry much bucketlevel access file pro proxy application needed adapter responsibility decrypting file proxy would needed responsibility decryption moved adapter however kind preshared key mechanism would needed would require building extra application handing psk also follows principle usersubmitted data form builder always encrypted next thing user submitter receiver user uploads file processed encrypted storage ready submission submission accessed reencrypted ready transmission receiver receiver decrypt file psk ready processing file encrypted receiver would probably fine native signed url valid week url exposed file fetch encrypted worry expiring url soon possible alerting unusual pattern request signed url might still nice thats getting anomaly detection isnt easy may little benefit route compared others long want keep file retrievable depends whether theyre served encrypted long retrieval take submission whether feasible expire link single form builder notified file successfully retrieved stored elsewhere knowing weve served file successfully doesnt guarantee side file encrypted rest therefore beneficial therefore favour issue concerning revoking signed url signed url expire given time number want latter would implement proxy application revoking signed url demand involves removing permission iam user signed url couldnt expire individual url know theyve successfully unless also generate new iam user sign url file presumably possible ideal revoking signed url demand may also mean proxy application retrieve file directly unlikely able notify theyve successfully fetched file decrypting adapter could make callback probably wouldnt know whether stored file whole question mean form builder care much whats happening long way downstream dont expose url excluded argument file encrypted therefore concern whereas encrypted therefore concern picking encrypted blob issue psk compromised well conclusion considering point chosen leaf clear cut boundary form builder integration although responsibility decrypting file hand receiver form builder team proxy application left handle file deal encryption file kept encrypted rest decrypted processed leave form builder ecosystem encrypted allow next system decrypt file end signed url concern file encrypted leave first case hmcts complaint form would mean would fetch file adapter decrypted json submission including uploaded file look like form builder make json request including signed url adapter adapter decrypts json post submitted data including adapter link file request file adapter adapter fetch file decrypts responds store file take clearcut approach responsibility security one feasible timescale hmcts complaint since doesnt involve building proxy application consequence risk creating api allowing integration always chance information obtained unintended audience could able access file benefit benefit introducing change file form submission form builder available outside form builder api mean system able process user form submission available json api difficult system integrate duration handing file file remained encrypted throughout form builder ecosystem except several point memory processed exiting ecosystem
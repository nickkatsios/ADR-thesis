adr isolating behavior custom clements vanilla javascript stage approved adopted superseded adr related document april custom element example may custom element experiment may react custom element october issue exploring pro con reusing com react november experiment porting prc web component november usage custom element iie project november styling custom element styled component june discussion slack skatejs ssr november replace dialog detailsdialog january guideline authoring behavior february example vanilla behavior accompanying hook providing behavior via custom element throughout last year folk design infrastructure web system platform team discussed idea custom element behavior primer react main goal custom element primer react able author behavior reuse framework several experiment conducted listed assumption deduplication highest priority attempt deduplication must weighed change maintainer developer customer experience finding developer experience regression custom element rendering subtrees shadowdom requires polyfills asyet implemented specification mean primer react accumulate added complexity implement custom element shadowdom implementing custom element primer react require division client side server side code custom element executed browser environment currently primer react isomorphic code executed anywhere react includes nodejs server runtimes well client side insurmountable mean primer react accumulate added complexity likely surfaced user possible add server side library enable custom element rendered server add complexity antithetical usage pattern custom element writing cannot style custom element styledcomponents mean component want custom element get behavior also want style component must another wrapper div apply style bug styledcomponents fixed next release incompatibility react tool github custom element detailsdialog detailsmenu make assumption dom tree example detailsdialog expects detail element wrap custom element assumption determine whether click happening inside outside dialog close dialog click happened outside dialog make sense case nice way enforcing proper usage detail element break react portal often ensure menu displayed correctly case parent overflow hidden applied incompatible zindex extensibility building behavior react hook give ability provide thing like state state change hook consumer component allows user build additional behavior component based state variable provided component consumer custom element would require listening event document reacting certainly doable foundational principle react reacting change dom change react state organizational overhead githubs custom element managed different repos introduces maintenance overhead youd npm link developing want test change presentational component instead making change seeing update instantly npm link usually doesnt work well hot module reloading either youd draft publish release library every time want update behavior behavior shared githubcom primer react youd careful testing environment make sure change dont create regression greatly widens engineer keep mind every time change made reacting change take bit time well orchestrate release custom element primer react opposed behavior already present primer react versioned lockstep engineer want contribute primer react component build new component behavior would familiar custom element react two different paradigm switch two custom element web component api progress slower react due change needing whatwg standard process risk switching custom element behavior spend extra time building behavior react already built custom element library currently behaviorscomponents listed custom element documentation site several already implemented react either primer react doctocat react application github upstreamed detailsdialog detailsmenu clipboardcopy textexpander autocomplete tasklist via drag drop hook tabcontainer textexpander decide invest react github wasted time could spent building custom element seems unlikely seems clear consensus continue build highly interactive product react library abandoned becomes obsolete risk technology may seems highly unlikely near term also possibility custom element track record demonstrates deprecation web apis extremely rare long deprecation path behavior githubcom custom element behavior primer react diverge leading inconsistent experience probably biggest risk face moving custom element isnt necessarily best solution explore way detecting divergence integration test providing behavior vanilla javascript simpler method isolating component behavior implement vanilla javascript typescript way shared react component web component type consumer would hook vanilla behavior component case strategy straightforward behavior made dependency dom easy isolate consume various framework behavior effect interactionsevents shared state component style difficult isolate manner interaction event many user interaction rely dom event click keypress focus reacts event system native dom event system react implement syntheticevent wrap native event working syntheticevents native event simultaneously significant additional complexity maintainer consumer however vanilla javascript must operate native event make isolating behavior automatically hook event listener dom element difficult achieve resulting simultaneous usage native event syntheticevent potential degrade maintainer consumer developer experience primer react shared state countless way manage state web application react ecosystem state management strategy library addition primitive construct state management since standard state management pattern vanilla javascript introducing pattern would add new layer complexity component behavior api component style since primer react styledcomponents manage style behavior affect style styledcomponents vanilla javascript behavior affect style add complexity introducing second mechanism applying style since able styledcomponents custom element due challenge listed priority listed assumption section investing time building behavior custom element primer react library instead spend time expanding coverage react hook focus finding approach making sure implementation behavior different stack consistent integration test vanilla javascript behavior behavior implemented vanilla javascript without introducing additional complexity primer react consumer case possible behavior implemented dependency except dom consumed within react hook provide functionality primer react general portion behavior affect rely user interaction event shared state style kept react hook part behavior implemented isolation concept built dependency react library
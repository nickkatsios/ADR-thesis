sidebarposition migration model draft adr discus handle breaking schema change datamodel distributed application trubudget explanation current implementation data currently stored stream stream contains none multiple item item either represent complete dataset time creation data change example event stream represent complete data every item last item represents current state stream item contain data change item sourced first latest order get current state data eventsourcing item represent complete datasets called resource item contain data change called event order able change interface event eventdataversion field defined describing interface version event item type resource currently doesnt contain dataversion field furthermore generally hex dataformat instead json dataformat event item type event dataversion checked performing read request performing writepublish request stream containing item type event check performed subject change upcoming release want unify dataformats precisly plan get rid hex dataformat json hence introduce breaking change regarding item type resource item created node running new version trubudget json cant read node running older version trubudget expecting hex changing dataformat current case technical solution gracefully migrate hence organisational level updating version simultanously future update want better prepared handling version conflict different distributed node trubudget network general distinguish data read stream stream containing item type event eventsourcing newest version able read item older version older version node try read stream contains item newer version able return error stream containing item type resource last element read pretty much new version read stream item older version viceversa difference since last item read stream old data version could migrated resulting removing sourcecode needed read older version item thing get complicated write operation stream containing item type event make sense node old dataversion write since might able read upfront afterwards stream containing item type resource pretty much since read write operation might return error node running older dataversion node forced upgrade newer version still want participate network mean node older dataversion allowed write stream node older dataversion allowed read might able get recent data item type event resource extend dataversion interface network aware node version order inform run old version todos change hex json format every item written stream json datatype extend dataversion interface resource event vault dataversion interface three interface event resource vault interface dataversion dataversion number interface resource extends dataversion set new version network create multichain stream named version dataversion saved startup every node check version update stream higher streamname version key data json dataversion example dataformat version track version network currently track node registered network every node item saved node stream also save item node dataversion increase track version every node network streamname node nodeaddress axunptudechhbwhjdtytraagwgpktonqd key axunptudechhbwhjdtytraagwgpktonqd data json key axunptudechhbwhjdtytraagwgpktonqd intent networkregisternode createdby system createdat dataversion data address axunptudechhbwhjdtytraagwgpktonqd organization acmecorp prohibit writing older version newer version set every write operation version checked efficient way query streamkeys liststreamkeys version stream consequence upgraded node might disable node node older version cannot readwrite multichain old dataversions item stream dataversion field version checked every write operation
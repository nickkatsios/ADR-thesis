enabling configuration repo access deciders dana darby josh milo jim authored decided problem statement axiomatic ensure dirconsul run nomad batch job access configuration repos hosted github considered service user service user created within github organization along ssh key pair service user granted access configuration repos nomad job definition dirconsul given service user ssh key axiomatic retrieves deployment key vault repo specific deploy key stored vault axiomatic retrieves appropriate deploy key add nomad job definition dirconsul nomad retrieves deployment key vault repo specific deploy key stored vault nomad retrieves appropriate deploy key make available dirconsul batch job team member becomes service user similiar service user except access configuration repos granted implicitly team member already access driver github prevents deployment key reuse ssh key attached one repo appetite spending money service user account process creating ssh key pair adding public key repo storing private key vault potentially automated via terraform setup infrequent activity would key rotation fundamentally cannot done due bugsnonsupport nomad eliminated due possible violation acceptable policy outcome chosen axiomatic retrieves deployment key positive consequence allows provide repeatable solution configurationn repos short term default readonly ssh access negative consequence requires codifying key management process potential automation effort pro con service user good user automation good configuration repo setup merely granting readonly access service user bad billed every user account bad service user becomes single point failure bad service user may config repo access acceptable bad lack fine grained permission capability leading creation multiple service user account goodbad service user may write access repo goodbad service user may provide github api access axiomatic retrieves deployment key vault good deploy key unique repo good key securely stored centralized vault making rotation easy bad increase work set configuration repo create ssh key add github repo add vault bad requires axiomatic knowledge deploy key access vault goodbad deploy key provide limited write access repo goodbad deploy key provide github api access nomad retrieves deployment key vault good axiomatic dirconsul freed deploy key knowledge good axiomatic dirconsul access vault good leverage vault access nomad already available bad nomad currently cant nomad retrieve deploy key attempt git clone via job artifact stanza hashicorp aware already working issue reference nomad github issue goodbad deploy key provide limited write access repo goodbad deploy key provide github api access team member becomes service user goodbad service user bad audit trail always point back team member bad put team member bad spot security event occurrs bad likely violates security standard link deploy key managing deploy key nomad github issue cannot download private git repo artifact stanza vault secret artifact stanza allow passing gitssh variable gogetter
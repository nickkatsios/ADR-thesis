distributed mailbox listener configuration proposed supercedes removing configured additional mailboxlistener implemented yet james enables user register additional mailbox listener distributed james server handling mailbox event processing mailboxlistener execution rabbitmq workqueue per listener mailbox listener registered triggered every time event generated user interaction mailbox executed distributed fashion following workqueue messaging pattern group attribute mailbox listener identifying work queue belong information component found adr currently mailbox listener determined guice binding server additional mailbox listener defined via configuration file configuration might specific james server actually defined rabbitmq common heterogeneous configuration might result unpredictable rabbitmq resource left limitation removing configured additional mailboxlistener centralize definition mailbox listener event sourcing system track configured mailbox listener following command addlistener add given listener rejected group already removelistener remove given listener configuration change supported administrator expected remove given listener add following event listeneradded mailbox listener added listenerremoved mailbox listener removed subscriber react event modify rabbitmq resource accordingly adding queue adding removing binding event sourcing system differs one defined removing configured additional mailboxlistener fact also keep track listener configuration upon start james ensure configured mailbox listener event sourcing system contains guice injected listener add missing handling rabbitmq binding mean start eventbus consume given queue listener configured class unknown james startup fails james start degraded state allowing unconfigure faulty listener downgraded state described separate adr link updated differs removing configured additional mailboxlistener fact longer register listener webadmin endpoint allow add listener one configured call fail listener class local classpath corresponding group already within configured mailbox listener aggregate upon success listener added configured mailbox listener aggregate listener registered locally remove listener call fail listener required guice binding current server listener configured upon success listener removed configured mailbox listener aggregate listener unregistered locally broadcast event bus attempted propagate topology change mean common registrationkey node topologychanged event mailbox listener starting mailboxlisteners local node upon topology change registrationkey concept explained adr listener added classpath error log emitted happen rolling upgrade defines new guice binding new mailbox listener event still emitted consumed james server however local james upgrade required effectively able start processing event binding redefined also expose endpoint listing group currently group associated configuration query configured mailbox listener aggregate introduce health check actually ensure rabbitmq resource match configured listener propose webadmin endpoint addremove bindingsqueue similar fashion proposed removing configured additional mailboxlistener happen james server performing listener registration fails create groupqueue health check also report james server succeed run given listener instance class classpath consequence product distributed james unchanged currently configured additional listener registered definition mailbox listener thus centralized exposed heterogeneous configuration incident mailbox listener longer required guice still instantiable even empty content considered additional listener thus requiring explicit admin unconfiguration mentioned related upgrade instruction read note rolling upgrade scenarii deploying new custom listener also describes deploy new custom listener integration test relying additional mailbox listener distributed james product require ported perform additional mailbox listener registry webadmin endpoint jmap spamassassin quota mailing test concerned note broadcast topology change rolling upgrade scenarii rolling upgrade james version heterogeneous across cluster might mailbox listener required guice level case james server version require listener james server version requires listener since listener registered james server version cannot rebooted without upgraded first listener cannot instantiated case james server version requires listener james server version require listener upgrading james version mean listener still registered additional listener manually unconfigured rolling upgrade finished acceptable upgrade instruction make sure listener could still instantiated even empty code transition period deploying new custom listener given new custom listener yet deployed distributed james cluster deploy admin follow step add jar extensionjars folder james server extensionjars read instantiation time reboot required instantiate new listener call webadmin endpoint alongside listener specific configuration enable given custom listener binding new listener created listener consuming queue james server treating request broadcast topology change ensure new custom additional mailbox listener instantiated everywhere without reboot
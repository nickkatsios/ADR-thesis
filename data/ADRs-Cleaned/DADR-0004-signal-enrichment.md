signal enrichment via extrafields supporting new feature called signal enrichment raise question towards throughput scalability impact new feature current architecture ditto internally publishes event part applied event sourcing pattern change done thing event persisted one containing actually changed field signal enrichment feature shall support defining extrafields sent external event subscriber notified change via websocket server sent event connection amqp mqtt kafka following alternative considered implement feature sending along complete thing state event cluster upside tell dont ask principle would lead minimum required cluster remoting roundtrips downside bigger payload sent around downside lot deserialization effort event consuming service downside policy filtering would additionally done somewhere included data authsubject allowed read downside overall lot overhead probably consumer enriching data sessionsconnections selected extrafields incoming event upside additional payload existing event upside data enriched sessionsconnections really feature upside policy enforcementfiltering done default concierge mechanism single request always uptodate policy downside additional remoting gatewayconciergethingsconciergegateway call enriched event delayed event publishing additional deserialization effort potentially asking static value time cache based enriching data sessionsconnections selected extrafields incoming event upside upside approach except policy always uptodate upside mitigating downside approach cache additional roundtrips reduced even completely skipped downside cached data well policy information might outdated configurable amount time minute provide different facade implementation providing approach orgeclipsedittointernalmodelssignalenrichmentbyroundtripsignalenrichmentfacade roundtrip tobeenriched event resulting guaranteed uptodateness data applied policy orgeclipsedittointernalmodelssignalenrichmentdittocachingsignalenrichmentfacade cache tobeenriched event resulting reduced remoting effort time interval cache might sync current data policy information implementation clusterinstance wide cache cache key consisting thingid authsubjects jsonfieldselector overall size cache configured default entry additional smartupdate mechanism cache entry related enrichment twin event absence skipped event cache entry completely deduced twin event triggering enrichment stay uptodate thing change policy change configured default ditto cachingsignalenrichmentfacade may configured via connectivity service environment variable connectivitysignalenrichmentprovider gateway service environment variable gatewaysignalenrichmentprovider consequence operating ditto one choose important guaranteed correctness enriched data reasonable clustering cost enriching data cache based implementation user might experience unexpected enriched extra field
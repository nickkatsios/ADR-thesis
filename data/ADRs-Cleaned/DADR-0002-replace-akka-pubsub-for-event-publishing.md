record architecture ditto pekkos distributed publishsubscribe order emit thingevents interested service gateway websocketsse session publishing event connectivity amqp amqp mqtt kafka session publishing event thingssearch thingupdater updating search index naive approach work provide horizontal scalability single service instance generally interested thingevents get regardless whether someone actually interested result lot avoidable json deserialization done ditto scale event publishing horizontally adding new gateway connectivity instance help scaling event publishing still instance process thingevent discard relevant implement custom ditto pubsub authorization subject topic subscribing read subject topic publishing manages distributes active subscription via pekko distributed data ddata emits thingevents service instance least one consumer consumes event consequence event publishing longer implemented proven stable pekko feature lie responsibility upside implement way well downside might add bug consequence horizontal scalability event publishing well like rest ditto horizontally scalable
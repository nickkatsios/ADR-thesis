batch timestamp request client side third point superseded ability disable request batching removed seen case practice enabling caused issue even spite latency cost timelock cluster serve multiple service circumstance timelock client node separately open connection timelock request timestamps lock timestamp lock request typically common instance single write transaction contact timelock multiple time timelock tends experience relatively heavy load affect overall throughput timelock take longer respond request persistenttimestampservice support querying contiguous range timestamps functionality already production palantirs large internal product requestbatchingtimestampservice coalesce timestamp request timelock enable default mean timelock client time one timestamp request flight timelock client make request request inflight request submitted immediately otherwise request accumulate batch inflight request completes batch request sent getfreshtimestamps request relevant number timestamps timestamprange returned distributed among thread made request configure requestbatchingtimestampservice delay interval zero millisecond practice mean request return next request immediately dispatched provided timestamps actually requested imply average request take half roundtrip time longer practice thing complex addition halfrtt also incur cost involved synchronization batching timelock tends respond quickly though heavily loaded many internal timelock heavily loaded particularly compelling reason enable batching default serf timestamps lock many service maintain ability disable request batching kept request batching cause modest increase latency especially client load light request batching might appropriate application require realtime response consequence generally load timelock server reduced fewer network call made request timestamps note lock request legacy async lock service well compound operation like lockimmutabletimestamp batched client may experience increase latency especially timelock previously heavily loaded consider disabling timestamp batching setting enabletimestampbatching parameter timestampclient block atlasdb runtime configuration false user analysing timestamp metric evaluate performance timestampservicegetfreshtimestamps opposed timelockservicegetfreshtimestamp trying determine quickly timestamps served metric includes time involved waiting current batch complete well synchronization batch
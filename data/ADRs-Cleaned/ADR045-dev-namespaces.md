adr dev namespaces following retirement gsplocal service team way testing change merge master feedback cycle slow potentially risky enable devs get rapid feedback namespaces allow deployment arbitrary branch local kubectl apply action past service team made sandbox cluster testing allow cluster admin permission however primary function sandbox cluster test change platform often otherwise degraded also slows service team development present several security problem addressed incluster concourse must able create edit daemonsets tenant interact pernode pod typically elevated permission manipulate network stack must able create pod host networking run privileged mode must authorised create cluster scoped resource clusterrole custom resource etc harbor dev one namespace must authorised push edit delete image relating namespaces outside notary signing key must namespacescoped externaldns namespace must able hijack dns entry another namespace istio istio resource deployed part namespace must impact namespaces cloudhsm access connectivity enabled via clusterconfig prod namespaces pod credential different namespace production instance application address majority security concern implementing adr address harbor concern creating namespacescoped credential relating namespacescoped harbor project provide credential via secret namespace address dns concern locking namespace instance externaldns dedicated zone address istio concern gatekeeper constraint istio resource support exportto set create separate cryptousers cloudhsm namespace requires access cloudhsm cryptographic keysoperations scoped single user namespace allow namespace effectively virtual slice cloudhsm enable controlling access pernamespace basis consequence user able arbitrarily kubectl apply equivalent resource namespaces without affecting others platform infrastructure production system possible configure concourse build deploy change branch within team scoped namespace allowing rapid feedback proposed change potential impact security attack compromise limited namespaceisolated credential shared londonclustergovsvcuk zone split pernamespace dns zone likely form namespacelondonclustergovsvcuk example sandbox canary move canarylondonsandboxgovsvcuk canarysandboxmainlondonsandboxgovsvcuk change user impact collaborate make sure dont break thing
removal concierge service architecture simplification ditto related github issue idea ditto committers came order simplify architecture amongst many benefit get rid ditto concierge service ditto architecture move authorization task currently responsible existing ditto service background change came discussion concierge service authorization policy enforcement external api interaction processing command message within ditto acting middle man ditto edge service gateway connectivity entity persistence service policy thing persistence entity manage already facade library character thingid sharding key shard region order provide horizontal scalability cache policy enforcer concierge node cluster due effect policyid thingid lot caching thingid policyid relation policy enforcer authorization reduced library purpose may also done either ditto edge service gateway connectivity entity service policy thing would lot benefit comparing current ditto architecture separate concierge service potential benefit simplified architecture overall resource consumption cpu memory container operate hop ditto service cluster saving least one hop per processed api call one additional one response wanted beneficial resource consumption json deserialization required ditto service lower overall latency higher overall throughput possible improved stability rolling update rolling restarts ditto concierge always additional error source shard region restarted ditto edge service could short period forward command authorize additional benefit depending authorization policy enforcement done future aspect approach authorization edge gatewayconnectivity approach authorization entity service policiesthings policy enforcer caching distributed caching potentially instance edge eventually cache policy enforced specific policy unpredictable cache size due missing sharding localized caching policy one thing cached within thingpersistenceactor policy partial event handling edge directly policy enforcer create multiple partial event based one source event information regarding edge split one source event several partial event must piggybacked event header live command message processing edge directly route authorized live command message interested edge gateway connectivity live command message one additional hop compared left column hop currently concierge service also necessaryvia thing service done thing service would also authorize live commandsmessages smart channel selection rather complex state machine logic concierge must moved edge supporting live channel condition case live channel condition logic done completely thingpersistenceactor simplifying implementation lot conditional message rather complex implementation required similar smart channel selection simple implementation done completely thingpersistenceactor overall weight concierge service removed ditto instead authorization policy enforcement concierge logic moved entity service policiesthings consequence api perspective nonbreaking change therefore would strictly require ditto release however architecture configuration change configuration change done concierge service moved suggest kind architecture change major ditto release ditto require resource provide lower latency higher throughput processing api interaction
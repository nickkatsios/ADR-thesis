title adr decouple calculating bill bill calculated adr decouple calculating bill bill calculated deprecated tenant provision wide variety service awsaiven resource via govuk paas calculate bill servicesresources govuk paas billing receives notification service resource created renamed deleted upstream form event cloud foundry original govuk paas billing system translated cloud foundry event record servicesresources calendar month calculating final monthly bill tenant process called billing consolidation done start every month persistent record result stage processing including service resource tenant provisioned stage processing database table populated content table impermanent refreshed next time billing consolidation run govuk paas billing rewrite changed want calculate bill variable time period also forecast bill future webbased billing calculator however method calculate actual bill always code calculate bill decoupled code calculate bill exactly code calculation bill whether bill tenant prospective tenant billing calculator approach taken populate database temporary table billed resource time interval including future stored function embedded sql code entry point billing call stored function calculate bill calculatebill content temporary table populated step parameter passed calculatebill consequence importantly mean single source truth calculating govuk paas bill tenant bill prospective tenant bill latter billing calculator calculated code different code entry point billing either step another stored function embedded sql tailored approach example step could following code entry point display tenant bill past andor future aggregated orgname orgguid planguid planname spacename resourcetype resourcename componentname done gettenantbill calculate bill prospective tenant code yet written simplify billing calculator govuk paas website ensure calculates bill exactly code calculate historic bill done populate temporary table tenant would like calculate cost display bill rds tenant example also easily tailor billing report step different output field enable report filtered input field get bill rds postgres tenant example deprecation first quarter chose suspend work new billing system revert old one prompted mix performance issue new code base team capacity prioritisation concern
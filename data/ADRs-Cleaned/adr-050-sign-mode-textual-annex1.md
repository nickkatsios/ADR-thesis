adr signmodetextual annex value renderers changelog dec initial draft feb draft read conceptacked ledger team dec remove object prefix header screen dec sign byte hash byte length mar update value renderer omit message header screen implementation started small value renderers detail still polished abstract annex describes value renderers displaying protobuf value humanfriendly way string array value renderers value renderers describe value different protobuf type encoded string array value renderers formalized set bijective function func rendertvalue string one protobuf type spec defined protobuf number applies protobuf numeric integer type int uint sint fixed sfixed string whose customtype githubcomcosmoscosmossdktypesint githubcomcosmoscosmossdktypesdec byte whose customtype githubcomcosmoscosmossdktypesint githubcomcosmoscosmossdktypesdec trailing decimal zero always removed formatting every three integral digit usage denote decimal delimiter example uint string representing dec string representing dec coin applies cosmosbasevbetacoin denoms converted display denoms metadata available requires state query definition metadata found bank protobuf definition display field empty nil perform denom conversion amount converted display denom amount rendered number change capitalization denom practice display denoms stored lowercase state atom however often showed uppercase everyday life atom value renderers keep case state may recommend chain changing denom metadata uppercase better user display one space denom amount atom future ibc denoms could maybe converted didiids find robust way cosmoscosmoshubbankdenomatom example uatom atom atom metadata display denom coin array coin display concatenation coin encoded specification joined together delimiter comma space quote around list coin ordered unicode code point display denom example string aabbcc would sorted abcabc coin list item itll rendered zero example cosm uatom atom cosm assuming display denoms atom cosm atom acoin acoin atom assuming display denoms atom acoin zero repeated applies repeated field except cosmostxvbetatxbodymessages particular encoding see adr repeated type following template fieldname int fieldkind fieldname indexint value rendered line optional value rendered next line fieldname indexint value rendered line optional value rendered next line end fieldname fieldname protobuf field name repeated field fieldkind type repeated field message fieldkind message name type repeated field enum fieldkind enum name case fieldkind protobuf primitive type string byte int length array index one based index repeated field example given proto definition protobuf message allowedmsgallowance repeated string allowedmessages initializing allowedmsgallowancecosmosbankvbetamsgsend cosmosgovvmsgvote following valuerendered encoding allowed message string allowed message cosmosbankvbetamsgsend allowed message cosmosgovvmsgvote end allowed message message applies protobuf message custom encoding field name follow sentence case replace space capitalize first letter sentence field name ordered protobuf field number screen title field name screen content value nesting field contains nested message valuerender underlying message template line valuerendered message notice prefix character denote nesting additional level nesting add example given following protobuf message protobuf enum voteoption voteoptionunspecified voteoptionyes voteoptionabstain voteoptionno voteoptionnowithveto message weightedvoteoption voteoption string weight cosmosprotoscalar cosmosdec message vote uint proposalid string voter cosmosprotoscalar cosmosaddressstring reserved repeated weightedvoteoption get following encoding vote message vote object proposal voter cosmosabcdef weightedvoteoptions weightedvoteoption object voteoptionyes weight weightedvoteoption object voteoptionno weight end enums show enum variant name string example see example message vote googleprotobufany applies googleprotobufany rendered however one exception underlying message protobuf message custom encoding message header screen omitted one level indentation removed message custom encoding including googleprotobuftimestamp googleprotobufduration googleprotobufany cosmosbasevbetacoin message appdefined custom encoding preserve header indentation level example message header screen stripped onelevel indentation removed cosmosgovvvote proposal vote cosmosabcdef weightedvoteoptions weightedvoteoption object yes weight weightedvoteoption object weight end message custom encoding cosmosbasevbetacoin uatom googleprotobuftimestamp rendered rfc simplification iso current recommendation portable time value rendering always utc timezone necessary fractional digit second omitting fractional part entirely timestamp fractional second resulting timestamps automatically sortable standard lexicographic order favor legibility shorter string example timestamp second nanosecond rendered timestamp second zero nanosecond rendered googleprotobufduration duration proto express raw number second nanosecond rendered longer time unit day hour minute plus remaining second order leading trailing zeroquantity unit omitted unit nonzero unit shown day hour minute second even longer time unit month year imprecise week precise commonly day immediately legible week although day problematic noon noon subsequent day hour depending daylight saving transition significant advantage strict hour day hour day hour nanosecond nonzero shown fractional second minimum number digit second duration exactly zero shown second unit given singular trailing quantity exactly one shown plural otherwise negative duration indicated leading minus sign example day day day hour hour minute second byte byte length shorter equal rendered hexadecimal capital letter without prefix byte length greater hashed sha rendered text sha followed byte hash hexadecimal capital letter without prefix hexadecimal string finally separated group digit space separator byte length odd remaining hexadecimal character end number chosen longest length hashedandprefixed representation longer original data directly formatted rule specifically byte array hex character plus space character resulting character byte array starting length hashed byte hex character plus space sha prefix take character also secpk public key length textual representation hashed value would like avoid note data longer byte rendered way inverted see adrs section invertability discussion example input displayed byte array shade dcb acf fdf caa address byte currently string type protobuf address may needed address byte sign mode textual rendered bech formatting string string rendered asis default value default protobuf value field skipped example protobuf message testdata string signer string metadata mytestdata testdata signer cosmosabc get following encoding testdata message testdata object signer cosmosabc bool boolean value rendered true false abandoned custom msgtitle instead msg typeurl paragraph annex informational purpose removed next update adr click see abandoned idea protobuf message signmodetextual short title associated format string whenever type url explicitly referenced via cosmosmsgvtextualmsgtitle protobuf message specified msg protobuf fully qualified name protobuf message msgsend cosmosmsgvtextualmsgtitle bank send coin must unique per message per chain example cosmosgovvmsgvote governance vote best pratices recommend msg whose protobuf fully qualified name hard understand two example msgsend msgvote good example msgtitle still allow msgtitle chain might msg complex nonobvious name case recommend drop version string there one version module chain way bijective mapping figure message string corresponds multiple protobuf version module exist chain recommend keeping first msgtitle version second msgtitle version mychainmymodulevmsgdo mymodule something mychainmymodulevmsgdo mymodule something
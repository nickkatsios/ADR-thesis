adr implementation proposal changelog draft proposed goal adr provide recommendation guide implementing application proposal broken trait implemented module also defines primitive would help building module compliant spec type implementation must provide base denom type serializable string additionally following denom type must also provided hasheddenom denom type serialized string form ibchashtracepathbasedenom prefixeddenom denom type base denom prefixed trace trace consists portidchannelid pair enables coin source tracing rust base denomination type pub struct denomstring coin defines token denomination amount denomination may one denom type described rust deriveclone debug partialeq partialord ord serialize deserialize pub struct coin denomination pub denom denom amount pub amount acknowledgement type packet data type defined spec maybe modelled follows note type must deserializable fromto json rust pub enum icsacknowledgement equivalent baq success error acknowledgement errorstring pub struct fungibletokenpacketdata denomination denom amount sender string receiver string keeper reader rust pub trait icskeeper channelkeeper portkeeper bankkeeperaccountid accountkeeperaccountid account identifier type type accountid set channel escrow address setchannelescrowaddressmut self portid portid channelid channelid result icserror set new trace hash denom trace pair store setdenomtracemut self denomtrace denomtrace result icserror pub trait icsreader channelreader portreader accountreaderaccountid bankreaderaccountid account identifier type type accountid fromstr return true iff sending allowed module params issendenabledself bool return true iff receiving allowed module params isreceiveenabledself bool gettransferaccount return transfer accountid gettransferaccountself accountid set return escrow account port channel combination getchannelescrowaddressself portid portid channelid channelid resultselfaccountid icserror return true iff store contains denomtrace entry specified hasheddenom hasdenomtraceself hasheddenom hasheddenom bool get denom trace associated specified hash store getdenomtraceself denomhash hasheddenom optiondenomtrace pub trait bankkeeper account identifier type type accountid function enable sending ibc fungible token one account another sendcoinsmut self selfaccountid selfaccountid amt coin result icserror function enable minting tokensvouchers module mintcoinsmut self amt coin result icserror function enable burning minted token voucher burncoinsmut self module selfaccountid amt coin result icserror function enable transfer token ibc module account sendcoinsfrommoduletoaccount mut self module selfaccountid selfaccountid amt coin result icserror function enable transfer token account ibc module sendcoinsfromaccounttomodule mut self selfaccountid module selfaccountid amt coin result icserror pub trait bankreader account identifier type type accountid fromstr return true specified account allowed receive fund false otherwise isblockedaccountself account selfaccountid bool pub trait accountreader account identifier type type accountid fromstr function return account ibc module getmoduleaccountself selfaccountid pub trait icscontext icskeeperaccountid icsreaderaccountid type accountid fromstr handling packet message still subset channel packet handled following handler recommended implemented icsfungibletokentransfer application ibc crate handler executed module callback thirdparty ibc module implementing application onchain rust transaction initiate token transfer performs logic related token transfer return sendtransferpacket type calling module create actual packet register ibc module pub sendtransferctx ctx msg msgtransfer result ctx icscontext ctxissendenabled return erricserrorsenddisabled implementation detail see reference handle incoming packet data called inside onrecvpacket callback pub onrecvpacketctx ctx packet packet data fungibletokenpacketdata icsacknowledgement ctx icscontext ctxisreceivedenabled return erricserrorreceivedisabled implementation detail see reference ontimeoutpacket refund sender since original packet sent never received timed called inside ontimeoutpacket callback pub ontimeoutpacketctx ctx data fungibletokenpacketdata result icserror ctx icscontext refundpackettokenctx data responds success failure packet acknowledgement written receiving chain acknowledgement success nothing occurs acknowledgement failed sender refunded token called inside onacknowledgementpacket callback pub onacknowledgementpacketctx ctx ack icsacknowledgement data fungibletokenpacketdata result icserror ctx icscontext match ack icsacknowledgementsuccess refundpackettokenctx data implement logic refunding sender packet timeout acknowledgement error pub refundpackettokenctx ctx data fungibletokenpacketdata result icserror ctx icscontext consequence positive provides clarity detail implementing application ibc crate help align closer ibcgo implementation negative neutral reference
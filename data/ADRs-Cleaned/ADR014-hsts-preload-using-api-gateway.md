serve http traffic keeping tcp port http closed hsts preload list add domain hsts preload list requirement serve valid certificate redirect http http host serve subdomains http actually check wwwdomaincom serve hsts header base domain http request endpoint provide requirement cloud foundry app endpoint already serf right hsts security header haproxy could configured serve additional preload includesubdomains flag cannot keep port http closed endpoint implement second elb listening http http haproxy http http redirect serve right header increase dependency haproxy service must serve root domain apex domain allowed serve cname record rootapex domain must configure record domain issue serving service elb cloudfront implement basic aws api gateway default mock response return right http header stricttransportsecurity actual content response irrelevant custom domain name creates aws cloud front distribution provide public access api aws route alias resource record serve aws cloud front distribution record consequence setup aws api gateway domain name required access ssl certificate uploading certificate different step create aws cloud front distribution manually
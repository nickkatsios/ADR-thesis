registry refactoring design proposed design consequence reference approved currently registry client gomodregistry module provides service configuration service registration functionality goal design refactor gomodregistry module separation concern service registry functionality stay gomodregistry module service configuration functionality separated new gomodconfiguration module allows implementation deferent provider another aspect separation concern proposed design provider connection information aspect current registry client service get registry provider connection information currently service either pull connection information local configuration file edgexregistry environment variable device service also specify connection information command line refactoring separation concern issue change service get configuration provider connection information concern voiced edgex community storing configuration provider connection information configuration ultimately provided provider right design design proposes service command line approach ability override environment variable configuration provider information stored service local configuration file edgexregistry environment variable deprecated registry provider connection information continue stored service configuration either locally theconfiguration provider edgex client database connection information command line change new cpconfigprovider command line added service value specified format typeprotocolhostport consulhttplocalhost new command line overridden edgexconfigurationprovider environment variable set environment variable value format command line value value provided cpconfigprovider environment variable override specified default value consulhttplocalhost cpconfigprovider environment variable override specified local configuration file service log configuration provider connection information existing rregistry command line retained boolean flag indicate registry bootstrap change service edgexgo mono repo new common bootstrap functionality plan move code module device service app function sdks also current bootstrap module pkgbootstrapconfigurationregistrygo pkgbootstrapcontainerregistrygo refactored new configuration client renamed appropriately new bootstrap module created revised version registry client current useregistry registryclient service configuration change appropriate name new configuration client current useregistry registryclient service registration retained service registration call new unregister api added shutdown code service configseed change confseed service similar change specifying configuration provider connection information since doesnt common bootstrap package beyond minor change switching configuration client interface import appropriate name refactoring config endpoint change since configuration provider connection information longer service configuration struct config endpoint processing modified add configuration provider connection information resulting json create service configuration client interface change current registry client following current registry client interface type client interface register error hasconfiguration bool error putconfigurationtomlconfiguration tomltree overwrite bool error putconfigurationconfigstruct interface overwrite bool error getconfigurationconfigstruct interface interface error watchforchangesupdatechannel chan interface errorchannel chan error configuration interface waitkey string isalive bool configurationvalueexistsname string bool error getconfigurationvaluename string byte error putconfigurationvaluename string value byte error getserviceendpointserviceid string typesserviceendpoint error isserviceavailableserviceid string error new configuration client following new configuration client interface contains service configuration specific portion current registry client type client interface hasconfiguration bool error putconfigurationfromtomlconfiguration tomltree overwrite bool error putconfigurationconfigstruct interface overwrite bool error getconfigurationconfigstruct interface interface error watchforchangesupdatechannel chan interface errorchannel chan error configuration interface waitkey string isalive bool configurationvalueexistsname string bool error getconfigurationvaluename string byte error putconfigurationvaluename string value byte error revised registry client following revised registry client interface contains service registry specific portion current registry client unregister api added per issue type client interface register error unregister error isalive bool getserviceendpointserviceid string typesserviceendpoint error isserviceavailableserviceid string error client configuration structs current registry client config following current struct configure current registry client type config struct protocol string host string port int type string stem string servicekey string servicehost string serviceport int serviceprotocol string checkroute string checkinterval string new configuration client config following new struct configure new configuration client command line environment variable value service registry portion removed existing registry client config type config struct protocol string host string port int type string basepath string servicekey string new registry client config following revised struct configure new registry client information service configuration mostly unchanged existing registry client config except stem configuration removed type config struct protocol string host string port int type string servicekey string servicehost string serviceport int serviceprotocol string checkroute string checkinterval string provider implementation current consul implementation registry client split implementation new configuration client new gomodconfiguration module revised registry client existing gomodregistry module decided move forward design initial adr approved decided retain rregistry commandline flag add enabled field registry provider configuration consequence refactoring gomodregistry gomodconfiguration complete integrated new gomodbootstrap part integration command line change point edgexgo service integrated new registry configuration provider app service sdk device service sdk integrate gomodbootstrap take advantage new provider reference registry abstraction decouple edgex service consul previous design
make wikibasegit monorepo adr wikibaserelated code found various place different degree isolation part php code especially early fundamental part like data model serialization independent library separate git repository distributed via composer javascript code new termbox also developed independently typically included git submodule hand much wikibase included directly wikibase git repository often part monolithic lib component part goal decoupling hike june august develop strategy refactoring lib component found separate library obvious benefit thanks standalone separate component also downside development inconvenient develop library separate repository cumbersome get change back main wikibase git repository best submodule pointer updated worst library publish new release make way mediawikivendor investigated monorepo approach propose offer best world monorepos also others including symfony php framework blog post talk video wikibasegit become monorepo containing overall mediawiki extension code also code history library stand change library become immediately effective within wikibase also published separately possible section wikibase lib extracted separate library dependency mediawiki removed replaced suitable mediawiki library wikimediatimestamp instead wftimestamp source code moved subdirectory libincludes libtestsphpunit subdirectory libpackages adjusting path extension autoloadnamespaces elsewhere named prospective composer package name composerjson file added git filterrepo tool extract subset wikibase git history change relevant new library new readonly repository vcs source composer package automatically updated github action see githubworkflowsfilterchangesyml decoupling hike team demonstrated step wikibasechanges library see related task detail formerly standalone library merged wikibase git repository history preserved also extracted separate git repository git filterrepobased process outlined expect possible produce identical git hash making migration transparent user library git repository repository simply longer main source truth decoupling hike team done existing library consequence code formerly part lib become standalone coupled mediawiki core wikibase still developed mostly fashion library standalone remain independent development take place wikibase git repository change become effective immediately without wait next release mediawikivendor update treewide change code style update easier apply new component source code strategy clear expected developed wikibase setup also extract separate git repository git filterrepo right beginning remove source uncertainty new project publishing package separate repository github done following benfits able see isolated history contributor wikibase change contributor able run test isolation without surrounding wikibase code present wikibase change travis
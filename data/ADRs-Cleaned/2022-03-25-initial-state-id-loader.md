title initial state loader area customerorder tag performance statemachine cache performance optimization noticed determination initial state state machine currently associated quite high database load although one must determined consequence checkout unnecessarily much load database caused order determine initial state must determined orderstate orderdeliverystate well ordertransactionstate machine responsible load shopwarecoresystemstatemachinestatemachineregistrygetinitialstate method usually follows php thisstatemachineregistrygetinitialstateorderstatesstatemachine contextgetcontextgetid thisstatemachineregistrygetinitialstateorderdeliverystatesstatemachine contextgetcontextgetid thisstatemachineregistrygetinitialstateordertransactionstatesstatemachine contextgetcontextgetid inside getinitialstate complete statemachine object loaded including transition state criterion new criterion criterion addfilternew equalsfilterstatemachinetechnicalname name setlimit criteriagetassociationtransitions addsortingnew fieldsortingstatemachinetransitionactionname addassociationfromstatemachinestate addassociationtostatemachinestate criteriagetassociationstates addsortingnew fieldsortingstatemachinestatetechnicalname since mean unnecessary load database deprecated method provided new smaller faster service furthermore usage core removed replaced new service php namespace shopwarecoresystemstatemachineloader class initialstateidloader implement resetinterface public const cachekey statemachineinitialstateids public function getstring name string issetthisidsname return thisidsname thisids thisload return thisidsname private function load array return thiscachegetselfcachekey function return thisconnectionfetchallkeyvalue select technicalname lowerhexinitialstateid initialstateid statemachine help service able reduce determination initial state load multiple cache shown invalidated dal written event statemachine entity
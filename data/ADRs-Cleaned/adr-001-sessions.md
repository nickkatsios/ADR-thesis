record session management email alert frontend note adr superseded adr introduction frontend application govuk cooky stripped varnish render default csrf protection offered rail useless also raise error csrf actively disabled application csrf authenticity token way securing cross site request forgery web application inclusion hidden authenticity token form might cause state change typically put post delete action role token ensure request come page served application malicious third party site builtin default csrf protection rail requires session cooky govuk varnish configuration govuk frontend application aside licensing cooky stripped varnish see vclrecv vclfetch email alert frontends responsibility email alert frontend responsible front end journey allow user subscribe unsubscribe email communicates email alert api api adapter email alert api store retrieves actual data relating email subscription current current continue stripping cooky varnish email alert frontend disable csrf protection permethod basis disabling csrf protection application whole rejected expected application behaviour could leave unintended security risk place future developer expect standard rail application setup risk main risk newlydeveloped functionality moment malicious party could trick user subscribing unsubscribing content govuk risk malicious party could iterate craft specific uuids attempt automate unsubscriptions future likely email alert frontend want implement proper session management future piece development full subscription management process undertaken point revisit appropriate remove code disabling csrf protection potential issue caching fastly differentiate session cooky mean user see others content something tijmen brought worth chatting
aaq structure search pending reimplementing search elasticsearch must reimplement ask question aaq search one primary usecase storing aaq document search support must continue able redesigned search searching aaq thread unit secondary usecases may want support storing aaq document nonexhaustive list searching within aaq thread searching within question solution aggregating answer create contribution data also want search fast model data avoid nested field parentchild relationship denormalization wherever possible httpswwwelasticcoguideenelasticsearchreferencetuneforsearchspeedhtmldocumentmodeling model data based make sense expected usecases make fast efficient rather feeling like must copy data structure database vein structure two document type within one index questiondocument answerdocument questiondocument exist question exists database answerdocument exist answer exists database answerdocument subclass questiondocument inherit field set value field value question associated answer instance database answercreated answerquestioncreated elastic answerdocumentcreated answerdocumentquestioncreated questiondocument also answercontent field contains content question answer set null answerdocument consequence questiondocuments distinguished answerdocuments whether created value null structure give great flexibility type search aggregation aaq thread searched unit searching questioncontent answercontent field questiondocument collapsing aggregation arent required ensure thread appear wouldnt case didnt answercontent field search within aaq thread possible searching questioncontent field questiondocument content field answerdocument search limited question content content answer solution filtering issolved true searching questioncontent content field aggregation answer gathering contribution metric performed aggregating answerdocuments may question data indexed answerdocuments never
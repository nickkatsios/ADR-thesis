custom save handler servicefront proposed servicefront component written php default redis save handler persisting session data certain situation application may request resource take significant time deliver lpa via sirius data api resource requested via ajax request possible client request new resource fully processed processing completes processing process erroneously overwrite session data added resulting loss session data required cause particular problem csrf token shown typical sequence servicefront dashboard page load browser triggering clientside ajax request controller controller read session data initiate slow request sirius api get lpa meanwhile user replacementattorney page ajax request redundant user isnt dashboard page controller doesnt know replacementattorney controller read session data controller continues processing sirius response unaware new data added session replacementattorney replacementattorney add csrf data session creating replacementattorney page render form csrf token associated data replacementattorney writes session including csrf data page finish processing unaware assumes correct data writes session losing delta including csrf token user submits form replacementattorney controller csrf token form replacementattorney controller load retrieves session written controller doesnt csrf token comparison value form submitted user csrf validation fails custom save handler prevent certain ajax request writing data session still redis storage backend approach send ajax request custom xsessionreadonly true header implying controller invoke read session never write save handler inspects header incoming request ignores request write session accompanied header php provides mechanism read session via sessionstartarrayreadandclose true however complexity processing lamina stack session management override attempt call function consequently pragmatic solution move stack lowerlevel save handler implement readonly behaviour request know problematic consequence con save handler code maintain cant configure default redis save handler additional configuration code inject save handler session complicated clientside request decide read session due complexity session management additional risk session handling implemented properly save handler implemented additional load test look sign session bleeding mitigate pro fix csrf issue prevents race condition cause ajax request overwrite session state incorrectly
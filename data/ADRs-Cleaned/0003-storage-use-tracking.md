shared storage tracking proposed author gary tierney deciders donald gray tom crane technical story problem statement identify frequentlyrecently accessed asset retained sharedstorage volume providing approach evict appropriate asset adr relates tracking asset driver performance must able identify asset eviction faster volume filled consistency ideally tracked rather last time considered naive filesystem walk recording last access time process lustre changelogs record filesystem change inotify outcome pending pro con naive filesystem walk recording last access time approach currently implemented single thread periodically walk filesystem root record atime every file tree positive consequence simple implementation low maintenance retains familiar albeit potentially flawed approach current scavenger negative consequence able immediately evict deleted asset cache requires diff local file tree past view file tree scale fast filesystem walk speed bottlenecked system call resulting networked call lustre driver multiple core help speed processing time significantly accessesuses filesystem walk recorded process lustre changelogs lustre changelog feature record operation happen lustre filesystem note access time modification open event recorded default recorded setting changelog mask shell lctl setparam mddlustremdtchangelogmaskopen atime creat unlink changelog simple fixed size ring buffer begin purge old record storage fill however changelog reader registered lustre stop purging record marked seen reader every record stored contains following information every event operationtypenumericaltext timestamp datestamp flag ttargetfid efextendedflags uuidgid nidclientnid pparentfid targetname caveat targetname refers basename file accessed retreiving full path requires lookup parentfid positive consequence scale across multiple node core translating opencreatedelete event reference counting system cache straight forward system call made resolve parent pathnames cached filesystem driver overhead minimal scaling processing across multiple core trivial assigning batch size negative consequence custom data format requires writing parser cli output people seem interact lustre directly level making documentation scarce cache state lost naive filesystem walk described first approach required build view filesystem generate lustre changelog record mechanism filter needed uidgid record filesystem change inotify inotify linux kernel mechanism recording filesystem event capable recording event local vfs device get event machine youre inotify inapplicable additional consideration priority asset may desirable provide set asset never rarely evicted regardless time frequency access separate set priority file tracked solution excluded eviction set mechanism translating orchestrator asset request filesystem object reference would needed
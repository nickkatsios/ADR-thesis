adr relayer implementation changelog first draft proposed revised fixed todos reviewed adr document implementation relayer lib crate library instantiated hermes binary ibcrelayercli crate focus discussion main design goal meant lay foundation upon add feature enhancement incrementally later relayer version say may deficient term feature robustness rather aim simple adaptable extensible reason primarily discus aspect concurrency architecture relayer versioning scheme midterm relayer architecture set evolve across three version first make several simplifying assumption environment relayer feature assumption important towards limiting scope aim cover allowing focus architecture concurrency model provide growth future assumption documented section configuration part relayer configuration static configuration chain respective object client connection channel fully specified relayer configuration file change throughout execution light client also statically defined config file cannot switched dynamically runtime recent change protocol specifies identifier selection client connection channel deterministic reason specify identifier configuration file specify pair chain communicate one another port identifier purpose pair chain plus corresponding port identifier called relaying path relaying path unidirectional example relevant section configuration file follows toml connection achain ibc bchain ibc connectionspaths aport transfer bport transfer two chain ith one connection path relaying port called transfer chain chain ibc ibc link link relayerlevel protocol implement packet relay across one relaying path relayer focus single link limitation lifted subsequent version chain state chain assumed start empty ibc state mean relayer take care creating client connection channel object respectively side link proof verification relayer proof verification feature set complete list feature documented elsewhere detail relayer concurrency model relayer work assumption competing relayers running concurrently may interfere furthermore stated relayer handle single link one packet relaying direction source chain destination chain following diagram sketch relayer domain decomposition highlevel focus one link relayer support single stack made connection channel link application thread run upon starting creates link associated relaying path also trigger message creating object client connection channel underlying link cause relayer build send message associated handshake object plus retry mechanism work even event received link time live chain ibc event word synchronization start thread required beside application thread relayer maintains one thread chain number thread per chain chainspecific production chain gaiagaia see also reference reference three separate thread described detail architecture section mock chain mock one thread link run main application thread consumes event chain performs query sends transaction synchronously architecture following diagram provides detail relayer structured focus interface within relayer well interface relayer single chain legend notation figure following meaning notation description example enum typically message thread chainrequest ibcevent struct processing element foreignclient connection trait typically interface thread chain lightclientc chain level abstraction top diagram chain consisting multiple full node deeper lower sketch closer get user hermes relayer cli understand relayer architecture intuitively break level abstraction follows actual chain comprising number full node lowest level abstraction farthest away relayer user relayer communicates chain via three interface lightclient trait handled via supervisor production chain chain trait communication happens abcigrpc interface primarily iii eventmonitor subscribes full node carry batch event node chain runtime relayer currently relayer register block notification extract ibc event generates newblock event also block note notification may include multiple ibc event chain runtime intermediary layer sitting relayer application chain runtime universal possible chain contain chainspecific code accepts input request application hermes cli form chainrequest via crossbeam channel responds application via crossbeam channel object implement three interface named lightclient chain eventmonitor orchestrates access object required application request relayer application communicates runtime via chainhandle contains appropriate crossbeam sender receiver channel tofrom runtime upon startup instantiates relayerlevel object following order two foreignclients one per chain connection contains two client channel containing connection top link code part hermes relayer cli binary thread thread diagram separate box shaded gray four thread running eventmonitor supervisor runtime main application thread called vcmd consequence positive prepares relayer crate incremental growth negative neutral reference gaia correct gaia instance working obtained httpsgithubcomcosmosrelayer git checkout executing make buildgaia comment provides additional insight developmenttime relayer environment mock removed splitting ibcrs repository
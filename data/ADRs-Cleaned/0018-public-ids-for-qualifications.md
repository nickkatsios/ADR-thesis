public qualification vendor api expose candidate qualification grade system ingest qualification system vendor system identify qualification therefore important qualification coming api unique database qualification object purpose issue arises qualification made multiple examsgrades see adr structured grade background way gcse qualification stored api consumer expect one qualification entity per examgrade however structured grade introduced examsgrades share database therefore qualification coming api unique initially considered changing data type field api response string support form vendor able support change field remain integer solution split two one qualification single grade api one qualification multiple entity api split simple structured unstructured grade since triple science stored structure grade surfaced single gcse api applicationqualifications table get new publicid column store api qualification qualification simple grade one examgrade triple science gcse publicid set database qualification initially via data migration qualification structured grade built multiple examsgrades publicid column set nil public set inside structuredgrades json one per grade qualification structured grade could look like subject english publicid nil grade nil constituentgrades english language grade publicid english literature grade publicid cockney rhyming slang grade publicid level gcse completeness qualification single grade could look like subject french publicid grade constituentgrades nil level gcse order keep change backwards compatible api first grade inside structured grade get database qualification publicid grade get new publicid unique among qualification generate new take minimum next available integer publicids postgres sequence ensure uniqueness would posed problem still database column public simple grade qualification would overlap database publicids qualification however since new publicid column exists new qualification added public generated clash come retain full backwards compatibility app database throughout process add new column applicationqualifications table replace structuredgrades column let change data structure structured grade safely consequence qualification entity globally unique api
title checkout gateway area checkout tag checkout app payment shipping cart adr enhanced checkout gateway feature response evolving landscape checkout decisionmaking propose introduction centralized opinionated solution solution aim facilitate informed checkout process based cart content current sale channel appsystem particular stand benefit significantly enabling seamless communication app server presently achieving functionality constrained app script limiting capacity making nuanced checkout based app server logic moreover payment shipping provider necessitate specific criterion determining availability respective method criterion include consideration risk assessment related current customer cart unavailability criterion merchant connection validation checking correct credential service availability testing detecting provider outage additionally provider require ability block cart checkout based risk assessment adr focus aforementioned feature implementation designed allow seamless future extension checkoutgatewayinterface address outlined challenge propose introduction checkoutgatewayinterface interface invoked checkout process determine response tailored current cart sale channel php namespace shopwarecorecheckoutgateway shopwarecorecheckoutgatewaycommandstructcheckoutgatewaypayloadstruct shopwarecoreframeworklogpackage packagecheckout interface checkoutgatewayinterface input struct consists cart sale channel currently available payment shipping method public function processcheckoutgatewaypayloadstruct checkoutgatewayresponse plugin developer encouraged create custom implementation checkoutgatewayinterface specific checkout logic based external system erp pim checkoutgatewayresponse include entitycollection payment shipping method suitable current along collection carterrors input struct response designed future extension allowing intricate decisionmaking checkout storeapi new store api route checkoutgatewayroute storeapicheckoutgateway introduced route call checkoutgatewayinterface implementation respond accordingly integral cartorderroute request ensuring cart validity checkout order process storefront default invocation checkoutgatewayroute occur checkoutconfirm page editorder page socalled order change language currency trigger reload payment method selection calling app server checkout gateway command streamlined response manipulation plugins app server alike propose executable chain checkoutgatewaycommands implementation appsystem heavily rely command structure however encouraged mandatory custom implementation pluginsystem implementation checkoutgatewayinterface follow command structure command chosen predefined set responded plugins app server initial release include following command addpaymentmethod removepaymentmethod addshippingmethod removeshippingmethod addcarterror depending command payload may differ necessitating update documentation propose handler pattern facilitate execution command command executed order provided response appsystem initial release shopware support single implementation checkoutgatewayinterface provided appsystem appcheckoutgateway sequentially call active apps app defined checkoutgatewayurl manifestxml file app manifest address challenge apps new app endpoint defined manifestxml new key gateway added manifest file subkey checkout define endpoint gateway key signalizes possible future similar endpoint different purpose checkout gateway endpoint configured new element called checkout xml gateway checkouthttpsexamplecomcheckoutgatewaycheckout gateway checkout gateway app payload app server receive current saleschannelcontext cart available payment shipping method part payload appcheckoutgateway call app server payload json saleschannelcontext saleschannelcontextobject cart cartobject paymentmethods paymentmethodtechnicalname paymentmethodtechnicalname paymentmethodtechnicalname shippingmethods shippingmethodtechnicalname shippingmethodtechnicalname shippingmethodtechnicalname note paymentmethods shippingmethods array contain technical name method full entity checkout gateway app response json command removepaymentmethod payload paymentmethodtechnicalname paymentmyapppaymentmethod command addcarterror payload reason payment method available cart level blockorder true event new event checkoutgatewaycommandscollectedevent introduced event dispatched appcheckoutgateway collected command app server allows plugins manipulate command executed based payload app server retrieve consequence app php sdk appphpsdk enhanced support new endpoint data type ensuring seamless integration command structure following adaptation made checkout gateway request payload deserialized checkoutgatewayrequest object checkout gateway response deserialized checkoutgatewayresponse object every possible checkout gateway command class representing facilitating easy manipulation payload
adr state accessors changelog sep initial draft cosmos sdk module currently kvstore interface codec access respective state provides large degree freedom module developer hard modularize mediocre first time module try access state marshal value set get value finally unmarshal usually done declaring keepergetxxx keepersetxxx function repetitive hard maintain second make harder align object capability theorem right access state defined storekey give full access entire merkle tree module cannot send access right specific keyvalue pair set keyvalue pair another module safely finally gettersetter function defined method module keeper reviewer consider whole merkle tree space reviewing function accessing part state static way know part state function accessing define type named value type value struct mapping key byte value work reference keyvalue pair state valuem defines keyvalue space access valuekey defines exact key reference define type named mapping type mapping struct storekey sdkstorekey cdc codeclegacyamino prefix byte mapping work reference keyvalue space state mappingstorekey defines iavl subtree mappingprefix defines optional subspace prefix define following core method value type get unmarshal stored data noop exists panic cannot unmarshal func value getctx ptr interface get unmarshal stored data return error exists cannot unmarshal func value getsafectx ptr interface get stored data raw byte slice func value getrawctx byte marshal set raw value func value setctx interface check raw value exists func value existsctx bool delete raw value value func value deletectx define following core method mapping type construct keyvalue pair reference corresponding key argument mapping space func mapping valuekey byte value get unmarshal stored data noop exists panic cannot unmarshal func mapping getctx key byte ptr interface get unmarshal stored data return error exists cannot unmarshal func mapping getsafectx key byte ptr interface get stored data raw byte slice func mapping getrawctx key byte byte marshal set raw value func mapping setctx key byte interface check raw value exists func mapping hasctx key byte bool delete raw value value func mapping deletectx key byte method mapping type passed argument ctx key args proxy call mappingvaluekey argument ctx args addition define provide common set type derived value type type boolean struct value type enum struct value type integer struct value enc intencoding type string struct value encoding scheme different argument core method typed ptr argument core method replaced explicit return type finally define family type derived mapping type type indexer struct mapping enc intencoding key argument core method typed property accessor type state access happens function take argument invoked accessor type structs give right access state struct referring marshallingunmarshalling happens implicitly within core method proposed consequence positive serialization done automatically shorter code size boilerplate better reference state transferred safely explicit scope accessing negative serialization format hidden different architecture current accessor type optin typespecific type boolean integer defined manually neutral reference
licensing deciders team problem statement purpose record outline implementation license management elasticsearch cluster managed elastic operator driver goldplatinum level license applied cluster internal user applying license manage privilege security feature enabled always case enterprise license shared multiple cluster case might want isolate enterprise license cluster different namespace considered directly applied license simplest support new resource type clusterlicense linked onetoone cluster association proposal responsibility elasticsearchclustercontroller watch resource apply license cluster pro simple principle orthogonal con user manage license createuploadupdate expires yaml apiversion elasticsearchkselasticcovalpha kind clusterlicense metadata name clustername namespace clusternamespace spec uid dccbedfaxx type standard issuedate microtime expirydate microtime issuedto issuedto issuer issuer signatureref name secretname key optional secret key secret containing multiple sigs license pool license controller support pool license create license controller applies suitable license individual cluster deployment pool license understood one enterprise license namespace license controller controller selects license pool license one two heuristic find suitable license suitable defined similar current practice descending precedence order platinum gold standard best match regard license validity least day license start least day license expiry cluster also express desire issued specific kind license special label example kselasticcodesiredlicenseplatinum case controller try find match regard license validity least day license start least day license expiry right type workflow user creates combination secret license signature corresponding clusterlicenseenterpriselicense namespace license controller license controller watch elasticsearch cluster namespaces periodically check whether new clusterlicense attached actual license application handled elasticsearch cluster controller necessary credential credential license controller yaml apiversion elasticsearchkselasticcovalpha kind enterpriselicense metadata name licensename namespace licensecontrollernamespace spec uid dccbedfaxx type enterprise issuedate microtime expirydate microtime maxinstances issuedto issuedto issuer issuer signatureref name secretname key optional secret key secret containing multiple sigs clusterlicenses uid clusterlicensespecinline outcome valid two separate implementation phase without running license controller still ensures license applied elasticsearch positive consequence orthogonal combination user create enterprise license namespace license controller one license controller manage license elasticsearch cluster negative consequence limited enterprise license moment could revisited question kind license support gold platinum standard license assume license type license expires recover cluster disintegrate license expires operator detect cluster unhealthy current health check start failing cluster never license might continue starting trial license cluster form issued proper license license api stay responsive even without license attached cluster cluster bounce back soon valid license put place handle license downgrade basic basic support internal way moment downgrade basic preventvalidate crd validation way testing licensing generate test license really unitintegration test code around license management think two future dev license similar elasticsearch would require dev docker image loading valid license vault run set integration test support enterprise license contain individual cluster license yes phase license pool shout support enterprise license really custom resource definition license could secret theory secret would suffice opted custom resource type secret reference structured resource known field instead generic associative bag custom resource also allows validation want
adr multiple notary configuration previously connaisseur supported configuration single notary signature data reside unfortunately rather impractical one doesnt create signature image one cluster access signature data multiple place like setup image come private registry notary docker hub notary also problem single notary instance could multiple root key creating signature like case docker hub connaisseur also support single root key trust pinned thus making impractical thats made support one notary multiple key per notary lead question new configuration look like also implication notary health check important connaisseurs readiness check considered choice overall notary configuration setup chartsconnaisseurvaluesyaml per notary notary field becomes list change notary per notary instance one entry list entry following data field bold mandatory name unique identifier notary configuration image policy host host address notary instance pubrootkeys list public root key signature verification name identifier single public root key image policy key actual public root key pem format selfsignedcert selfsigned certificate pem format making secure connection notary auth authentication detail notary require user username authenticate password password authenticate secretname kubernetes secret reference instead userpassword combination isacr mark notary part azure container registry image policy two additional field per rule entry quote already present field pattern image pattern match rule apply verify whether image verified delegation list required delegation role notary notary matching image correspond name field one configured notary happens none given defined result choice key key signature verification correspond name field one public key configured notary corresponding image policy notary field happens none given defined result choice per notary key notary field becomes list change notary per notary public root key combination one entry meaning example one entry docker hub public key official image another entry docker hub public key private image entry look identical one two exception pubrootkeys field notary configuration wont list single entry without needing specify key name image policy address notary configuration chosen notary field without key field choice default value notary key inside image policy first item notary specified image policy rule first entry notary configuration list taken public root key list choice chosen problem might get inconsistent list ordering python get shuffled around explicit default one notary configuration given default field mark default value problem real problem extra field user care mandatory notary notary potentially key field mandatory image policy problem creates configuration overhead many image policy notarykey combination default name notary key given image policy assumed one element notary list key list name default taken assumption wrong error raised choice previously readiness probe connaisseur also considered notary health multiple notary instance configured behavior change ignore notary readiness probe connaisseur longer dependent notary health check completely decoupled problem knowledge connaisseur automatically fail unreachable notary one try deploy image health check order connaisseur ready configured notary must healthy reachable problem single unreachable notary disable connaisseurs access others log notary mix whereas readiness connaisseur independent notary health check still made unhealthy notary logged problem interval logged outcome choice chosen keep configurational duplication minimum choice chosen one notary configuration key within configuration present one called default setting name field way obvious enough configuration key specified within image policy keeping configuration effort low choice chosen notary connaisseur completely decoupled connaisseur logging notary cant reach way connaisseur still operational even notary unreachable otherwise connaisseur would blocked even image allowlisted breaking change agreed better allows deployment respective image policy specifies verify false
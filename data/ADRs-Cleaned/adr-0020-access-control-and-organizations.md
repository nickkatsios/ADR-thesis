permission architecture organization adr superseded adr concerning implementation access control rulesacrs basic implementation organization essence two organization root organization default public organization feature initially envisioned change priority lack data pushed full implementation road point would better understanding usage pattern requirement find point target feature set concept target feature set introduces redefines administrative concept platform platform top level unit administration platform provide administrative control number organization platform owner group owner administer underlying organization application platform largely invisible user given administrative control platform platform implemented allow largescale organization raster foundry foundational architecture case whether public infrastructure raster foundry raster foundry deployed private cloud platform level control make managing large number organization realistic organization organization represent group user within platform organization two type setting one group setting administered platform owner featureflags upload limit another set adjustable organization owner logo api key organization belongs one platform user member one organization team team represent group user within across organization team belongs one organization user member number team mechanic able determine user access entity taking account multiple factor including entity ownership team membership organization membership role within organization role within platform explicitly granted access scenario consider following scenario mechanism test accesscontrol method member organization want allow user organization view project allowing anyone outside organization access admin organization able change organization setting regular user within organization admins organization allowed view adjust setting admin platform able change platform level setting user platform admins cannot view change setting member team want allow user team able view edit analysis allowing anyone outside team access user organization want another user organization able view project ensuring user organization access user team want user team able view analysis current landscape existing control current implementation far complete existing piece api could kept place requires full understanding current implementation userorganization relationship user organization field allows relationship organization user currently permission check method isinrootorganization isinrootorsameorganizationas user role user role field field limited three value user viewer admin field actually way entity ownership visibility entity api owner apart organization user owner basis permission check many case method like isinrootorowner entity api also visibility field field determines visibility particular entity relative owning user organization three possible value public entity visible user organization organization entity visible user within organization owner private entity visible owner entity also assumed admin user view entity regardless visibility setting access control method attempting understand various method would applied important note case method conjunction case one method implement another method additionally many standard method mostly described theoretical term implementation detail seen scope terminology helpful object resource entity protected unauthorized access action think crud raster foundry object project analysis subject entity attempting access perform action object case user could also machineuser attribute property entity environmental condition object subject attribute owner name timestamps environmental attribute could timeofday dayofweek even current location subject mandatory access control mac mac access control method policy applied subject object based security attribute determine access allowed resource owner control policy attribute mandatory access control security policy centrally controlled security policy administrator user ability override policy example grant access file would otherwise restricted mandatory access control wikipedia many mac implementation focused accesscontrol compatible government classified information system strict control mac provides necessary case security attribute subject could subject clearance level object security attribute would classification level policy would indicate subject topsecret clearance read object topsecret classification level contrived example mac might look like raster foundry nonadmin user create analysis never delete analysis admin user create analysis nonadmin user view analysis discretionary access control dac dac similar mac policy applied subject object determine attribute satisfy access requirement dac differs mac object owner elect modify attribute object thereby grant access user hence discretionary portion name example would unix file mode ability user chmod adjust attribute file rolebased access control rbac rbac role assigned user determine access rbac also enforce mac dac user never assigned permission directly instead permission granted user determined assigned role rbac role intended define user permission term specific operation organizational meaning raster foundry operation might adding band datasource rather defining user permission term object editing datasource typical rbac data model role granted permission permission map operation object mean pool object expand permission granted role also expand example project created permission projectget would created added admin role adding permission admin role avoids directly grant permission large number user role access control list acl identitybased access control ibac acls list identity allowed access specific resource resource acl attempted access requires ensuring subject identity included object acl acl implementation differ complexity case entry acl also contains specific operation example entry may indicate user may allowed read object another entry indicates user write object sense user access accumulated acl attributebased access control abac abac considered successor rbac seen policy based similar mac far flexible various attribute source compute access right additionally unlike mac abac prohibit resource owner control permission example timeofday could attribute creating accesspolicy user create deposit abacs flexibility implement mac dac rbac acls case rbac evaluated subject attribute would role acl subject attribute might object attribute would acl abac policy often expressed xacml xacml wikipedia requirement abac accesscontrol analysis contextual knowledge back look scenario previously listed see best might implemented scenario member organization want allow user organization view project allowing anyone outside organization access would best implemented dac abac subject case someone trying access project person creating project subject attribute organization object attribute visibility organization organization policy member organization read access project organization mac suitable user control visibility object weve already implemented attribute determine access scenario admin organization able change organization setting regular user within organization admins organization allowed view adjust setting could implemented method rbac make sense would assume role specific organization exists admins subject would role view change setting scenario admin platform able change platform level setting user platform admins cannot view change setting rbac make sense scenario well assuming role platform exists scenario member team want allow user team able view edit analysis allowing anyone outside team access rbac would involve role member team permission view edit specific analysis would added teammember role specific team thing certainly begin get convoluted level abac may better point note involve implementing acl within abac note subject still person attempting access subject attribute teammembership object attribute visibility private acl team teamidview team teamid edit policy creator object access private entity acl team entry would check subject teammembership grant specific permission match scenario user organization want another user organization able view project ensuring user organization access rbac would messy would involve new role specifically project adding needed permission role granting user role instead seems like clear case acl via abac would mean adding single user project acl view permission subject attribute userid object attribute visibility private acl user useridview policy creator object access private entity acl user entry would check subject userid grant specific permission match scenario user team want user team able view analysis scenario would handled similarly way scenario different acl subject attribute teammembership object attribute visibility private acl team teamidview policy creator object access private entity acl team entry would check subject teammembership grant specific permission match proposed access control approach scenario make thing clear accesscontrol system concept acls accesscontrol system concept role almost anything rbac risk roleexplosion real rbac implemented emulate acl functionality unavoidable addition administrative overhead rbac would significant would mostlikely necessary present interface user largely obscures underlying accesscontrol system hand implementing accesscontrol system acls would allow accesscontrol system closely parallel presented user propose aclcentric approach take implementation detail accesscontrol computation within process completing action object accesscontrol computation determine subject necessary permission complete action akka authorize directive authorize akka http per object policy set seems like would good approach policy method leverage request subject object return boolean indicate access allowed would also beneficial unit test policy well objectlevel policysets whole possible issue accesscontrol logic api level code rather level could incur large read define apply policy subject object acl abac perspective treat acls object level attribute architectural perspective acl table would enable query better leverage acls improve performance list query possible schema table could uuid objecttype enum object type project analysis etc objectid uuid pointing specific object subjecttype enum possible control level public platform organization team user subjectid uuid pointing specific subject nullable public would allowedactions field could handled several way limited enum action type could multiple row fully represent access rule one row read one write etc bit mask could represent possible permission single column separate boolean column action acls operate subject level relate specific permission specific user propose implement multilevel acl reflects userorganization structure mean allowing acl entry reference one following platform organization team user acls first accesscontrol check done would override policy acls would also effectively eliminate visibility field present resource acl would allow defining object visibility finegrained control private organzation public issue dont currently approach replicating public though allowing access platform level may sufficient question storing acl entity make sense separate table json make sense better type subject level necessary action missing eliminate visibility field resource instead acl exclusively replicate public visibility setting platform level acl entry equivalent negative permission example specifically denying access certain person team role handle role subject attribute would best accomplished via relationship table entry could constructed like uuid user uuid user role applies grouptype platform organization team groupid uuid specific group role admin member enums rather isadmin field leaf room role could also done separate table type rather combining one table question comment currently think user belong one organization user would move different organization would create another account may problematic approach currently authenticate via email would account cant support think better name type typeid descriptive eliminate organization role column user lean towards yes sample implementation sample implementation make several change add table platform team usergrouproles accesscontrols add enums grouptype grouprole objecttype subjecttype accesscontrolaction add platformid column organization remove role organizationid user seed database testable user orgs team rule existing project project test owned user platform organization team user assigned platform organization team role user platform organization team user platform organization team user platform organization user platform organization test following access control rule applied project set viewable organization project set viewable team project set viewable user project set viewable platform project set viewable platform well test looking project show user here expected user able view project project project user able view project project user able view project project user able view project following sql allow proposed solution tested sql create table platform uuid primary key null name text null alter table organization add platformid uuid reference platformsid create table team uuid primary key null organizationid uuid reference organizationsid null name text null create type grouptype enum platform organization team create type grouprole enum admin member create table usergrouproles uuid primary key null userid varchar reference usersid null grouptype grouptype null groupid uuid null grouprole grouprole null create type objecttype enum project scene create type subjecttype enum platform organization team user create type accesscontrolaction enum view edit create table accesscontrols uuid primary key null objecttype objecttype null objectid uuid null subjecttype subjecttype null subjectid text allowedaction accesscontrolaction null alter table user drop column role drop column organizationid create platform insert platform value eadaecebbefbadbe platform create platform insert platform value ddaedacbddcddb platform create organization platform insert organization value cbcbddcfbca organization eadaecebbefbadbe insert organization value fbbaef organization eadaecebbefbadbe create organization platform insert organization value dbcabfebdcc organization ddaedacbddcddb create team organization insert team value decaaffcceef cbcbddcfbca team create team organization insert team value bafdbadcac cbcbddcfbca team create team organization insert team value eebcebdfcbfe fbbaef team inserting fixture user insert user createdat modifiedat value bcbcdacde ecbcefbabfecfaf addbcdbec fccceaedefc make user admin platform insert usergrouproles value eddceccebee authadfbbcaebcfc platform eadaecebbefbadbe admin make user admin organization organization directly connected platform prototype insert usergrouproles value bbafbafbfdfdeaf authadfbbcaebcfc organization cbcbddcfbca admin make user admin team insert usergrouproles value edefcdfe authadfbbcaebcfc team decaaffcceef admin make user member platform insert usergrouproles value cbdbdaacfede bcbcdacde platform eadaecebbefbadbe member make user member organization insert usergrouproles value febfaafc bcbcdacde organization cbcbddcfbca member make user member team insert usergrouproles value dbadfbbbcedcff bcbcdacde team decaaffcceef member make user member platform insert usergrouproles value fffeaeffd ecbcefbabfecfaf platform eadaecebbefbadbe member make user member organization insert usergrouproles value ecfaaffc ecbcefbabfecfaf organization cbcbddcfbca member make user member team insert usergrouproles value edacdaebe ecbcefbabfecfaf team bafdbadcac member make user member platform insert usergrouproles value dabfcdbdeabeffead addbcdbec platform eadaecebbefbadbe member make user member organization insert usergrouproles value abdbcadfbbcad addbcdbec organization dbcabfebdcc member make user member platform insert usergrouproles value ecfabbcbdefdddb fccceaedefc platform ddaedacbddcddb member make user member organization insert usergrouproles value bbcaeeeaeee fccceaedefc organization fbbaef member insert accesscontrols value allow project viewed platform aabbffdc project cccdceddbebbcad platform eadaecebbefbadbe view allow project viewed organization caabdbacf project bafcabbacbaca organization cbcbddcfbca view allow project viewed team fdceadbaccebbdd project eecbfdadaeeb team decaaffcceef view allow project viewed platform dfbfbbeaeabfdefc project bccadedbafed platform ddaedacbddcddb view allow project viewed user dffbdcfecdeff project eecbfdadaeeb user addbcdbec view update project set name project idbafcabbacbaca update project set name project ideecbfdadaeeb update project set name project idcccdceddbebbcad update project set name project idbccadedbafed following sql template listing specific object user access take three parameter objecttype actiontype userid sql doesnt currently handle ownership since want display applied rule sql select distinct pid aclallowedaction aclsubjecttype aclsubjectid aclallowedaction pname usergrouproles ugr join accesscontrols acl aclobjecttype objecttype aclallowedaction actiontype aclsubjecttype aclsubjecttypetext ugrgrouptypetext aclsubjectidtext ugrgroupidtext aclsubjecttype user aclsubjectid ugruserid join project pidtext aclobjectidtext ugruserid userid test objecttype action type always project view respectively change userid see project user would able view
reactive imap lazy consensus implemented classic java programming involves blocking call performing inputoutput thread performing task hand hang response received mean server performing case james would end high number thread imap server one imap request flight equal one thread widely documented issue approach java thread correspond system thread expensive typically thread take memory cap count thread hand thread pool model cap count thread process imap request thread queue request cannot yet handled blocking thread pool model concurrency paradigm james imap implementation reactive programming instead perform blocking operation thus one thread handle several task seen callback executed request received reactive programming model amongst others lead efficient resource usage help keeping count applicative thread low help reduce switch james among past year transitioning reactive programming model reactor library migrated component involves cassandradistributed storage jmap protocol stack webadmin task also relies reactor noted imap network stack netty library allows handling request asynchronously migrate imap reactive model implement way limit imap concurrency protect james server burst consequence significant rewrite imap stack going reactive imap stack yield following improvement reduced thread count imap request handling dealt netty thread improve latencyperformance removing extra scheduling synchronisation lead improved tail latency better throughput diagnostic tool harder top imap stack stack trace complex read glowroot apm would work anymore asynchronous logic notoriously badly handled flame graph messier associated risk badly managed blocking call would directly impact netty event loop thus strongly degrading performance server tool like blockhound help mitigate risk alternative java onward similar concern addressed project loom project delivers virtual thread scheduled java virtual machine top carrier system thread approach allow preserving imperative programing style tooling also work better yet promissing feature would available java lts delivered prior september upgrading james ecosystem java java development kit would controversial might raise significant debate within community operational feedback would likely required prior adoption yet performance comparison asynchronous library follow work component yet migrated reactive style includes mail processing within mailet container remote delivery outgoing smtp smtp server incoming smtp lmtp webadmin lower throughput benefit migrating component reactive style lower thus might match associated rewrite cost operational risk effort yet undertaken might future mentioned append command buffered file happening done dedicated thread associated code complex netty bytetomessagedecoder meant synchronous upcoming netty would enable simplify associated code reference jira james jira james project reactor project loom netty blockhound discussion mailing list
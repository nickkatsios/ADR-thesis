corvustenancy create storage container automatically corvustenancy various storagetechnologyspecific library corvusazurestoragetenancy could dynamically create new container first time asked one problem caused definition type blobstoragecontainerdefinition needed include information required able create new container demand example blob container meant specifying container public access type great idea muddied role definition type primarily logical name also ended containing default configuration setting autocontainergeneration scenario tenant onboarding process process enabling new tenant application particular piece application functionality necessarily includes step determining storage account relevant credential picking suitable container name ensuring proper tenant isolation creating container application control first case second third handled corvustenancy last two unhelpfully tied together unfortunate comingling concern happened due good misguided intention aiming enable application single configuration serving multiple logical container certain kind storage azure blob storage common application split data across multiple container putting user profile detail one container todo list entry another container nontenanted application youd expect configure setting account name credential onceit wouldnt normally make sense percontainer configuration setting youd expect account across logical container came tenanted storage library tried support approach offering conventionbased mechanism enable multiple container definition logical name refer underlying configuration however inextricably linked letting storage library pick container name problem arose one thing tried map logical container name definition type blobstoragecontainerdefinitioncontainername actual container name enable isolation data across tenant even shared storage account container name mapping would typically incorporate tenant real container name however naming scheme initially undocumented implementation detail preventing application anticipating container would actually called application doesnt know container name cant create container prior first tenanted storage provider also automatically created container ended definition type blobstoragecontainerdefinition meant logical identifier needing include information required able create new container demand technically possible application code take control three step listed problematic could disable tenanted container name generation giving control container name making possible application know right container name unfortunate side effect new tenant ended needing create one configuration every logical container take control container creation unavoidably meant complex configuration make change enabling application predict name would could get ahead hindsight ended regretting ever making tenanted storage library create container first place another problem automatic createonfirstuse behaviour problem would prevent creation became visible rather late day might think youd successfully onboarded new tenant discover later everything going work corvustenancy application responsible creating container new tenanted storage client library never create container also application determine strategy picking tenantqualified name ensure isolation case multiple tenant sharing storage account tenancy library provide mechanism work main change application opt explicitly consequence application always create storage container part tenant onboarding process following benefit logical container name separate storage account setting onboarding complete application confident created everything needed new tenant wont surprise error later first try storage tenant downside application code pick name create container migration there problem migration possible app created tenant defined storage configuration yet attempted configuration logical container app library thing get created demand switch library fail encounter one thing transitional mode step upgrade look like running fully library making sort ensurecontainerexiststosupporttransitionfromv call every time get container without making modification tenant configuration adding new vform tenant configuration property run tool walk entire tenancy tree ensuring container exist disableremove transition support remove old configuration entry
control server initial api author mike arpaia marpaia logan mcphail loganmac proposed july osquery provides clientside implementation remote api allow server implement given api specification perform various remote configuration control objective osquery designed design objective minimal readonly example launcher support osquery autoupdate feature would inappropriate osquery core user willing accept risk involved enabling autoupdate osqueryd enable optin feature launcher setting autoupdate flag invoking launcher similarly user willing accept risk writable feature see osquery community thing like writable extension user able enable extension allow mutation table state action taken result see mike myers querycon talk information writable extension usecases map well tabular expression mechanism however feature proposing extension osquery remote api specification certain writeable feature rest document outline detail api initial alpha request format implication api existing current document endeavor describe api extension osquery remote api provides feature capability appropriate included upstream osquery first feature exploring adding control api webbased remote shell feature initial implementation feature loosely based work done gotty project capability adapted authentication mechanism existing osquery client consistentfeeling api initial api api may exploring grpc version well soon initial request response type documented note illustrative purpose api receive rapid iteration based feedback user community get shell api get shell request similar structure osquerys distributed read request body post request contain json one toplevel key nodekey json nodekey adeffccfbebfa response may contain following key session error nodeinvlaid error present error occurred processing request nodeinvalid present host must reenroll session present contain list shell session host launch session request additional onetime secret also authenticate request json session sessionid fbcbcd secret bfdaab error nodeinvalid false join shell session api result receiving request start shell session launcher exec binbash attach tty websocket connection supplied sessionid bash curl post httplauncherexamplecomapishellsfbcbcd contenttype applicationjson authorization bearer bfdaab operator would presumably also establish connection server acting websocket broker operator exit webbased shell experience connection closed client consequence important explicit completely optin feature similarly autoupdate way enable launcher via control flag entire control subsystem ignored user launcher extra table osquery runtime osquery autoupdate capability want control server feature simply dont enable experience wont change
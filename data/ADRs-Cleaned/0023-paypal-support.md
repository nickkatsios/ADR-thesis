add paypal supported payment deciders ben bangert barry chen tyler duzan bianca danforth yeon kim wennie leung problem statement subscription platform implemented stripe payment processor driver subscription logic stripe source truth whether account subscription associated would like add paypal payment subscription integrate appropriately existing system leasteffort manner ideally flexible enough support future expansion payment processor iap driver engineering resource future effort needed integrate iap code complexity relates existing subscription platform infrastructure considered stripedriven outofband invoice processing paypal subscription linked fxa recurly outcome stripedriven outofband invoice processing originally considered slower approach paypal subscription ended approximately engineering effort given additional user experience benefit stripedriven approach recommend implementation path pro con stripedriven outofband invoice processing stripe default subscription billing automatically payment source file stripe stripe also provides subscription collectionmethod sendinvoice model stripe track subscription generate invoice paid outofband allows stripe accurate record charge invoice subscription invoice considered paid fxa paypal feature called reference transaction allow fxa get customer authorization charge paypal account authorization allows later payment charged paypal account track reference stripe metadata customer mark subscription sendinvoice fxa implement additional logic listen invoice creation webhooks switch autoadvance subscription metadata indicating paid via paypal reference check invoice amount charge run paypal charge via paypal api invoice updated reflect whether paid successfully pro stripe continues serve accurate source truth regarding customer subscription logic determines active subscription entitlement stripe asis multiple product support work asis support representative see accurate payment history stripe customer paying via paypal support credit paypal customer credit card customer extend similar manner track correlating iap user handle switching payment method credit card paypal reference vice versa paypal authorization retained additional product purchasedcredited without requiring user return paypal flow cancelresubscribe subscription expires work asis con additional metadata stripe start pushing closer metadata limit object recreate stripe automatic advancement collection logic run paypal transaction ensure work correctly check prevent doublecharging retries transaction success verification still could end storing paypal reference separate table ensure track prior paypal billing could easily support multiple payment method back end would add complexity subscription management flow front end paypal subscription linkedtracked fxa approach would create productsplans paypal link back stripe equivalent updating stripe metadata productsplans fxa would also gain additional database table map paypal subscription account logic fxa look user subscription would updated check paypal linking table determine active subscription paypal would handle running charge recurring basis per paypal plan setup fxa would periodically check subscription via paypal api ensure theyre still actively paid paypal fairly lenient handling whether payment occurred schedule want pro paypal responsible charging customer managing subscription lifecycle extend similar manner track correlating iap user con logic determines active subscription entitlement additional logicabstractions query database table map active paypal subscription stripe subscription ability easily cancelresubscribe management page lost canceled paypal billing agreement cannot restored reduce complexity anyone paying via paypal would locked paypal later subscription user paying via stripe would presented paypal payment could frustrate user want switch theyd cancel wait till subscription expires subscribe paypal stripe subscription feature cant crediting user month coupon consolidating multiple plan single subscription aligned billing every additional subscription requires full paypal authorization flow paypal occasionally miss delivery webhooks requires build script periodically verify paypal subscription still active latest transaction processed successfully paypal subscription suspended resumed doesnt map equivalent stripe subscription would require custom handling code logic entitlement recurly recurly hosted solution similar stripe mange subscription unlike stripe process transaction leaving payment processor recurly multiple payment processor stripe paypal would handle running transaction similar manner stripedriven approach except theyve already built pro implement paypal logic recurly handle ongoing future maintenance lower stripepaypaletc change time maintained recurly con recurly list actual cost integration estimated around additional total revenue addition payment processing cost substantial work involved migrate user switch stripe integration logic work recurly apis would completely custom solution still iap
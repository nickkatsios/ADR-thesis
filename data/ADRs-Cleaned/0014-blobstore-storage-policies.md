add storage policy blobstore proposed adoption backed performance test well data repartition cassandra object storage shift james expose simple blobstore api storing raw data however raw data often vary size access pattern example mailbox message header expected small frequently accessed mailbox message body expected size ranging small big unfrequently accessed deletedmessagevault message header expected small unfrequently accessed also capability various implementation blobstore different strength cassandrablobstore efficient small blob offer low latency however known expensive big blob cassandra storage expensive object storage blob store good storing big blob induces higher latency cassandra small blob cost gain isnt worth thus significant performance cost ratio refinement could unlocked right blob store right blob introduce storagepolicies level blobstore api proposed policy include sizebasedstoragepolicy blob underlying storage medium chosen depending size lowcoststoragepolicy blob expected saved low cost storage access expected unfrequent performantstoragepolicy blob expected saved performant storage access expected frequent hybridblobstore replace current unionblobstore allow choose cassandra objectstorage implementation depending policy deletedmessagevault blobexport mailrepository rely lowcoststoragepolicy blobstore user rely sizebasedstoragepolicy performance test run order evaluate improvement consequence expect small frequently accessed blob located cassandra allowing objectstorage mainly large costly blob case improvement code added codebase proposal get rejected expect data stored cassandra quantify adoption read reading two blobstores migration required composite blobstore top existing implementation however benefit performance enhancement newly stored blob reference jira
authentication migration keycloak deprecated nolongerrelevant deciders goern technical story httpsgithubcomorgsoperatefirstprojects problem statement operate first cloud environment span multiple data center multiple region central authentication system help identifying user system operator without maintaining multiple isolated user registry adr build upon extends commonauthforapplications authenticationforplatform decides technical aspect implementation driver previous adrs decided input condition github ultimate identity provider application running within platform able leverage common authentication client adr answer achieve following fully declarative new cluster integrated sso via provide seamless migration transition user centralized single sso instance considered authenticate openshift github directly provide app authentication via keycloak authenticate openshift github directly provide app authentication via dex openshift authenticate openshift apps keycloak authenticate openshift apps keycloak migrate openshift group keycloak group authenticate openshift keycloak provide app authentication via dex openshift outcome chosen authenticate openshift keycloak provide app authentication via dex openshift fully declarative solution fully supported available today adr revisited keycloak becomes capable importingproviding openshift group data keycloak rfe authenticate openshift apps keycloak preferred authenticating openshift cluster cluster connect centralized keycloak instance centralized keycloak coupled github application facilitates authentication authenticating application within operate first doesnt change remains described adr positive consequence adding new cluster sso configuration happens via git adding new application sso configuration happens via git single centralized keycloak instance available cluster negative consequence per cluster dex deployment allow application authentication due fact keycloack cant import openshift group pro con authenticate openshift github directly provide app authentication via keycloak good authentication decentralized cluster handle authentication separately bad authentication decentralized there single registry operate first user bad since cluster requires manual change github application auth provider bad keycloak able import openshift user group surface oicd claim blocked keycloak rfe authenticate openshift github directly provide app authentication via dex openshift good authentication decentralized cluster handle authentication separately bad authentication decentralized there single registry operate first user bad since cluster requires manual change github application auth provider bad maintain per cluster dex deployment provide application identity openshift authenticate openshift apps keycloak good onboarding new cluster fully declarative good authentication centralized one system ultimate source truth account bad two separate keycloak realm required bad keycloak able import openshift user group surface oicd claim blocked keycloak rfe authenticate openshift apps keycloak migrate openshift group keycloak group good onboarding new cluster fully declarative good authentication centralized one system ultimate source truth account bad two separate keycloak realm required bad keycloak operator doesnt provide declarative management user group authenticate openshift keycloak provide app authentication via dex openshift good onboarding new cluster fully declarative good authentication centralized one system ultimate source truth account bad maintain per cluster dex deployment provide application identity openshift link keycloak rfe
adr store response query string background time writing smart answer two method storing user response appending url path saving user session cookie original method appending response url path example govukflownameyresponseresponseresponse generates array response smart answer resolve question outcome displayed next replaying flow assuming response order question previously displayed explicit information stored url question response relates method storing user response session cooky functionality added added findcoronavirussupport flow flow handled sensitive information needed hidden url session also required support leave site component allowed user quick erase response prevent recovered user response stored hash keyed name node question provided response example ruby session flowname question response question response question response smart answer originally built session thought unnecessary user data expected handled wasnt sensitive reasoning appending url path instead query string unclear problem several drawback url path store user response information within url indicate page user requesting make impossible understand page displayed user without knowing internal logic particular flow problematic understanding user analytics request log debugging current user analytics determine page displayed user content within page heading text fragile content change cumbersome update analytics logic change content request log easy way calculate metric per page multiple request url may resolve page difficult generate url prepopulate response example flownameyresponseresponseprepopulatedresponse unless response first question flow requires prefilling response former question unlikely known change flow cause issue previously cached page url deterministic particular page change flow alter page displayed example given flow display outcome page path xyz question removed flow show outcome page path cache would continue return old question user would redirected xyz longer valid path could result error also cached lose existing response user visit earlier question view previous earlier question response removed url mean impossible change previous response without reanswering subsequent question particular burden user flow long complete requires complex input information isnt memorised additionally implementation storing user response session required creation seperate controller sessionanswerscontroller separate logic node resolution updating flow add extra burden maintaining improving codebase new code may accommodate response storage method proposal add ability store user response url query string become default method storing response replace url path ability store response session cookie remain require flow explicitly enable within configuration current behaviour url structure new structure url flownameflownodeidnodeiduserresponse start page route remain node nodeid represent preexisting flow definition ruby checkboxquestion nodeid onresponse response node unique node individual flow example route query parameter checkukvisay checkukvisaflownationality checkukvisayaustralia checkukvisaflowpurposenationalityaustralia checkukvisayaustraliatourism checkukvisaflowresultpurposetourismnationalityaustralia rename prefix flow whilst necessary storing response query string good oppurtunity rename prefix slug slug introduced part work implement session based flow thought stand session slug changed flow route query string session based flow prefix slug required due constraint publishing api prevent multiple content item start page smart answer base path remove invalid query parameter user navigate throught flow persisted query parameter valid question flow extra query parameter dont match question stripped example user make request checkukvisaflownationalityrandomblah extra query parameter randomblah continue next question smart answer redirects following url checkukvisaflowpurposenationalityaustralia extra parameter removed however query parameter valid question would persist example checkukvisaflownationalitylengthofstaymonths checkukvisaflowpurposenationalityaustralialengthofstaymonths suggested step implementation implement change could leverage existing code controller node resolution flow update written storing response session underlying data structure storing response hash keyed node name additional logic required retrieve update parameter query string instead session rename route prefix flow add ability support flow prefixed route session based flow update start page session based flow flow prefix route add redirects existing flow route start page rename sessionanswerscontroller flowcontroller handle flow support storing response query string migrate existing flow change usesession configuration flow definition specify different response store type responsestore session register prefix route flow flow url path store response note point flow still store reponses url path start page link existing route add functionality store response query string add ability specify config query string response store responsestore querystring migrate existing flow incrementally query string update start page link flow prefixed route existing link prefixed route continue work store response url path make query string default response store new flow replace prefix route existing flow route registered redirects start page remove deprecated code storing response url path remove redirects route unused consequence caching effectiveness could reduced due different ordering query parameter example flownameflowresultsqrqr flownameflowresultsqrqr would render page however hit origin somewhat mitigated sorting parameter generating url smart answer user ordering smart answer response longer url well encode node name question url given length limit url character varies browser cdn provider search engine etc average node name response character store around response url query string enough existing flow largest accomodate around response
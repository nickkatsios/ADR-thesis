packageslockjson file toplevel project want minimize amount effort required stay microsoft net nuget package update floating version number leaf package packagelockjson file top food chain project azure function host web apps console apps test project ensure repeatable build would like endjinrecommendedpractices nuget package make happen default much possible unfortunately nuget package dont get extend relevant part build process best check right property set generate advisory diagnostics havent endjin githubs dependabot help keep package reference caused problem leaf project corvus dont monorepowe separate repository distinct area functionality initially enabled dependabot time microsoft published new patch release net would buried vast number dependabot notification dependabots lack support aggregating multiple change single made matter worse effect net release would manual update every project across estate case meaningless busy work microsofts policy giving majority system microsoftextensions nuget package version number net ship microsoft release version microsoftextensionsdependencyinjectionabstractions even absolutely code package changed patch release particular component generally extremely high level compatibility often thing change patch release version number thanks policy releasing new version component every time net updated even genuine change microsoft high standard compatibility change upshot microsoftauthored component versioning regime rarely reason latest patch version wanted avoid update package every week bump version number reference kind package moved floating version number packagereference element csproj file version string form youre familiar nuget package string look little odd combine two syntax first range syntax mean version inclusive demand least version would also happy would accept make upper bound exclusive would accept version would reject anything higher omit higher value mean youre prepared work higher version number requires least version prepared work literally version number higher version would fine thats version range denotes floating version number indicates version starting acceptable package involved specific requirement highest available patch highest version starting unless component involved application demanding lower version combination version string mean ill work version package starting nothing else project express preference ill select highest available patch version effect application consumes corvus package pick transitive reference required microsoftextensions system package referenced corvus package transitive reference automatically pick latest available patch upshot dont update corvus package time new net version ship floating version number mean application corvus automatically going acquire latest net package unless deliberately selects older version remove problem get version update treadmill ten project several time month introduces new problem application consuming package get different transitive dependency time build application latest version net youll get reference build exact version several month later net moved onto youll building bad mean exact commit repo build different result time fortunately there mechanism deal set restorepackageswithlockfile build property true build tool automatically emit packageslockjson file describing version dependency determined particular moment time check source control ensure repeatable build take additional step building build server set restorelockedmode build property true ensures restore step executes nuget look new version anything instead restores whatever packageslockjson file say running build making property conditionalwe set restorepackageswithlockfile continuousintegrationbuild true way developer open solution visual studio nuget automatically scan new patch release component referenced floating version update packageslockjson file find upshot opening project work automatically update floating reference automated build build whatever current point time committed code project packageslockjson file might call top food chain projectsessentially anything get run directly example azure function host project test project project build command line tool application build library component packageslockjson file allow floating version reference flow transitively defines reference microsoft component lockstepwithnet versioning regime also floating reference always ultimately running application test project determines exactly nuget package resolved place want lock file hoped endjinrecommendedpractices nuget package automate setting required generate packageslockjson needed unfortunately there problem running nuget package restore net sdk excludes msbuild prop target file contributed nuget package there good reason result step stable nuget package able influence nuget package restore process might given initial condition repo checked build never run entirely possible none nuget package project downloaded onto machine yet might package cache might stage cant effect restore process theyre present yet build system run package restore process fetch downloaded allowed impact restore process might mean restoring package second time might produce different result restoring first time avoid net sdk set excluderestorepackageimports build variable true running package restores prevents normal import prop target file nuget package unfortunately generation packageslockjson file take place part phase package import excluded reasonable design mean impossible fully automate setting property extension build system supplied nuget package way could would endjinrecommendedpractices add another file main source tree much editorconfig today tell people import instead current import via endjinprojectpropspath build variable doesnt work nuget restore phase endjinprojectpropspath doesnt get set phase thanks excluderestorepackageimports however emitted file problem part consuming project source tree cant stop people editing isnt good way modify later version endjinrecommendedpractices make change reason starting endjinrecommendedpractices top food chain project detect whether restorepackageswithlockfile build variable set true issue advisory diagnostic instructing developer add suitable propertygroup project running build continuousintegrationbuild true perform similar check set restorelockedmode also set true identify project top food chain either following condition met outputtype build variable exe winexe outputtype build variable library azurefunctionsversion nonempty value project top food chain built way picked automatic detection set endjinautopackageslock property true declare sort project although enable checksthe project still add necessary setting enable lock file handling conversely project endjinrecommendedpractices match criterion want package lock file reason feature disabled setting endjindisableautopackageslock build property true consequence endjinrecommendedpractices verify application consuming component floating version reference corvus suitable setting csproj dont build diagnostic explains exactly modify project file developer still make manual edits csproj comply unavoidable way net sdk excludes contribution build process nuget package package restore phase even workaround emit file repo would still require user make edit csproj problem
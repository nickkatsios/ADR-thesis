deployment code base split server client side code deciders gabriel birke abban dunne corinna hillebrand conny kawohl technical story httpsphabricatorwikimediaorgt problem statement fundraising app split two repository see adr deploy two specific branch repository test production mechanism process define two branch deployed together driver speed currently deployment playbook build asset frontend branch scratch could prebuilt asset deployment would faster developer experience app wont work expected represent required test state deploy wrong branch together solution prevent sync scenario good possible time requiring many manual step developer traceability able check branch deployment considered release clientside code npm package npm gitlab git submodules decide deploy time source truth outcome chosen decide deploy time least amount initial effort least amount ongoing effort clientside change accept additional risk making mistake deploy time make many mistake well develop check mitigate pro con npm package release fundraisingappfrontend npm package add dependency fundraisingapp postinstallpostupdate script copy asset webskinslaika deploy clientside branch would create branch fundraisingapp point clientside branch must prevent branch merged main branch fundraisingapp deploy new release clientside code would would merge branch fundraisingappfrontend create new release create branch pull request fundraisingapp update release following step could automated build asset branch separate commit fail asset built creating branch serverside code updating branch serverside code merge clientside code either update deleting feature branch creating new pull request new release good deployment serverside development prebuilt asset good clear link designation semantic version branch name two repository bad effort build automation high bad automation lot potential developer mistake repositoriesdeploys getting sync bad npm install install dependency vue vuex etc unneccessarily interested compiled asset bad effort adapt menubased deployment script branch instead pull request deploying test git submodules fundraisingappfrontend submodule fundraisingapp makefile fundraisingapp build asset needed workflow creating branch deploying test would one npm new fundraisingapp branch would contain branch designation gitmodules file workflow creating new production release would merge branch fundraisingappfrontend main creating new pull request fundraisingapp update submodule commit good dont change much build deploy setup good risk deploying stale version bad cant differentiate test production release clear version number commit bad pull development dependency fundraisingappfrontend bad build asset deployment deployment bad submodules could make automation branch creation update complicated decide deploy time prebuild asset piepline fundraisingfrontendapp branch prebuilt asset add another variable frontenddeploybranch deployment playbook downloads prebuilt asset variable deploying deploy playbook write file server look version andor commit branch name repository determine version server good dont much effort automating synchronized release good speed deployment npm install npm build step outsourced pipeline fundraisingappfrontend bad cant check change repository compatible review time deployed test
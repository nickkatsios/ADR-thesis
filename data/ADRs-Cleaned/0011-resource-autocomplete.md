resource auto completion user often dont time back resource theyve ingested check see okay initial ingest tend immediately mark resource complete ingest time unfortunately result lot churn preservation infrastructure every file get added ingest force represervation parent metadata prevent also make sure resource completed useful patron want add new state automatically mark resource complete file attached derivative generated autocompletion could handled one two way either via cron job run regular interval utilizing sidekiq batch cron job would immediate would easy maintain reason batch would allow track lifecycle object job would enable earlyaspossible completion would unable handle adding file postbulkingest preautocomplete would require avoid deleting job sidekiq batch would never succeed would harder test would much harder reason edge case normally wed worry race condition cron job resource optimistic locking enabled two crons run one another one would win appropriately second would error could send error honeybadger track problem auto completer cron job automatically complete resource completewhenprocessed member file set processed consequence well unable tell resource never possibly complete wont tracking actual job involved may add kind job tracking future
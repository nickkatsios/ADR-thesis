adr modelling field node content guardian element currently exist blocklevel element within document manage arbitrary amount state range relatively simple pullquote one nonrich text field supporting property complex image many rich text field communication outside code grid integration etc element responsible managing state update parent prosemirror instance change occur moment element model state field within attribute prosemirror node attribute contain arbitrary data theyre flat property node update property replacing parent object wholesale work fine case single editor becomes problematic collaborative editing introduced replace node property wholesale edits made element collaborative lastwritewins addition wont able see cursor position whilst user editing element wont able see decoration parent node might want add like noting example typerighter annotation enable thing well model element property way closely match document structure treating example rich text field document node rather flat attribute leave thing decide lastwritewins lack typerighter element good enough dont extra work model rich text field contiguous child node rendered contentdom model element attribute require texteditor semantics child node within prosemirrorschema dynamically generate node type attribute wed like manage append document schema prosemirror provides api element contentdom take responsibility rendering node child handling update content issue approach limit displaying rte field next could present issue various element type different layout requirement possible restrict mark apply elementspecific node via nodespec model text field child node nested editor previous could model element texteditor field child node within prosemirrorschema pas separate nodeviews rte field could handled prosemirror instance schema child instance would appropriate subset parent instance parent child prosemirror instance would kept sync transaction document decoration mapped passed correctly event correctly passed parent instance undo redo complex single instance prosemirror responsible modeling rendering approach recommended prosemirror team similar example footnote implementation provide documentation approach assumes modelling nontext field collection attribute parent node mean wed still lastwritewins semantics entire collection nontext field element two unrelated field within element changed concurrently one change persisted may confusing user lead lost work unexpected behaviour model every property child node field modeled within scheme flat attribute rendered separate nodeviews would allow facilitate collaborative editing element field rich text eliminating problem lastwritewins nontext field care would taken ensure content adding node corresponded data type example modelling boolean value array look like within node may best store value attribute node rather modelling text wed like pursue choose depends impactful think lastwritewins nontext attribute complexity implementation requires likely least confusing behaviour user consequence well engineering time implement complex solution take care keep complexity consumer api low possible provide additional manage schema setting
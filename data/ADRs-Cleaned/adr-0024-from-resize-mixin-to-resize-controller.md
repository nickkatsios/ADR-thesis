kind architecture record adr moving resizeobserver mixin reactive controller florian sander cannot rely viewport component able adapt style rendered html based much space available since work component cannot rely viewport size medium query like one typically viewport shrink mean component shrink well depends whether component spread across whole viewport part rely javascript resizeobserver mixin match specific observer implemented mixin resizeobserver mixin two purpose detect resizes compute current width component needed add remove attribute based given breakpoints style component based width wltbreakpoint attribute width component lower breakpoint wgtebreakpoint attribute equal breakpoint higher example mixin class mycomponent extends withresizeobserverlitelement constructor thisbreakpoints width onresize width thiswidth width static get style return hostwlt color blue hostwgte color red lit reactive controller lit reactive controller introduced decided move mixin reactive controller considered solution transforming mixin reactive controller first transform mixin reactive controller continue api retrieve width component add remove attribute work component expose following public onresize method width parameter method called observer everytime detects resize public breakpoints property containing array breakpoints property read observer present observer add remove wltbreakpoint wgtebreakpoint attribute breakpoint example controller class mycomponent extends litelement constructor new resizecontrollerthis thisbreakpoints width onresize width thiswidth width static get style return hostwlt color blue hostwgte color red lit lab resizecontroller keeping api second ditch mixin import lib lab resizecontroller controller accepts callback called everytime resize happens callback set attribute component get width exposing onresize method breakpoints property component mixin example controller class mycomponent extends litelement constructor new resizecontrollerthis callback entry stuff set remove attribute based width component thisbreakpoints width onresize width thiswidth width static get style return hostwlt color blue hostwgte color red lit lab resizecontroller relying api third ditch mixin well api rely resizecontroller api resizecontroller api work like provide callback called everytime resize happens callback return value value stored within value property controller instance may retrieve value controller instance within update lifecycle render possible controller call requestupdate trigger update lifecycle component mean handle everything within lifecycle component instead exposing public method public property instance retrieve width component render method call function set appropriate attribute corresponding width willupdate method instead example controller class mycomponent extends litelement constructor thisresizecontroller new resizecontrollerthis callback entry stuff return currentwidth component render const width thisresizecontrollervalue setstylingattributesthis width width return html static get style return hostwlt color blue hostwgte color red solution chose mix reactive controller api relies lit update lifecycle controller also accepts callback handle action outside lit lifecycle make sure function always executed resize happens resize happens instance callback trigger leaflet invalidatesize method everytime resize happens example controller make sure usethisupdatecomplete want callback executed lit lifecycle const mycallback thisupdatecompletethen class mycomponent extends litelement constructor thisresizecontroller new resizecontrollerthis widthbreakpoints callback mycallback render resizecontroller expose public width property latest observed width component const width thisresizecontroller return html static get style return hostwlt color blue hostwgte color red advantage thought lit lab implementation really good wanted best world reactive controller tailored specific reactive controller handle addition removal attribute based breakpoints straightforward api want pas breakpoints directly controller want controller trigger update lifecycle think really great idea lit lab limit moving away mixin mean code work lit element mixin could native element reactive controller cannot something accept actually work lit element needed solution usecase lit lab implementation allowed observe several element controller something dont whats next container query container query length unit support good enough breakpoints feature controller obsolete happens resizecontroller one job trigger update lifecycle everytime component resized resizeobserverentrycontentboxsize support good enough return entry rely instead elementgetboundingclientrect resource resize observer mdn lit reactive controller lit lab observer resizecontroller heavily inspired implementation container query mdn
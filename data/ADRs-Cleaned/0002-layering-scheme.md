layering scheme proposed framework designed provide portability embedded system application also want maximize reuse software across embedded product minimize bringup time increase confidence software order accomplish must think isolate various platformspecific force change occur within embedded product processor layoutconnections given board memory availability component included board isolating various force change platform dependence improve possibility reuse embedded platform architecture structured three layer virtual processor layer base virtual platform layer software layer virtual processor layer standalone layer manages chip hal virtual platform layer contains platformspecific implementation runtime rtos boardplatforms software layer contains standalone software built virtual platform abstraction virtual processor layer virtual processor layer provides abstraction specific processor comprises chipspecific startup code hal driver virtual platform abstraction virtual platform abstract board processor combination virtual processor layer cannot call layer must operate standalone virtual processor layer responsible managing chip hardware device keeping happy tbd language usage allowed chip initialization tbd utility allowed initialization staticfunction staticqueue interrupt queue serial dispatch queue tbd identify construct virtual platform layer virtual platform layer contains platformdependent abstraction platform mediates processor driver software layer rtos runtime setup virtual platform layer also contains device driver definition virtual platform layer construct reference call funtions virtual processor virtual platform layer provides abstraction overall platform board chip combination platform creates generic device driver software application virtual platform layer make call software layer interaction needed userspecific platform function defined software layer call function platform layer callback necessary software layer software layer contains software abstraction subsystem dependent specific underlying software client side layer client application logic client library integrated embedded artistry reusable subsystem utility also included software layer software layer allowed talk software component well virtual platform layer software layer talk directly virtual processor layer introduces coupling software processor consequence layering scheme followed maintain flexible reusable design chip code reused differnet platform software written set virtual platform abstraction long abstraction maintained supported alternative platform software ported software generic driver interface tied specific part vendor software platform construct portable across architecture careful design consideration given implementation virtual processor abstraction create proper generic interface covering variety chip family processor implementation keep hal encapsulated sane away layering enforced else software devolve tightly coupled ball mud allowing software layer processor layer software regains dependency specific processor dont want add unnecessary overhead consider utilize inline call constexpr rather adding additional indirection every function
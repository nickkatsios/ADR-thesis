adr external data service would like achieve high availability chef automate support postgresql elasticsearch would require considerable time effort likely difficult tailor individual customer rather focus building support backend data service add much value product would instead prefer add support external data source allows focus building value product allow customer existing cloudbased data service inhouse cluster requirement initial deployment chef automate external data store require minimal user configuration migration singlenode install external data store require minimal downtime operator intervention backup restore operation must work external data store external elasticsearch deployment deployment external elasticsearch remain existing deployment additional configuration initial configuration required domain service access elasticsearch continue binding automateelasticsearch package habitat configuration file rendered include address port support external elasticsearch keep existing logic however external mode configured automateelasticsearch package start instance elasticsearch itll create instance nginx listens address port proxy upstream external elasticsearch node approach property desirable existing domain application care elasticsearch cluster local external many node one requires special signing security external cluster requires xpack security configuration theyve provided along nginx transparently perform mutual xpack cert key external cluster aws elasticsearch service nginx proxy transparently sign outgoing request aws access key secret key provided resolved migration two way user might want migrate data single instance deployment chef automate external cluster case user control cluster configuration join automateelasticsearch service external cluster configure automateelasticsearch node shard soon shard relocation completed user could stop chef automate installation remove automateelasticsearch service cluster patch chef automate config external cluster configuration cluster awss elasticsearch service elastic elastic cloud service user would likely configure chef automate cluster backup create full backup create snapshot repository desired bucket create new elasticsearch domain cloud provider service configure elasticsearch domain bucket chef automate cluster snapshot api elasticsearch domain restore latest snapshot chef automate snapshot repository configure chef automate install aws elasticsearch domain backup backup work transparently user provides backup repository type essidecarservice creating snapshot repository theyre aws elasticsearch service well also rolearn repository plugin assume take snapshot restore restoration work though might add flag support rolearn external postgresql deployment deployment external postgresql remain existing deployment additional configuration initial configuration required domain service would accessed similar manner elasticsearch bind information automatepostgresql service external postgresql configured service could still bind automatepostgresql service instead actually running postgresql would postgresql proxy external postgresql fqdns would configure proxy handle postgresql authnauthz transparently require mtls proxy upstream client note havent yet determined software wed like postgresql proxy weve identified well investigate implementation planning migration migration existing chef automate install external postgresql cluster achieved several way depending target cluster user could create backup manually restore database sql file contained backup repository could build utility restores backup database remote postgresql cluster wed user create backup restore remote cluster part migration possible user could even configure remote cluster replicate automatepostgresql service user could wait replication catch stop chef automate promote read replica cluster primary update configuration external postgresql backup support onpremises postgresql cluster make sense keep default backup strategy consistent current backup implementation involves taking dump database storing sql file backup repository rdsaurora support creating snapshot could eventually integrate feature customer restore restoration database dump would work mostly wed restore database sql remote database integrated rdsaurora could leverage snapshot restoration ability rds support restoring exact point time backup exact point time might able utilize feature decided build integration proposed consequence
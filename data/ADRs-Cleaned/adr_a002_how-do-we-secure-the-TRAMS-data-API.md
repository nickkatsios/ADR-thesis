info httpthinkrelevancecomblogdocumentingarchitecturedecisions short title ensure api access secure closed creating replacement dynamic interface data include sensitive data include personally identifiable information dynamic api requires authentication set credential configured within relevant dynamic environment api must open public must provide data without authentication api hosted azure infrastructure assumed publicly discoverable service provide mean authenticate request azure api management active directory manually provision check user identity block traffic api whitelist consideration depending chosen manually provision way user authenticate request simplest mean possible provides necessary security rationale weve chosen create simple api key system request api required provide valid api key request rejected manually provision check key load provisioned key config start lookup user key request checked presence header keyvalue pair key xapikey provided value must valid configured key request rejected forbidden code believe api gateway consumer authenticate via azure active directoryapi management present token valid require development investment simple set provisioned key secure performant importantly controlled team owns api designed api key check check inmemory lookup following apply key check made performantly every request provision delete key second via configuration change configuration time require redeployment take effect offer seamless deployment configuration value never committed source code continue work open testing integration easily done automated way test configuration provision unique key test environment approach also implemented quickly api functionality implemented low resistance approach allowed deploy working test environment rapidly confidence deployment would ever expose data unsecured future consider migrating provided service integrate existing active directory system order allow finegrain control permission allow support larger number unique consumer approach work expected scale could become difficult maintain larger expected number compared low overhead implementing actual header key check would significant investment small gain dependency confirmation affect authority operate team know make configuration change provision delete key user required request access api environment await key provisioning key generated shared configured secure way impact user lead time integration cannot selfservice generate key conversely keyaccount provisioning reliant active directory administration lead time expected one day approach secure key treated establish appropriate process communication channel via live service support report accidental compromise key key revoked replaced matter minute contributor christopher gunn steve leighton lewis dale daniel burnley vivian robert supporting info optional
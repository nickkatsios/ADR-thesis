authentication oidc author hukka term jws json web signature rfc standard format sign json data consists three part jws protected header specifies message jws signing algorithm payload hmac first two part human readable header example typjwt alghs payload valid jwt example issjoe exp httpexamplecomisroottrue baseurl encoded concatenated corresponding signature jwk ktyoct kaymsysppbydfgzldumjqzkobwvmkoqqestjqlrtqsgzh aktmnyjipshcguutwjazzrzcaow included jws message could linked kid parameter final message eyjexaioijkvqilakicjhbgcioijiuzinij eyjpcmioijqbuilakicjlehaiojezmdamtkzodasdqogimhdhalylegft cgxllmnvbspcybijpcnvlfq dbjftjezcvpmbkuhbujuprwwgfwfoejxk jwt json web token rfc json based baseurl encoded format transferring claim data transferred unsecured jws jwe payload note oidc allows signed jwt without encryption oauth rfc authorization protocol based browser redirects json supersedes oauth oidc openid connect authentication protocol top oauth signed jwt supersedes openid oidc client system requires authentication service rem client actual person user service authentication identity provider saml security assertion markup language xml based protocol authentication authorization shibboleth single signon system based saml elixir level life science consortium elixir aai proxy autehntication authorisation infrastructure elixir authentication system aggregate different way user log work saml oidc identity provider system like rem background rem hard requirement let university user log way haka shibboleth federation different university pretty much required apache http server tomcat since robust implementation shibboleth addition new requirement let people sign rem instance credential like google facebook auth offer authentication saml oidc elixir also operates authentication proxy aai proxy act gateway several authentication system including haka many social medium identity handle single user multiple different identity different identity system different identity aggregated one elixir also query rem given entitlement single unified identity aai proxy also offer authentication via saml oidc oidc work openid connect several different flow different case vary complexity security implicit flow client cannot hold secret web apps without backend component distributed fully end user made secure careful cors authorization code flow extra communication directly service backend identity provider one rem flow user press login button rem rem reply redirect identity provider url rem give idp extra data query parameter redirect kind information want user idp send user back authentication user browser load idp web site accepts authentication request possibly actual authentication point idp reply redirect back rem sending authorization code request parameter rem get code user request connects directly idp code shared secret get user profile directly idp jwt rem verifies jwt signature public key provided idp rem set session cookie user associate user profile session user see random string cookie user profile stored memory backend redirects user front page support oidc cooky lax samesite protection vast majority identity provider support saml oidc variant oauth sometimes saml offered enterprise oidc free also oidc newer seems simpler implement therefore transit supporting oidc authorization code flow see httpstoolsietforghtmldraftietfoauthsecuritytopicssection detail implicit flow considered dangerous also remove dependency tomcat make deployment simpler future could example built jetty deploy run jarfiles requirement target system working jre installed problem cooky redirections oidc authentication consists pretty long string redirects without user input protect cross site attack browser least firefox chrome drop cooky samesite property set strict default ringdefaults manifest browser ignoring cookie set step requesting front page without cooky rem assigning new completely clean session user effectively logging user one possible solution would send user front page instead special oidc callback url inject additional logic front page handler see user middle oidc authentication make logic modular also prevents ever redirecting based user example page reauthenticate expiry second possibility would handle last redirect via javascript hasnt tested would make logic modular front end special case third possibility simply redirecting forcing user press continue button manually breaking redirect chain fourth could set cookie set samesite lax allows cross site get request change visible url iframes image etc later switch cookie strict one last chosen samesitelax time careful get operation mutate data library seem suitable clojure library rem could though multiple claim oidc unfortunately seem pocs demo code commits doc old handle implicit flow even advanced much handle none advanced case userinfo endpoint public key retrieval single sign based outdated java library build framework duct integrant friend openid list several java library official certification related identidy provider side protocol best maintained java library client seems auths even though security well known tested implementation preferred remaining implementation work top offered java library complex therefore rem shall solution based auth java library security consideration http get operation must mutable operation future strict cookie policy protected future lax policy allow cross site get request done session user already rem cors protect data leak cross site get request future consideration single sign base case signing user wanting end rem session switch identity rem trivial logout button kill rem session cookie ending rem session optionally sending sign request identity provider complex case user wish sign service active session single sign identity case identity provider send request callback client active session idp support example auth single sign saml currently unknown aai requires even support expiration logging rem full control session keep session alive arbitarily long duration therefore crucial autosaving functionality discussed however might want consider least renewing token idp case account disabled information changed often done automatically background doesnt degrade user experience automatic logging user already logged idp given permission rem could automatically log user without requiring user initiate login process done silently background failure visible user aai oidc data map haka data openid connect scope way client request certain block information user idp inform user data released user approve disapprove scope elixir aai corresponding haka shibboleth attribute openid sub edupersonuniqueid profile preferredusername edupersonprincipalname name displayname email email bonafidestatus bona fide research groupnames groupnames edupersonentitlement forwardedscopedaffiliations forwardedscopedaffiliations
adr run action shell runactions run script platform specific shell bash pipefail nonwindows cmdexe window shell override allow different flag completely different shellsinterpreters small example yml job bashjob action run echo hello shell bash pythonjob action run printhello shell python shell keyword shell shell either builtins explicitly supported keywords useful support least cmd powershell window cmd mycmdscript powershell mypsscript valid way many linuxcrossplatform interpreter bash myscript python myscript tool potentially others also require correct file extension run must run particular way get exit code consistently must first class knowledge provide default template keywords follows cmd default comspec eon voff call script name automatically appended cmd substituted note equivalent default window behavior shell given pwsh default pwsh command script automatically appended powershell default powershell command script automatically appended bash bash noprofile norc pipefail default behavior nonwindows shell given attempt first default behavior nonwindows shell given bash see located path python python note exact command ran may vary machine provide default argument command format listed shell behavior expected hosted machine private runner may vary example command may actually link bindash binbash template string command moreoptions file name temporary script templated give user control location relative script path first whitespacedelimited word string interpreted command python arg arg similar passing args needed shell require filename various reason note simply provides default executed mechanism temporary script file generated path file templated string first word formatted string assumed command attempt locate full path fully qualified path command plus remaining argument executed shell bash expands binbash noprofile norc pipefail runnerlayoutworktempfdfbbdeaccdsh private runner time list wellknown shell cmd window hosted powershell window hosted hosted platform pwsh hosted platform bash hosted platform python hosted platform setuppython configure python container container job shell work transparently simply exec command job container passing argument exit code error action preference builtin shell provide default make sense running within action executed runner bashsh failfast behavior set pipefail default bash shell builtins default given nonwindows platform user opt failfast take full control easily providing template string shell bash shlike shell exit exit code last command executed script default behavior thus runner report step failsucceed based exit code powershellpwsh failfast behavior possible pwsh powershell builtins prepend erroractionpreference stop script content append testpath literalpath variablelastexitcode exit lastexitcode powershell script get action reflect script last exit code user always opt builtins providing shell like pwsh file powershell command depending cmd doesnt seem way fully opt failfast behavior writing script check error code respond accordingly cant actually provide behavior default completely user write behavior script cmdexe exit return error code runner errorlevel last program executed internally consistent previous default behavior pwsh cmdexe default keep behavior consequence valid shell depend hosted image maintain tight image compat first class support shell require major version schema change modify cannot remove modify behavior wellknown supported however adding first class support new shell backwards compatible instance add wellknown python nonwellknown would always needed include python
title adr pipeline locking adr pipeline locking concourse pipeline locking mechanism required prevent concurrent deploys concurrent deploys cause problem one deployment may make change break another availability test tell specific change cause app api downtime bosh locking mechanism mean concurrent deploys fail concurrent testing put extra load platform concourse decided implement locking concourse pool resource aws codecommit terraform concourse pool resource chosen concoursenative solution locking created dependency git repository lock pool resource implemented aws codecommit chosen github several reason client library interacting necessary apis much mature aws particular case saved lot work github would required managing user ssh key token aws could existing instance profile concourse github would meant repository containing lock would public terraform required allow pipeline concourse instance profile manage aws codecommit pattern whereby allow creation iam user specific name prefix allow adding user predefined iam group permission said group defined private repository terraform configuration ran manually limit permission concourse instance profile grant user consequence store ssh private key git environment state bucket key created pipeline input terraform configuration generates codecommit repository
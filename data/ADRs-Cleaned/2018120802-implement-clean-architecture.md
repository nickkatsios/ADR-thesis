implement clean architecture project meant playground experiment different technology design solution standardize project structure getting bigger implement principle suggested clean architecture enhanced concept domain driven design plugin architecture domain core domain virtual machine framework defines program executed doesnt specify architecture meaning program interpreted known program sequence data unit data unit kind data smallest possible size set single byte data always represented sequence data unit since work sequence also define concept size number data unit specific data address data inside program address first data unit size address integer generic integral type defined independent runtime environment implementation program ability fetching block data given address size program run processor interpreter whose implementation provided specific architecture selected first define set data unit regarded instruction execute instruction running instruction interpreter return object knowing execution jump terminated execution program processor always return exit architecturedependent termination program must always requested explicitly via dedicated instruction otherwise error raised interpreter must system perform operation ultimately allow program communicate user however implementation system depends actual application processor interpreter running left specified additional domain defined architecture virtual machine support many different architecture assembler compiler also define domain following domain could thus defined smf core virtual machine framework domain sma definition sma architecture domain basm definition basm assembler domain php definition php compiler domain application application layer may define following primary port port allows execute program according configured architecture repl port allows execute program interactively functionality dbg port allows execute program step step debugging functionality asm port allows run assembler assembly code produce executable object code cmp port allows run compiler high level language produce assembly code far secondary port following arcl port allows application load architecture definition port allows application load program asml port allows application load assembly code assembled port allows application load high level code compiled sys port allows application interact underlying operating system adapter primary adapter might defined create command line application web application secondary adapter might defined read data file memory see concrete example plugin architecture want support building different type application composing together set different available plugins example sloth machine cli adsm adlarcl adfpl adossys apvm aparcl appl apsys dsmf dsma others sloth machine assembler cli adasm adfasml apasm apasml dbasm others sloth machine compiler cli adcmp adfcl admasml apcmp apasm apcl apasml dbasm others dphp others sloth machine runner cli adrun adlarcl adfcl admasml admpl adossys apvm apcmp apasm aparcl apcl apasml appl apsys dsmf dsma others dbasm others dphp others sloth machine repl cli adrepl adlarcl admcl admasml admpl adossys aprepl apcmp apasm aparcl apcl apasml appl apsys dsmf dsma others dbasm others dphp others sloth machine debugger cli addbg adlarcl adfcl admasml admpl adossys apdbg apcmp apasm aparcl apcl apasml appl apsys dsmf dsma others dbasm others dphp others sloth machine web web adweb adwarcl adwcl admasml admpl adwsys apvm apcmp apasm aprepl apdbg aparcl apcl apasml appl apsys dsmf dsma others dbasm others dphp others dsmf domain sloth machine framework dsma domain sloth machine architecture dbasm domain basic assembly sloth machine dphp domain php apvm application virtual machine primary port apcmp application compiler primary port apasm application assembler primary port aprepl application repl primary port apdbg application debugger primary port aparcl application architecture loader secondary port appl application program loader secondary port apasml application assembly loader secondary port apcl application code loader secondary port apsys application system secondary port adsm adapter sloth machine primary adapter adcmp adapter compiler primary adapter adrun adapter runner primary adapter adrepl adapter repl primary adapter addbg adapter debugger primary adapter adweb adapter web primary adapter adlarcl adapter local architecture loader secondary adapter adwarcl adapter web architecture loader secondary adapter adfpl adapter file program loader secondary adapter admpl adapter memory program loader secondary adapter adfasml adapter file assembly loader secondary adapter admasml adapter memory assembly loader secondary adapter adfcl adapter file code loader secondary adapter admcl adapter memory code loader secondary adapter adwcl adapter web code loader secondary adapter adossys adapter system secondary adapter adwsys adapter web system secondary adapter example module domain smf data dataunit byte data dataunit size integer address integer program data program programdatadata readdataaddress datasize datadata interpreter data opcode datadata operand datadata exitstatus integer instruction instructionaddress opcode operand getaddress address getopcode opcode getoperands operand shouldjump boolean getjumpaddress dataaddress shouldexit boolean getexitstatus exitstatus interpreter getopcodesize datasize getoperandssizeopcode datasize execinstruction processor program interpreter processor processorinterpreterinterpreter runprogramprogram interpreterexitstatus architecture data interpreter system readdatainteger datasize size datadata writedatainteger datadata data datasize size datasize architecture getinterpretersystem interpreterinterpreter sma smf interpreter smfinterpreterinterpreter interpretersmfarchitecturesystem application runprogram domainsmf applicationarcl applicationpl applicationsys request getarchitecturename string getprogramreference string response getexitstatus domainsmfinterpreterexitstatus presenter presentresponse runprogram runprogramprocessorfactory presenter applicationarclarchitectureloader applicationplprogramloader applicationsyssystem execrequest processorfactory createdomainsmfinterpreterinterpreter domainsmfprocessorprocessor arcl domainsmf architectureloader loadarchitecturename string domainsmfarchitecturearchitecture domainsmf programloader loadprogramreference string domainsmfprogramprogram sys domainsmf system domainsmfarchitecturesystem adapter applicationvm domainsmf runprogram applicationvm domainsmf request applicationvmrunprogramrequest controller controllerapplicationvmrunprogramrunprogram runprogramrequest viewmodel viewmodeldomainsmfinterpreterexitstatus getexitstatus nativeinteger view renderviewmodel exitstatusview view renderviewmodel getexitstatus nativeinteger presenter applicationvmrunprogrampresenter presenterview presentapplicationvmrunprogramresponse larcl applicationarcl localarchitectureloader applicationarclarchitectureloader fpl applicationpl fileprogramloader applicationplprogramloader ossys applicationsys ossystem applicationsyssystem example main implementation module domainsmfprocessor import domainsmfinterpreter import domainsmfprogramprogram import domainsmfinterpreterexitstatus import domainsmfdatasize import domainsmfdataaddress import domainsmfinterpreteropcode import domainsmfinterpreteroperands import domainsmfinterpreterinstruction import domainsmfinterpreterstatus class processor processor interpreter thisinterpreter interpreter runprogram program exitstatus size opcodesize interpretergetopcodesize address address true opcode opcode programreadaddress opcodesize size operandssize interpretergetoperandssizeopcode address operandsaddress address opcodesize operand operand programreadoperandsaddress operandssize instruction instruction new instructionaddress opcode operand interpreterexecinstruction statusshouldexit return statusgetexitstatus address statusshouldjump statusgetjumpaddress operandsaddress operandssize todo handle missing exit module domainsmainterpreter import domainsmfinterpreter import domainsmfinterpreterexitstatus import domainsmfinterpreterstatus import domainsmfdatasize import domainsmfdataaddress import domainsmfinterpreteropcode import domainsmfinterpreterinstruction import domainsmfarchitecture import domainsmainstructionset import domainsmaresult import domainsmajumpresult import domainsmaexitresult import domainsmainstructiondefinition class interpreter interpreterinstructionset instructionset system thisinstructionset instructionset thissystem system getopcodesize size return new integer getoperandssizeopcode opcode size return instructionsetgetinstructiondefinitionopcodegetoperandssize execinstruction instruction address jumpaddress null address exitstatus null instructiondefinition definition instructionsetgetinstructiondefinitioninstructiongetopcode result result definitionexecinstructiongetoperands result instanceof jumpresult jumpaddress resultgetjumpaddress result instanceof exitresult exitstatus resultgetexitstatus return new statusjumpaddress exitstatus module applicationvmrunprogram import applicationvmrunprogramprocessorfactory import applicationvmrunprogram import applicationarcl import applicationpl import applicationsys import applicationvmrunprogram import domainsmfarchitecture import domainsmfinterpreter import domainsmfprocessorprocessor import domainsmfprogramprogram import domainsmfinterpreterexitstatus import applicationvmrunprogramresponse class runprogram runprogram processorfactory processorfactory presenter architectureloader programloader system thisprocessorfactory processorfactory thispresenter presenter thisarchitectureloader architectureloader thisprogramloader programloader thissystem system execrequest request architecture architecture architectureloaderloadrequestgetarchitecturename interpreter interpreter architecturegetinterpreterthissystem processor processor processorfactorycreateinterpreter program program programloaderloadrequestgetprogramreference exitstatus exitstatus processorrunprogram presenterpresentnew responseexitstatus module adapterssmrunprogram import applicationvmrunprogramrunprogram import applicationvmrunprogram class controller controllerrunprogram service thisservice service runprogramrequest request servicerunrequest module adapterssmrunprogram import adapterssmrunprogram import applicationvmrunprogramresponse import adapterssmrunprogramviewmodel class presenter presenter view thisview view presentresponse response viewmodel viewmodel new viewmodelresponsegetexitstatus viewrenderviewmodel proposed consequence module source file created according architectural structure described
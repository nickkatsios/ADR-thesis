service api metadata value author aricart implemented tag client spec release history revision description initial release configurable queue group add version regex info explicit naming problem statement simplify development nats microservices design goal api reduce development complexity similar writing nats subscription simple configuration allow specified metadata allow standardization discovery observability design service configuration relies following name really kind service shared service name name dash underscore version semver string impl validate semver one official semver regex description humanreadable description service optional metadata optional object string holding free form metadata deployed instance implemented consistently metadata stream consumer adr statshandler optional function return unknown data serialized json handler provided endpoint building endpointstats queuegroup override default queue group service created function called addservice passed function return objectstruct represents service minimum service expected offer functionsmethods allow stoperror function allows user code stop service optionally function allow optional error stop always drain service subscription reset reset tracked metric info return serviceinfo stats return stats service callback handler promise framework notify service stopped note independent nats connection possible run multiple service single connection addendpointname handler configure new endpoint service see adding group endpoint addgroupname set endpoint group addgroup see adding group endpoint startup service assigned unique distinguish different instance service allow specific instance service addressed discovery specified name automatically generated service automatically create subscription handle discovery monitoring request subject discovery request prefixed srv note prefix overridable much way order enable targetting tool work across account prefix honor whatever case specified initial verb supported service include ping stats info verb becomes possible build service subject hierarchy like srvpingstatsinfo ping retrieves service srvpingstatsinfoname ping retrieves service specified name srvpingstatsinfonameid ping retrieves particular service instance note name match whatever specified match whatever generated service service respond service request service request match name service request match name standard field discovery response contain following field typescript identifier message type example ionatsmicrovstats type string kind service reporting name string unique service reporting string version service validated official semver regexp httpssemverorgisthereasuggestedregularexpressionregextocheckasemverstring version string supplied service metadata metadata recordstringstring info return json following structure typescript type string name string string version string metadata recordstringstring description service description string array info service endpoint endpoint endpointinfo typescript endpointinfo name endpoint name string subject endpoint listening subject string queue group endpoint assigned queuegroup string metadata specific endpoint metadata recordstringstring field map metadata provided service created type ionatsmicrovinforesponse ping return following json standard response field typescript type string name string string version string metadata recordstringstring intention ping client calculate rtt service discover service type ionatsmicrovpingresponse stats typescript type string name string string version string metadata record individual endpoint stats endpoint endpointstats iso string service started utc timezone started string endpointstats name endpoint name string subject endpoint listening subject string queue group endpoint assigned queuegroup string number request received endpoint numrequests number number error endpoint raised numerrors number set last error triggered endpoint lasterror error field customized data returned stats handler see link serviceconfig data unknown total processingtime service processingtime nanos average processingtime total processingtime divided numrequests averageprocessingtime nanos type ionatsmicrovstatsresponse adding group endpoint service extended adding additional group endpoint group group serf common prefix endpoint registered group created addgroupname method service group name valid nats subject empty string cannot contain wildcard group name serf subject prefix group default queuegroup endpoint override service queuegroup group expose following method addendpointname handler register new endpoint service default endpoint registered subject created concatenating group name endpoint subject thisgroupnamename alternatively user may pas subject case service registered thisgroupnamesubject addgroupname creates return new group prefix group created follows thisgroupnamename endpoint service endpoint consists following field name alphanumeric humanreadable string describe endpoint multiple endpoint name handler request handler see request handling metadata optional recordstringstring providing additional information endpoint subject optional nats subject endpoint registered subject created concatenating subject provided user group prefix applicable subject provided name instead queuegroup optional override service group queuegroup enpoints created either service directly serviceaddendpoint group groupaddendpoint error handling service may communicate request error back client see fit help standardization also must include header natsserviceerror natsserviceerrorcode natsserviceerrorcode value always safe parse number natsserviceerror string describing error could shown user mean client making request service must check response error looking header allows client code fairly standard term handling regardless additional error handling convention service api library must provide error formatting function user produce properly formatted response header service msg client may optionally implement service msg add additional respond functionality responderrorcode number description string data uintarray opts publishoptions boolean enables service easily onboard service error without requiring user create shim add two required argument error code description rest match client implementation respond request handling service request handler operate default queue group mean order scale user add stop service possible send request multiple service example minimize response time quickest responder achieve requires running service instance different queuegroup configured endpoint queue subscription created note handler subject contain srv prefix prefix reserved internal handler handler specified client process request operate standard subscription handler mean assumption made whether returning callback signal request completed framework dispatch request fast handler return naming consistency documentation understanding user client implement service api tooling interacts service term service service
title deprecation strategy area core tag deprecation featureflags workflow superseded feature flag major version define strategy deprecation dogma dont change without featureflags exception bugfix dont break thing without alternative dont break thing minor release annotate upcoming break soon possible test new implementation change expressive verbose instruction inline feature flag comment world outside developer public code synopsys decided work trunkbased development different kind case consider implementing change cause break developing future feature main difference take account break current behaviour change difference different case minor change dont cause break deprecation minor change cause deprecation minor change part major feature dont cause break major change cause break quick overview deal different case concrete example explanation follow minor change break feature change tend released minor release dont cause break simple addition refactorings etc put change behind feature flag sure nothing changed called developing progress development completed remove feature flag old code anymore detailed description detailed rule minor change deprecating code feature change tend released minor release developed backward compatible manner deprecate old code example class replaced new one put change behind feature flag sure nothing changed called developing progress development completed remove feature flag old code anymore mark old code deprecated make sure called anywhere else make sure everything removed working alternative implemented annotate everything manner removal deprecated code nobrainer next major release detailed description detailed rule major change break part major feature refactoring break current behaviour removal class method property change signature business logic change put change behind feature flag sure nothing changed called developing progress development completed remove feature flag old code anymore mark old code deprecated make sure called anywhere else make sure everything removed working alternative implemented annotate everything manner removal deprecated code nobrainer next major release difference case take care fact whole old behaviour fully functional next major write specific test major flag test new behaviour detailed description detailed rule summary deprecation old code classmethodpropertyevent annotated featuredeprecated majordeprecated depending fact breaking change part change cause break part dont cause break following call part breaking code non breaking code breaking code hidden behind feature flag majorflag next major release non breaking code hidden behind feature flag minorflag developing soon feature change tested quality ensured approved flag removed breaking code corresponding majorflag active old code anymore code basis corresponding feature flag active old code called feature flag active prevent accidentally kept dependency way fully tested feature flag removed consequence conclusion codebasis changed old way fully functional release next major version even softbreaks avoided possible security update serious bugfixes reason softbreaks minor release deprecated code majordeprecated code called anywhere codebasis majorflags active example removal class mysampleclass replacement mynewsampleclass version developing new class mynewsampleclass implemented marked internal flagfeaturenext old class mysampleclass annotated featuredeprecated tagv flagfeaturenext code call old class mysampleclass get feature switch annotated majordeprecated tagv flagfeaturenext version feature release new class mynewsampleclass implemented marked internal annotation old class mysampleclass changed deprecated tagv flagfeaturenext version major release new class mynewsampleclass regardless feature flag internal annotation removed old class mysampleclass removed example example assume minor flag called featurenext major flag called featurenext startup example startup example complex example complex example want know special case general recommended read startup example come back complex example face specific question changelog often change major feature released immediately removal minor flag dont break anything change next major release case changelogs provided one change minor marked minor flag one major release change behind major flag marked major flag way minor change published minor release major change published major release changelog minor title done something issue next flag featurenext core added property sampleclass changelog major title done something serious issue next flag featurenext core removed property something sampleclass service service somehow special always initiated container change anything constructor service always container instance someone initiate service directly new servicecontroller dont provide compatibility declare new service new service implemented tag shopwarefeature minorflag added dependencyinjectionxml new service usable soon development finished allow plugin developer implement new service early intended allow beforehand also major flag make service unavailable next major servicexml xml service idshopwarecorecontentmytestservicemynewtestclass publictrue argument typeservice idshopwarecoresystemsystemconfigsystemconfigservice tag nameshopwarefeature flagfeaturenext service exchange service new one want exchange old service new one act new service like old service anywhere right deprecate symfony tag feature release service deprecated symfony tag xml featuredeprecated flagfeaturenext deprecate service feature release service idshopwarecorecontentmytestservicemytestclass publictrue argument typeservice idshopwarecoresystemsystemconfigsystemconfigservice deprecatedtagv aliasid service deprecated removed shopwarecorecontentmytestservicemytestclass insteaddeprecated service still marked majordeprecated tagtype deprecated major flag cause error service still major flag active xml featuredeprecated flagfeaturenext deprecate service feature release service idshopwarecorecontentmytestservicemytestclass publictrue argument typeservice idshopwarecoresystemsystemconfigsystemconfigservice tag namedeprecated flagfeaturenext versiontagv service adding many new service implementing new feature many new service could decide create whole new dependencyinjectionxml load depending feature flag way dont mess every single new service create new xml example srccoreframeworkdependencyinjectionnextlevelshoppingxml add new xml relevant bundlephp case would frameworkphp php class framework extends bundle public function buildcontainerbuilder container void loader new xmlfileloadercontainer new filelocatordir dependencyinjection loaderloadservicesxml loaderloadaclxml loaderloadapixml loaderloadappxml loaderloadcustomfieldxml loaderloaddataabstractionlayerxml featureisactivefeaturenext loaderloadnextlevelshoppingxml unused class class anymore marked deprecated featuretriggerdeprecated cannot simply remove directly class always initiated plugin php php deprecated tagv flagfeaturenext mytestclass removed mynewtestclass instead class mytestclass public function constructsystemconfigservice firstargument something secondargument mytestclass featuretriggerdeprecatedfeaturenext instead mynewtestclass unittests test case change due code change whole case duplicated make much easier differ old new test remove old test major release without breaking anything test old behaviour skipped feature flag activated test new behaviour skipped feature flag inactive old test annotated group legacy php majordeprecated flagfeaturenext test removed group legacy public function testoldworkflow void featureskiptestifactivefeaturenext public function testnewworkflow void featureskiptestifinactivefeaturenext add argument public method want add argument public method add new argument comment funcgetargs get argument provided php featuredeprecated tagv flagfeaturenext parameter precision mandatory future implementation public function calculateproductentity product int precision product featureisactivefeaturenext funcnumargs precision funcgetarg new calculation else throw new invalidargumentexceptionargument precision required feature featurenext else old calculation change direct service call pageloader route call original php class controller private productservice public function indexid product thisproductservicegetproductforstorefrontid page new productpageproduct thisrenderpage class productservice public function getproductstring required stuff return thisproductrepositorysearchnew criteriaidfirst public function getproductforstorefrontstring required stuff product thisproductrepositorysearchnew criteriaidfirst thisenrichforstorefrontproduct return product development php class controller internal flagfeaturenext private loader deprecated tagv flagfeaturenext productservice removed loader instead private productservice public function indexid majordeprecated tagv flagfeaturenext productservice removed keep ifbranch featureisactivefeaturenext page thisloaderload else product thisproductservicegetproductforstorefrontid page new productpageproduct thisrenderpage class productservice public function getproductstring required stuff return thisproductrepositorysearchnew criteriaidfirst deprecated tagv flagfeaturenext getproductforstorefront removed productrouteload instead public function getproductforstorefrontstring required stuff product thisproductrepositorysearchnew criteriaidfirst thisenrichforstorefrontproduct return product internal flagfeaturenext remove development finished new loader soon possible class productloader private productroute public function load product thisproductrouteloadid page new productpageproduct return page internal flagfeaturenext remove development finished new route soon possible class productroute public function loadid required stuff product thisproductservicegetproductid saleschannelproduct thisenrichsaleschannelthingsproduct return saleschannelproduct development finished merged trunk remove feature flag php class controller private loader deprecated tagv flagfeaturenext productservice removed loader instead private productservice public function indexid majordeprecated tagv flagfeaturenext productservice removed keep ifbranch featureisactivefeaturenext page thisloaderload else product thisproductservicegetproductforstorefrontid page new productpageproduct thisrenderpage class productservice public function getproductstring required stuff return thisproductrepositorysearchnew criteriaidfirst deprecated tagv flagfeaturenext getproductforstorefront removed productrouteload instead public function getproductforstorefrontstring required stuff product thisproductrepositorysearchnew criteriaidfirst thisenrichforstorefrontproduct return product class productloader private productroute public function load product thisproductrouteloadid page new productpageproduct return page class productroute public function loadid required stuff product thisproductservicegetproductid saleschannelproduct thisenrichsaleschannelthingsproduct return saleschannelproduct major release php class controller private loader public function indexid page thisloaderload thisrenderpage class productservice public function getproductstring required stuff return thisproductrepositorysearchnew criteriaidfirst class productloader private productroute public function load product thisproductrouteloadid page new productpageproduct return page class productroute public function loadid required stuff product thisproductservicegetproductid saleschannelproduct thisenrichsaleschannelthingsproduct return saleschannelproduct complex example dont read example one take likely confuse help dont concrete case mind come section stumble case dont exactly know dont find answer dont silent call slack aware case stated rename removal property property class removed annotated deprecated code also deprecated property renamed deprecated instead implement new property new name developing original class php class mytestclass public oldpublicproperty private oldprivateproperty public function mainsystemconfigservice firstargument something secondargument thissetoldpublicpropertysecondargument public function getoldprivateproperty return thisoldprivateproperty private function setoldprivatepropertyoldprivateproperty void thisoldprivateproperty oldprivateproperty public function getoldpublicproperty thissetoldprivatepropertythisoldpublicproperty return thisoldpublicproperty private function setoldpublicpropertyoldpublicproperty void thissetoldprivatepropertyoldpublicproperty thisoldpublicproperty oldpublicproperty public function getsomething int return calling class class mytestservice public function constructmytestclass mytestclass mytestservice mytestclassgetoldpublicproperty new property implemented php class mytestclass deprecated flagfeaturenext property removed newpublicproperty instead adrexplain deprecated property public could anyhwere public oldpublicproperty internal flagfeaturenext public newpublicproperty featuredeprecated flagfeaturenext property removed newprivateproperty instead adrexplain minor flag property private removed soon development finished private oldprivateproperty internal flagfeaturenext adrexplain minor flag new property soon development finished private newprivateproperty public function mainsystemconfigservice firstargument something secondargument mytestclass featuredeprecated flagfeaturenext setoldpublicproperty removed feature release remove call also featureisactivefeaturenext thissetoldpublicpropertysecondargument else thissetnewpublicpropertysecondargument internal flagfeaturenext public function getnewprivateproperty featureisactivefeaturenext throw new featurenotactiveexceptionfeaturenext return thisnewprivateproperty internal flagfeaturenext public function setnewprivatepropertynewprivateproperty void featureisactivefeaturenext throw new featurenotactiveexceptionfeaturenext thisnewprivateproperty newprivateproperty internal flagfeaturenext public function getnewpublicproperty featureisactivefeaturenext throw new featurenotactiveexceptionfeaturenext return thisnewpublicproperty internal flagfeaturenext public function setnewpublicpropertynewpublicproperty void featureisactivefeaturenext throw new featurenotactiveexceptionfeaturenext thisnewpublicproperty newpublicproperty deprecated flagfeaturenext getter removed getnewprivateproperty instead adrexplain deprecated public method called plugins etc attention property changed newprivateproperty make possible remove old one soon possible public function getoldprivateproperty return thisnewprivateproperty featuredeprecated flagfeaturenext setter removed setnewprivateproperty instead adrexplain featuredeprecated private method cant called outside private function setoldprivatepropertyoldprivateproperty void thisoldprivateproperty oldprivateproperty deprecated flagfeaturenext setter removed setnewpublicproperty instead adrexplain deprecated public method called plugins etc public function getoldpublicproperty featuredeprecated flagfeaturenext setoldprivateproperty removed feature release keep else branch featureisactivefeaturenext thissetoldprivatepropertythisoldpublicproperty else thissetnewprivatepropertythisoldpublicproperty return thisoldpublicproperty featuredeprecated flagfeaturenext setter removed setnewpublicproperty instead adrexplain featuredeprecated private method cant called outside private function setoldpublicpropertyoldpublicproperty void thisoldpublicproperty oldpublicproperty calling class class mytestservice public function constructmytestclass mytestclass mytestservice majordeprecated tagv flagfeaturenext keep branch remove else branch featureisactivefeaturenext mytestclassgetnewpublicproperty else mytestclassgetoldpublicproperty minor feature release development finished php class mytestclass deprecated flagfeaturenext property removed newpublicproperty instead public oldpublicproperty adrexplain internal removed tagged minor feature flag public newpublicproperty adrexplain oldprivateproperty removed commentblock adr example remove property completly adrexplain internal removed tagged minor feature flag private newprivateproperty public function mainsystemconfigservice firstargument something secondargument mytestclass adrexplain old call private method removed tagged minor feature flag thissetnewpublicpropertysecondargument adrexplain internal removed tagged minor feature flag public function getnewprivateproperty adrexplain exception removed tagged minor feature flag return thisnewprivateproperty adrexplain internal removed tagged minor feature flag public function setnewprivatepropertynewprivateproperty void thisnewprivateproperty newprivateproperty adrexplain internal removed tagged minor feature flag public function getnewpublicproperty return thisnewpublicproperty adrexplain internal removed tagged minor feature flag public function setnewpublicpropertynewpublicproperty void thisnewpublicproperty newpublicproperty deprecated flagfeaturenext getter removed getnewprivateproperty instead adrexplain deprecated public method called plugins etc attention property changed newprivateproperty make possible remove old one soon possible public function getoldprivateproperty featuretriggerdeprecatedfeaturenext method getoldprivateproperty removed getnewprivateproberty instead return thisnewprivateproperty adrexplain method setoldprivateproperty removed private method tagged minor flag deprecated flagfeaturenext setter removed setnewpublicproperty instead adrexplain deprecated public method called plugins etc public function getoldpublicproperty featuretriggerdeprecatedfeaturenext method getoldprivateproperty removed getnewprivateproberty instead thissetnewprivatepropertythisoldpublicproperty return thisoldpublicproperty calling class class mytestservice public function constructmytestclass mytestclass mytestservice majordeprecated tagv flagfeaturenext keep branch remove old branch featureisactivefeaturenext mytestclassgetnewpublicproperty else mytestclassgetoldpublicproperty major release php class mytestclass adrexplain oldpublicproperty removed commentblock adr example remove property completly public newpublicproperty private newprivateproperty public function mainsystemconfigservice firstargument something secondargument mytestclass thissetnewpublicpropertysecondargument public function getnewprivateproperty return thisnewprivateproperty public function setnewprivatepropertynewprivateproperty void thisnewprivateproperty newprivateproperty public function getnewpublicproperty return thisnewpublicproperty public function setnewpublicpropertynewpublicproperty void thisnewpublicproperty newpublicproperty adrexplain method getoldprivateproperty removed majordeprecated commentblock adr example remove method annotation calling class class mytestservice public function constructmytestclass mytestclass mytestservice adrexplain old call deprecated method removed tagged major feature flag mytestclassgetnewpublicproperty change return value method way sure caller method typehinted return value could remove return type cannot sure public method barely sure add new method new method development php class mytestclass deprecated flagfeaturenext method removed getsomewhat instead public function getsomething int featuretriggerdeprecatedfeaturenext method getsomething removed getsomewhat instead return value new method string instead int return internal flagfeaturenext new returntype getsomething public function getsomewhat string return new somewhat class mytestcallerclass public function mainmytestclass testclass void featuredeprecated tagv flagfeaturenext getsomething removed keep ifbranch feature release featureisactivefeaturenext thisensureintintvaltestclassgetsomewhat else thisensureinttestclassgetsomething new method major release php class mytestclass public function getsomewhat string return remove typehint development really sure call break return type defined php class mytestclass deprecated flagfeaturenext method removed getsomewhat instead return intstring public function getsomething featureisactivefeaturenext return else return class mytestcallerclass public function mainmytestclass testclass void featuredeprecated flagfeaturenext returntype getsomething string keep ifbranch featureisactivefeaturenext thisensureintintvaltestclassgetsomething else thisensureinttestclassgetsomething remove typehint major release php class mytestcallerclass public function mainmytestclass testclass void thisensureintintvaltestclassgetsomething exchange argument service constructor argument class constructor service exchanged new argument added old one set nullable necessary argument service removed exchanged annotated dependencyxml well argument added available without feature marked oninvalidnull also annotated internal dependencyxml well comment explicitly explain oninvalidnull removed php class php class mytestclass majordeprecated flagfeaturenext secondargument removed thirdagrument mandatory remove public function constructsystemconfigservice firstargument something secondargument somewhat thirdargument mytestclass servicexml xml majordeprecated flagfeaturenext deprecate service feature release service idshopwarecorecontentmytestservicemytestclass publictrue argument typeservice idshopwarecoresystemsystemconfigsystemconfigservice majordeprecated tagv flagfeaturenext remove argument something feature release argument typeservice idshopwarecoresystemsystemconfigsomething oninvalidnull internal tagv flagfeaturenext remove oninvalidnull feature release argument typeservice idshopwarecoresystemsystemconfigsomewhat oninvalidnull service changeremovalexchange interface interface changed compatible way instead implement abstract class abstract class implement interface next major applies compatible interface change break interface see example mytestclass implement mytestinterface class typehinted mytestclass interface make sure interface still present original class php class mytestclass implement mytestinterface class mytestcaller public function dosomethingmytestinterface mytest void original interface php interface mytestinterface public function anymethodstring name void deprecated interface php deprecated tagv flagfeaturenext interface mytestinterface removed interface mytestinterface public function anymethodstring name void new abstract class php internal flagfeaturenext interface mytestinterface removed abstract class mytestabstractclass implement mytestinterface abstract public function anymethodstring name void abstract public function anyadditionalmethod void class mytestclass extends mytestabstractclass public function anymethodstring name void echo something old name public function anyadditionalmethod void echo something new minor release php abstract class mytestabstractclass implement mytestinterface abstract public function anymethodstring name void abstract public function anyadditionalmethod void removal major release php abstract class mytestabstractclass abstract public function anymethodstring name void abstract public function anyadditionalmethod void class mytestclass extends mytestabstractclass public function anymethodstring name void echo something old name public function anyadditionalmethod void echo something new detailed rule minor change break feature change tend released minor release dont cause break simple addition refactorings etc developing new code new code hidden behind feature flag annotated internal flagfeaturenext new code public api add new test new code put test behind feature flag featureskiptestifinactivefeaturenext changed code changed code hidden behind feature flag case ifelse clause featureisactivefeaturenext additional expressive comment done feature release removed code kind change barely remove code except private code private code removed annotated featuredeprecated flagfeaturenext additional expressive comment done feature release feature release new code remove feature flag internal annotation remove feature flag test changed code remove feature flag keep new solution case ifelse clause keep new code remove old according comment made removed code remove featuredeprecated annotation unused code according comment made minor change deprecating code feature change tend released minor release developed backward compatible manner deprecate old code example class replaced new one developing new code new code hidden behind feature flag annotated internal flagfeaturenext new code public api add new test new code put test behind feature flag featureskiptestifinactivefeaturenext changed code changed code hidden behind feature flag case ifelse clause featureisactivefeaturenext additional expressive comment done feature release removed code deprecated code obsolete code hidden behind minorflag annotated featuredeprecated call deprecated code hidden behind extra feature flag especially major version also code annotated majordeprecated tagv flagfeaturenext create jira ticket reminder remove extra feature flag tagged major version issue key new ticket major feature flag feature feature release new code remove feature flag internal annotation remove feature flag test changed code remove feature flag keep new solution case ifelse clause keep new code remove old according comment made case addition public api make change backwards compatible way make additional parameter optional next major removed code deprecated code private nonbreaking change remove featuredeprecated annotation unused code according comment made deprecation add featuretriggerdeprecatedfeaturenext mynewmethod instead deprecated code change featuredeprecated deprecated annotation declare old test legacy httpssymfonycomdoccurrentcomponentsphpunitbridgehtmlmarktestsaslegacy major release removed code remove deprecated majordeprecated code remove extra feature flag major version minor change part major feature break part major feature changed without breaking anything new class private method change unchanged output depending value new change developer decide advantage release backwardcompatible part early minor version case previous workflow minor change deprecating code otherwise change stay behind major feature flag breaking change follow guid major change part major feature break major change part major feature break part major feature refactoring break current behaviour removal class method property change signature business logic change developing new code new code hidden behind major feature flag annotated internal flagfeaturenext new code public api add new test new code put test behind major feature flag featureskiptestifinactivefeaturenext changed code changed code hidden behind major feature flag case ifelse clause featureisactivefeaturenext additional expressive comment done major release declare old test legacy httpssymfonycomdoccurrentcomponentsphpunitbridgehtmlmarktestsaslegacy removed code deprecated code call deprecated code hidden behind major feature flag also code annotated majordeprecated tagv flagfeaturenext deprecation add featuretriggerdeprecatedfeaturenext mynewmethod instead deprecated code declare old test legacy httpssymfonycomdoccurrentcomponentsphpunitbridgehtmlmarktestsaslegacy major release new code remove feature flag internal annotation remove feature flag test changed code remove feature flag keep new solution case ifelse clause keep new code remove old according comment made remove part changed code arent called anymore removed code deprecated code remove majordeprecated annotation unused code according comment made remove old test glossary
hamlet engine distribution docker image layer deciders roleyfoley rossmurry problem statement hamlet engine made collection software component based number different platform bash freemarker java current distribution process collect component multipurpose docker image handle build deploy task collection process git pull code software component includes image problem process really work controlled docker environment making image multipurpose resulted large docker image installing version hamlet requires pulling new image driver simple installation process user local installation integration existing process simple version management support focus handling usage feature active development within deployment pipeline tested verified release process considered docker image layer component artefact support installing image include software component hamletcli python package outcome chosen docker image layer component artefact support installing image flexible provides foundation managing distribution hamlet code positive consequence establishes process distributing package support different platform open support enhancing release process safer flexible doesnt add much overhead reasonably straightforward understand negative consequence essentially implementing package manager lot people already implement doesnt necessarily cover software platform dependency least make get script tell easily pro con docker image layer component artefact support installing image process would create docker image contain content repository would based scratch image dockerfile scratch copy would essentially create single layer image contains file repository docker image would tagged pushed docker repository docker manifest list layer docker image layer taggz file stored registry pulling layer essentially provides artefact tagged treated like docker image required process would based docker registry spec httpsdocsdockercomregistryspecapi would add process executor would pull appropriate image component locally store locally based version shim based approach setting active version component could incorporated exiting bootstrap process enable bash executor process could also add consolidated layer component primary release artefact would single fully tested artefact based component combined given point good docker image agnostic software platform handle storing different file type want good image retrieved without specific dependency package manager good immutable mutable release dev nightly stable also tagged release good layer integrate existing docker image required copy syntax bad uncommon pattern require depth docker image knowledge maintain bad requires executor specific implementation pull process include software component hamletcli python package currently published pypi package hamletcli publishes hamlet cli doesnt include underlying software component required cli actually anything could extend package build process include underlying software component inside package available installation good would provide single command install cli component good standard known installation method pip installation process bad wouldnt allow different version engine component independent cli could done virtual envs would require publishing package push component bad doesnt accomodate idea different executor running engine would implemented executor
workspace dependency packagejson deciders danny coates obsoleted usenxformonorepo problem statement since becoming monorepo havent found way share code across package work well local development production without fragile adhoc workarounds driver simpler code sharing minimal overhead setup deployment work well package low maintenance long term viability outcome workspace dependency type along typescript project reference provide good internal dependency solution address shortcoming current situation workspace yet supported npm roadmap pretty safe assume widely supported foreseeable future order start workspace today well yarn slight risk although well supported doesnt level backing npm however workspace supported npm nothing locking yarn advantage manual linking dependency simpler build single lock file hoisted dependency disadvantage short term requires switch npm yarn package manager change dev workflow another tool understand code change required compatible yarn however theyre also backward compatible npm yarn doesnt currently support auditing dependency like npm background weve mix following strategy disadvantage change striving address long relative path advantage approach doesnt require linking doesnt disturb packagelocks work package plain build step requires dependency carefully copied production build step code require build step orchestrate build somehow ensure package get built correct order difficult relation package implicit declarative implementation includes various addition packagejson script difficult maintain keep correct local dev production build lerna file dependency lerna meant handle versioning monorepos task runner work fine primarily designed managing set package get published package registry like npm default lerna simple way dependency unpublished package file dependency type allows local dependency declared cause problem packagelocks file dependency break regular npm within package directory bug npm difficult maintain packagelock file dependency added usually requiring lock deleted recreated update viable long term solution published dependency package public monorepo led occasional versioning confusion past requires awkward workflow making change update dependency dependent package could publish package lerna designed however desirable wed workaround current lerna limitation publishing package reason would confusing others waste resource
kind architecture record adr internalized leafletheat simpleheat hubert sablonnire weve leaflet plugin display heat map called leafletheat plugin cjs module relies leaflet present global namespace caused problem modern esm based project managed make work far workarounds recently decided leaflet esm benefit good treeshaking clearly easy youre dealing cjs global var like end missed bug appeared building cdn clearly project exposed module problem project actively maintained last commit source code august also project depends simpleheat expected available global variable cant really expect project accept contribution radical modifying module exposition discarded solution could chosen fork project update source code exposed esm publish new version npm clever cloud org bit overkill start maintaining github fork release new npm package file without dependency leaflet solution decided internalize project repo clearly simpler work project created vladimir agafonkin licensed bsdclause here add license section readme explain detail copy source httpsgithubcommournersimpleheat srclibsimpleheatjs add license copyright top file modify source file exposed module copy source httpsgithubcomleafletleafletheat srclibleafletheatjs add license copyright top file modify source file exposed module modify source properly import leaflet inner simpleheat may decide publish maintain fork contribute back there interest
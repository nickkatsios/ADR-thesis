samediff file format proposal proposed alex black discussed raver samediff model serializable something save disk send network additionally able save load model file readable language mainly java currently flatbuffersbased format samediff graph serialization number problem discussed issue httpsgithubcomeclipsedeeplearningjissues transition pure flatbuffers zip flatbuffers model format flatbuffers graph structure parameter stored separately graph structure also within zip introduce ability support multiple version graph model file enable model file support storing multiple data type example version quantized int version multiple different checkpoint parameter iteration multiple version given model english chinese caseduncased etc default loading graph unless otherwise specified load recent model tag tag must valid filefolder identifier case sensitive structure zip file follows tagstxt list graph tag one per line utf format duplicate oldest first newest last tagnamegraphfb graph structure flatbuffers format tagnameparamstxt mapping variable name parameter file name tagnameparamsfb set ndarrays parameter flatbuffers format tagnametrainingconfigfb training configuration updater learning rate etc tagnameupdatertxt mapping variable name updater state file name tagnameupdaterfb set ndarrays updater state note paramstxt allow parameter sharing via reference parameter mynormalparam sharedparam othertagname mean parameter value parameter mynormalparam present tagnameparamsfb within zip file parameter value sharedparam available othertagnameparamsfb note also motivation paramstxt file instead raw parameter name file name parameter invalid ambiguous file name myparamname myparam etc term updater state stored similar format example adam updater state array shape parameter myparam otherparam mean myparamm tagnameupdaterfb myparamv tagnameupdaterfb format also allows updater state sharing graph structure graph structure encoded flatbuffers format schema part list variable name datatype placeholder constant parameter shape list operation name nametype input variable name output variable name argument note legacy custom ops encoded way legacy ops simply operation type operation number operation argument encoding done named argument essentially mapstringt structure one long double boolean datatype allows improved backward compatibility ambiguity ops modified graph file written improved interpretability compared simple array iargs bargs targs dargs one consequencedownside define mapping named argument iargsbargstargsdargs java essentially done manually though clearly dont want replicate work future language avoid significant amount work moving namearg mapping code generation following proposed mapstringt split flatbuffers schema pair field string iargnames long iargs string targnames double dargs string bargnames boolean bargs string dargnames datatype dargs clearly name value array pair would length namevalue correspondence array index essentially equivalent mapstringt representation benefit needing define mapping named args arraystyle args time soon also allowing add future mainly write graph betterproper backward compatibility change extensibility type suppose future want store data variable array example include list map example nlp application implement right number adding without breaking backward compatibility first enhance paramstxt file format perhaps something like following mapparam map second add similar text file type example paramsmapstxt format paramstxt content tagnameparamsmapsfb
choice protobuf deciders fabien boucher issue httpsgithubcomchangemetricsmonocleissues problem statement current api implementation spread across multiple module webapp config query without formal definition inputsoutputs induces inconsistency foresee technical difficulty maintain evole service would like interface description language define api various component webapi webclients worker database define maintain interface considered openapi swagger protobuf thrift outcome chosen protobuf come best see positive consequence start defining interface outside implementation simpler http api path action function name body input instead encoding input mix path querystring body component example post getprojects body index name instead get projectsindexname negative consequence team learn new language followup required actual implementation pro con openapi zuul example httpsopendevorgzuulzuulrawbranchmasterwebpublicopenapiyaml generated webclient httpszuulopendevorgopenapi good defines common http apis bad hard maintain protobuf google apis example httpsgithubcomgoogleapisgoogleapis etcd apis model kvproto rpcproto proof concept upcoming filter sugestion api monocle protobuf monocleproto copyright monocle author spdxlicenseidentifier agplonly syntax proto import googleapiannotationsproto gopackage monocleconfig message projectdefinition string name string repositoryregex string branchregex string fileregex message getprojectsrequest string index message getprojectsresponse repeated projectdefinition project service monocle rpc getprojectsgetprojectsrequest return getprojectsresponse googleapihttp post apigetprojects body shellsession generate openapi protobuf definition protoc searchproto ihometdecacqusrcgithubcomgoogleapisgoogleapis openapiout yaml monocleopenapiyaml openapi info title monocle version path apigetprojects post operationid monoclegetprojects requestbody content applicationjson schema ref componentsschemasgetprojectsrequest required true response description content applicationjson schema ref componentsschemasgetprojectsresponse component schema getprojectsrequest property index type string getprojectsresponse property project type array item ref componentsschemasprojectdefinition projectdefinition property name type string repositoryregex type string branchregex type string fileregex type string good stable standard good enables high quality code generation client server bad requires custom tooling work thrift good many language implementation good describes function error exception bad json serialization human readable link grpc rest understanding grpc openapi rest api design openapi spec swagger codegen protobuf overview protobuf python tutorial protobuf javascript tutorial thrift tutorial thrift type
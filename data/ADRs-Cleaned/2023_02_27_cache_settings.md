cache setting participant brice schaffner christoph bcklin jrgen hansmann updated added proposal servicestac currently static cache setting request api request min configured per staging asset download configured per staging asset download cache setting set uploading asset coming new functionality different cache setting depending least collection even maybe fine grained selection itemsassets diemo service stac update asset every minute see change asset download cache setting asap march coming scenario realtime asset changed every minute diemo frequent change changed every minute even meteoschweiz frequent asset update every hour twice day daily weekly weekly update new asset immediately available daily update update afford wait cached data expiration daily update midnight infrequent update either define low frequency every month every year sporadic update update new asset immediately available update afford wait cached data expiration never theory scenario doesnt exists potentially every asset might somewhen updated currently support scenario important fact cache setting cachecontrol header cannot changed set unless object uploaded possibility copy place implement preconditional request http expires header discouraged aws recommend cachecontrol maxage directive instead expires header field control object caching specify value cachecontrol maxage expires cloudfront value cachecontrol maxage http expires header ignored implementation cachecontrol maxage smaxage present stac api specification caching management stac updated created field text created updated different meaning depending field available item property identify creation update time metadata field item asset refers creation update time actual data linked asset object see stac spec warning currently implementation field always refer metadata data data stac spec created updated field collection level implementation collection item updated field automatically updated child metadata updated item asset asset upload automatically update checksummultihash therefore update updated field collection item asset stac specification extension timestamps extension specification field type description published string time corresponding data see published first time utc expires string time corresponding data see expires valid longer utc unpublished string time corresponding data see unpublished utc currently asset update new upload automatically update asset metadata field checksummultihash update checked asset update changed checksummultihash sure update field also updated depends django framework andor drf framework code doesnt check write data update field automatically updated django cloudfront cache invalidation take time independent path invalidate every cache invalidation cost cloudfront nocache mean low cache proposal proposal add new field transactional api create asset updateinterval field would type int second first step would part transactional api read endpoint saved together asset visualization field left next step might existing stac extension like timestamps extension specification create new extension tbd example json body asset create request post httpdatageoadminchapistacvcollectionscollectioniditemsfeatureidassetsassetiduploads json title thumbnail description string type imagetiff applicationgeotiff projepsg eogsd smrkgrstiff updateinterval value field could checked via admin interface read field field saved assetupload model copied asset model asset upload complete action similar checksummultihash field warning field act cache setting asset data api asset endpoint asset upload automatically update asset metadata new checksummultihash updateinterval mean instantly change happens infrequently second several hour day week setting updateinterval would mean never case default value field would default cache setting would applied value would compute cache setting asset data follow disable cache set cachecontrol public maxage rate max day rate rate cache rate cache rate cache might issue case rate min cache might issue case rate min cache might issue case rate cache might issue case rate cache might issue case based value say solution would cover case case would another mechanism smaller max cache setting expires http header also recommended aws could expires data maxage api metadata low value chris recommend mechanism cachecontrol instead expires case first idea would service deliver data set cachecontrol dynamically cache invalidation case case solution manual cache invalidation cloudfront start propose manually via aws cli aws console depending future case come often provide api endpoint cache invalidation based collection andor item path possible next step next step would provide read info updateinterval one possible solution would timestamps extension specification expires asset field would set based update time updateinterval field would updated time asset upload either started completed tbd extension keep mind collectionitemasset publication flag see bgdiinfsb proposal updated implementation proposal two different linear approach updateinterval show issue updateinterval updateinterval jump actually really good quick experimentation excell came mathematic expression text maxage roundlogupdateinterval logupdateinterval result graph logarithmic approach give better caching timeout number linear approach number updateinterval maxage keep api independent implementation proposal case case discussed future needed updateinterval readonly admin interface consequence implement deploy int int diemo developper notified chris spec brice implementation proposal reference http specification expires header http specification freshness cloudfront managing long content stay cache expiration timestamps extension specification stac spec
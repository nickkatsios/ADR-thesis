title introduce increment pattern area systemsettings tag architecture increment messagequeuestats current messagequeuestats table record message message queue often done subscriber writes record database via mysql connection record already exists duplicate key triggered count value record updated system many write operation generate lot traffic message queue turn generates lot traffic messagequeuestats table resulting bottleneck andor deadlock another issue also provide feature called frequently module increase count everytime admin module visited face similar issue introduce new table increment store countable information deprecated messagequeuestats table create possibility control access increment table via redis another storage optimized scenario however prevent extend access via dal implement new gateway following method incrementstring cluster string key void decrementstring cluster string key void liststring cluster int limit int offset array resetstring cluster string key null array getpool string getconfig array getdecorated self enables following functional flow furthermore also possible completely disable message queue stats pool via config file easily tweak define new increment pool config file pool configuration yaml shopware increment useractivity type mysql messagequeue type redis config url redislocalhost custompool type array default ship redis mysql array adapter gateway possible easily switch adapter via config want override default mysql redis adapter register incrementer gateway container shopwareincrementcustompoolgatewayadapter consequence deprecate messagequeuestats dal class deprecate current messagequeuestats endpoint api deprecate messagequeuestats service deprecate messagequeuestats table create new increment table implement new endpoint work new gateway implement new node increment configuration new gateway admin notification next major remove deprecation messagequeuestats
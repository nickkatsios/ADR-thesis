adr handling utc timestamps application relational database proposed author damir murat damirmuratgit gmailcom reviewer none handling time time zone easiest task java many reason probably relate history datetime api evolution jvm new java datetime api introduced java big step forward explicitness correctness unfortunately api quite complex requires careful study correctly moreover adding database picture make thing even difficult since additional player like jdbc driver orm framework like hibernate database new player idea nuance datetime handling dealing timestamps application database utc zone standard best practice sensible approach ideally neither application database depend anymore local time zone execute freely move executables time zone quite common today cloud era always function correctly furthermore utc additional advantage primary time standard base reference regulates world clock time stable since never change daylight saving time dst standard textual representation parsable platform without ambiguity modeling utc timestamps application level java datetime api class represent utc timestamp javatimeinstant instant represents single moment specific point time utc timeline therefore misinterpreted confused moment history short simplest probably best choice model utc timestamps application level javatimeoffsetdatetime offsetdatetime perceived instant generalization offsetdatetime also model single moment time also includes configurable offset relative utc therefore offsetdatetime offset logical equivalent instant javatimelocaldatetime localdatetime often misused modeling utc timestamps problem localdatetime represent single moment time rather represents wallclock time always highly coupled time zone conceptual wallclock running depending time zone stand different moment simultaneously course attached utc time zone strong relation local time zone always pop one way usage might considered advantage localdatetime generally avoided modeling utc timestamps also zoneddatetime class brings nuance time zone handling real world example zoneddatetime handle daylight saving time dst including tracking latest political conceptually however zoneddatetime instant assigned zoneid best choice storing utc timestamps might handy case like presenting timestamp user time zone reason described choosing javatimeinstant modeling utc timestamps let discus hibernate handle instant utc timestamps hibernate timestamp column following discussion assume postgresql database usage corresponding jdbc driver internal working might different database general mechanism quite similar mapping instant database hibernate javasqltimestamp writing database hibernate convert instant javasqltimestamp pass timestamp jdbc driver default hibernate via preparedstatementsettimestampint timestamp method mechanism offsetdatetime localdatetime note also appropriate preparedstatementsettimestampint timestamp calendar method hibernate unless explicitly configure time zone hibernate communicating database next jdbc driver convert javasqltimestamp string representation last part string time zone offset since settimestamp method two parameter explicit time zone provided jdbc driver local application time zone calculate offset although may look like local time zone cause issue still good path problem really happens targeted database column accept time zone offset information timestamp column case offset part string simply discarded loss time zone offset leading cause problem written local application timestamp database reading database hibernate resultsetgettimestampstring method also resultsetgettimestampstring calendar method unless explicitly configure hibernate therefore jdbc driver interpret fetched string database timestamp local application time zone finally hibernate convert passed timestamp instant via epoch second hand instant application ironically everything seems work correctly application perspective wrong timestamp written database application work right well work move another time zone happens previously recorded timestamps invalid application perspective new one stored shifted relative old one word application data invalid timestamp timestamptz standard sql data type timestamp commonly misused column intended store utc timestamps unfortunately timestamp sql data type cannot keep time zone offset information evident consider full name timestamp without time zone database support always sql type timestamp time zone preserve time zone offset postgresql timestamp stand timestamp without time zone data type timestamptz describes timestamp time zone going postgresql data type name brevity avoid problem described previous section simply timestamptz column instead timestamp column even move application andor database time zone continue work correctly drawback still remain first dont setup work timestamptz timestamp column avoid possible second kind database viewer tool timestamptz column display data local time zone database data correct includes offset always convert utc head finally rely direct query execution without hibernate jdbc driver mediation database display result local time zone example postgresql internally store timestamptz utc format however display direct query purpose always convert utc timestamp local time zone database displaying result fixing inconsistency fix issue timestamp column instructing hibernate utc time zone handling timestamps leverage hibernatejdbctimezone configuration property example spring boot application put following line applicationproperties file springjpapropertieshibernatejdbctimezoneutc configuration set hibernate settimestamp gettimestamp method calendar parameter calendar instance created configured utc time zone avoid issue direct query data display database management tool configure utc database default time zone exact procedure highly dependent concrete database postgresql examine supportdockerpostgrespostgresqlconf supportdockerdockercomposeinfrastructureyml file klokwrkproject one thing aware database management tool exploring data tool correctly display content timestamptz column experience pgadmin idea database tool work correctly dbeaver configure utc local time zone case dbvisualizer currently support distinguishing timestamp timestamptz column unfortunately display format data type architectural system klokwrkproject following recommendation handling utc timestamps javatimeinstant type modeling utc timestamps configure hibernate utc time zone handling javasqltimestamp via hibernatejdbctimezone configuration property configure default time zone database utc time zone postgresql timestamptz sql data type utc timestamp column consequence positive consistent correct unambiguous handling utc timestamps system level obvious timestamp represents much harder misinterpret timestamp anything else utc timestamp neutral requires minimal change infrastructure like configuring default database time zone negative already existing data present might require data migration considered ignoring problem reference httpsstackoverflowcomquestionswhatsthedifferencebetweeninstantandlocaldatetime httpswikipostgresqlorgwikidontdothisdateftimestorage httpswwwtoolboxcomtechdatamanagementblogszoneofmisunderstanding httpsmediumcombuildingthesystemhowtostoredatesandtimesinpostgresqlbdad httpskaiwerncompostswhatyouneedtoknowaboutpostgresqltimezone httpskbobjectrocketcompostgresqlpostgresqlsettimezone httpsvladmihalceacomhowtostoredatetimeandtimestampsinutctimezonewithjdbcandhibernate httpsvladmihalceacomdatetimestampjpahibernate httpsvladmihalceacomwhatsnewinjpajavadateandtimetypes httpsgithubcomhibernatehibernateormblobmainhibernatecoresrcmainjavaorghibernatetypedescriptorjdbcinstantastimestampwithtimezonejdbctypejava httpsgithubcomhibernatehibernateormblobmainhibernatecoresrcmainjavaorghibernatetypedescriptorjdbctimestampwithtimezonejdbctypejava httpswwwtimeanddatecomworldclockconverterhtml
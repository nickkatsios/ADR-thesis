setting vault certification authority wanted explore vault capability serve service deployed strategic platform hmcts thats issue certificate service may authentication purpose order discus capability vault first talk secret backends secret backends component vault store generate secret part mount system vault behave similarly virtual filesystem readwritedelete sent secret backend secret backend choose react operation however see fit purpose vault provides pki secret backend generates certificate dynamically based configured role mean service get certificate needed client server authentication without going usual manual process generating private key csr submitting waiting verification signing process complete vault documentation quickstart subject illustrate pretty well operational concept behind running vault documentation also present consideration needed pki backend believe careful root section require special attention thats focused spike showing vault create root intermediate organization mind start creating root org begin mounting pki backend hmcts root code vault mount pathhmcts descriptionhmcts root pki successfully mounted pki hmcts create certificate code vault write hmctsrootgenerateinternal commonnamehmcts root keybits excludecnfromsanstrue key value certificate begin certificate miifadccauigawibagiudvbvbdpafoxdtlvhbpvcwdqyjkozihvcnaqel bqawgdewmbqgaueaxmnsedvfmgumvdcbdqtaefwxnzamjcxntumzrafwx nzamjgxntumdrambgxfjaubgnvbamtduhnqrtifjvbqgqewggiimagcsqg end certificate expiration issuingca begin certificate miifadccauigawibagiudvbvbdpafoxdtlvhbpvcwdqyjkozihvcnaqel bqawgdewmbqgaueaxmnsedvfmgumvdcbdqtaefwxnzamjcxntumzrafwx nzamjgxntumdrambgxfjaubgnvbamtduhnqrtifjvbqgqewggiimagcsqg qnbyzvmnlxchyhlrmgtzrxryevhsvvnxdfgxoxkusxydqbvwupkk wntsaokfnmfheqneazddpsfrpowrizzmpojlawhzbjcuhtvt ulfberczvzplpafewqsdjcfkjxvodkcmadbhdkk end certificate serialnumber beddcddfbcfedbdda curl openssl verify certificate created code curl httpvhmctscapem openssl text certificate data version serial number beddcddfbcfedbdda signature algorithm shawithrsaencryption issuer cnhmcts root validity jul gmt aug gmt subject cnhmcts root subject public key info public key algorithm rsaencryption publickey bit modulus adfacefbc eedebfcdaec output truncated proceed configure url accessing also certificate revocation list crl code vault write hmctsconfigurls issuingcertificateshttpvhmcts success data written hmctsconfigurls note localhost address issuingcertificates url demo purpose set address appropriate root ready create intermediate code vault write hmctsconfigurls issuingcertificateshttpvhmcts success data written hmctsconfigurls vault mount pathhmctsprobate descriptionprobate intermediate pki successfully mounted pki hmctsprobate vault mount path type default ttl max ttl force cache replication behavior description cubbyhole cubbyhole false local pertoken private secret storage hmcts pki system system false replicated hmcts root hmctsprobate pki system system false replicated probate intermediate secret generic system system false replicated generic secret storage sys system false replicated system endpoint control policy debugging proceed generate intermediate certificate signing request csr code vault write hmctsprobateintermediategenerateinternal commonnameprobate intermediate keybits excludecnfromsanstrue key value csr begin certificate request miiezzccakcaqawijegmbgaueaxmxuhjvymfzsbjbnrlcmlzglhdgugqew ggiimagcsqgsibdqebaquaaicdwawggikaoicaqdbazvkebahuygxrrf qoaquyvsofgexeznmdptjvisonk end certificate request csr get cert signed root savecopy content csr onto file probatecsr send root backend code vault write hmctsrootsignintermediate csrprobatecsr commonnameprobate intermediate ttlh key value certificate begin certificate miifjtccawgawibagiuugsqtcwsqnltkfpwjsyktkwdqyjkozihvcnaqel bqawgdewmbqgaueaxmnsedvfmgumvdcbdqtaefwxnzamjcxnjmzmtnafwx iaokgqkgvvdmxwspmtctmuxfggwtmtpilvlyrzrkkgkpuljgewspc hbosydsmaibnebvsxyllwlyxqgeknup end certificate expiration issuingca begin certificate miifadccauigawibagiudvbvbdpafoxdtlvhbpvcwdqyjkozihvcnaqel bqawgdewmbqgaueaxmnsedvfmgumvdcbdqtaefwxnzamjcxntumzrafwx wntsaokfnmfheqneazddpsfrpowrizzmpojlawhzbjcuhtvt ulfberczvzplpafewqsdjcfkjxvodkcmadbhdkk end certificate serialnumber aafcbbfedfff import root signed cert created previous step back intermediate backend copy content file probatecrt code vault write hmctsprobateintermediatesetsigned certificateprobatecrt success data written hmctsprobateintermediatesetsigned curl openssl verify content certificate code curl httpvhmctsprobatecapem openssl text certificate data version serial number ecadebecaacae signature algorithm shawithrsaencryption issuer cnhmcts root validity jul gmt jul gmt subject cnprobate intermediate subject public key info public key algorithm rsaencryption publickey bit modulus cceabddcb aacaeedbbeacd output truncated like root configure crl url intermediate code vault write hmctsprobateconfigurls issuingcertificateshttpvhmctsprobateca crldistributionpointshttpvhmctsprobatecrl success data written hmctsprobateconfigurls request certificate establish restriction around certificate generate like key type ttl etc role functionality provided vault code vault write hmctsprobaterolesfrontend keybits maxttlh allowanynametrue success data written hmctsprobaterolesfrontend able issue cert role code vault write hmctsprobateissuefrontend commonnametestprobatehmctsnet ipsans ttlh formatpem key value cachain begin certificate miifjtccawgawibagiuiojkpukzrblmkcmosjijamrmewdqyjkozihvcnaqel bqawgdewmbqgaueaxmnsedvfmgumvdcbdqtaefwxnzamjcxnjundbafwx nzamjgxnjumtbamcixidaebgnvbamtfbybjhdgugswzxjtzwrpyxrlienb consequence demonstrated possible vault certification authority vault pki backend offer enough flexibility adapt product common demand important however highlight value name example doesnt necessarily match current name reform program likewise also important mention document trying provide guidance operate vault last two point outside scope adr covered documentation due extensive nature topic
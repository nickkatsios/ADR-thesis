adr celestianode full node discovery changelog discovery data structure detail bridge node behavior renaynay wondertan author vgonkivs adr intended describe full node discovery celestia node discovery help light full node find full node network specified topicfull soon full node found connection established itfull node added set peerslimitedset httpsgithubcomcelestiaorgcelestianodeissues detailed design peerslimit max amount peer discovered peerslimit discovery combine advertise discover service allows store discovered node type discovery struct storage discovered active peer saved set limitedset libpphost allows connect discovered peer host hosthost libppdiscovery allows advertise discover peer disc corediscovery limitedset thread safe set peer given limit inspired libpp peerset extended remove method type limitedset struct syncrwmutex mappeeridstruct limit int full node behavior node start advertising dht full namespace system boot order found node start finding full node able join full node network soon new peer found node try establish connection case connection successful node call tag peer add peer peer set otherwise discovered peer dropped bridge node behavior bridge node behave full node advertising full namespace also actively findingconnecting full node bridge node perform sampling order reconstruct block since get block data directly core network order increase probability favourable network topology full node connected enough node provide enough share order repair bridge node also actively connect node advertise full example unlikely possible full node partitioned bridge node receive header via gossipsub try reconstruct via sampling header connected enough peer enough share repair bridge node active discovery alleviate potential edge case increasing likelihood full node bridge node connection wider variety share available full node repair light node behavior node start finding full node dht full namespace discoverer interface soon new peer found node try establish connection case connection successful node call tag peer add peer peer set otherwise discovered peer dropped tagging protects connection connmanager trimminggcing peerweight weight discovered peer peerweight number assigned discovered full node connmanager break connection peerweight merged
adr observability changelog initial draft proposed telemetry paramount debugging understanding application performing aim expose metric module core part cosmos sdk addition aim support multiple configurable sink operator may choose default telemetry enabled application track expose metric stored inmemory operator may choose enable additional sink support prometheus battletested simple setup open source rich ecosystem tooling must also aim integrate metric cosmos sdk seamless way possible metric may added removed without much friction gometrics library finally operator may enable telemetry along specific configuration enabled metric exposed via metricsformattextprometheus via api server add additional configuration block apptoml defines telemetry setting toml telemetry configuration telemetry prefixed key separate service servicename telemetryservicename enabled enables application telemetry functionality enabled inmemory sink also enabled default operator may also enabled sink prometheus enabled telemetryenabled enable prefixing gauge value hostname enablehostname telemetryenablehostname enable adding hostname label enablehostnamelabel telemetryenablehostnamelabel enable adding service label enableservicelabel telemetryenableservicelabel prometheusretentiontime positive enables prometheus metric sink prometheusretentiontime telemetryprometheusretentiontime given configuration allows two sink inmemory prometheus create metric type performs bootstrapping operator capturing metric becomes seamless metric defines wrapper around application telemetry functionality allows metric gathered point time creating metric object internally global metric registered set sink configured operator addition sink process get sigusr dump formatted recent metric sent stderr type metric struct memsink metricsinmemsink prometheusenabled bool gather collect registered metric return gatherresponse metric encoded depending type metric either encoded via prometheus json inmemory func metric gatherformat string gatherresponse error switch format case formatprometheus return mgatherprometheus case formattext return mgathergeneric case formatdefault return mgathergeneric default return gatherresponse fmterrorfunsupported metric format format addition metric allows gather current set metric given point time operator may also choose send signal sigusr dump print formatted metric stderr application bootstrapping construction phase telemetryenabled true api server create instance reference metric object register metric handler accordingly func server startcfg configconfig error cfgtelemetryenabled err telemetrynewcfgtelemetry err nil return err smetrics sregistermetrics func server registermetrics metricshandler funcw httpresponsewriter httprequest format stringstrimspacerformvalueformat err smetricsgatherformat err nil restwriteerrorresponsew httpstatusbadrequest fmtsprintffailed gather metric err return wheadersetcontenttype grcontenttype wwritegrmetrics srouterhandlefuncmetrics metricshandlermethodsget application developer may track counter gauge summary keyvalue metric additional lifting required module leverage profiling metric simple func basekeeper mintcoinsctx sdkcontext modulename string amt sdkcoins error defer metricsmeasuresincetimenow mintcoins consequence positive exposure performance behavior application negative neutral reference
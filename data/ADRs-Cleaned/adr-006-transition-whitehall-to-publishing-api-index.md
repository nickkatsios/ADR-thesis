record transition whitehall document publishing api derived search index definition throughout document format refers rummager field format document type provided publishing api contentstoredocumenttype every contentstoredocumenttype mapped single format publishing application directly communicate rummager index document document http api weve removed integration publishing apps except whitehall publisher publishing api notifies rummager every update rabbitmq message queue rummager responds message updating govuk index allowed remove old mainstream index contained sort document beyond normally think mainstream content govuk index rebuilt scratch resending content publishing api see adr detail moving mainstream content govuk index leaf two index populated old way government detailed detailed contains detailed guide government contains everything else published whitehall publisher also separate worker publishingqueuelistener listens link notification publishing api update old index doesnt add new content intend get rid government detailed index rummager index whitehall publisher document govuk index search indexing code removed whitehall publisher old indexing code removed rummager anything libindexer publishingqueuelistener worker infrastructure log indexing request disk also removed since data publishing api resent time consequence document published whitehall publisher also lot information content isnt currently available rummager example state document based archiving policy content audit publishing history detail besides publicupdatedat value content applicable relevant service task list content belongs entity mentioned text page attachment like people organisation place deadline form document indexed publishing api able make better available data improve search single indexing process change easily work also dependency running rummager draft stack support preview behaviour draft taxonomy combining index single index change document frequency statistic affect search result scored action plan copy document asis test making change whitehall publisher copy document government detailed index govuk index document filtered search result indirect impact scoring document run search healthcheck understand impact stage may want reevaluate much format get boosted search query done govuk indexing process extended whitehall publisher format follow process move document type new indexing process see new indexing process process repeated document type group related document type delete old index every document type done check missing document remove old index indexing code see example script checking document indexed correctly
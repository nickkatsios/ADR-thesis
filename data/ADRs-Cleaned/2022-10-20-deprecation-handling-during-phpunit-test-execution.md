title deprecation handling phpunit test execution area core tag phpunit deprecation test stay innovative bleeding edge technology important dont rely deprecated functionality prevents latest greatest version library may include important bug fix performance improvement new feature relying deprecated functionality make continuously upgrading dependency harder lot work remove deprecated usage able upgrade important external dependency also internal deprecation still rely deprecated functionality make removing deprecation hard one opportunity rely phpunit test suite detect usage deprecated functionality continuously remove appear ensure code base always forward compatible solution handling internal external deprecation quite different probably different solution case especially internal deprecation still want ensure continue work deprecated code path also covered test symfonys deprecation helper external deprecation symfony offer tool report deprecation encountered running test inside phpunit bridge enabling symfonydeprecationshelper testsuite ensure deprecation triggered executing test previously could enable also reported deprecation usage internal deprecation also reported deprecation triggered inside external dependency could fix inside shopware since lately feature added ignorefile order ignore specific deprecation regex leverage feature way ignore deprecation cant fix immediately case especially include ignoring internal deprecation handled differently see next section ignoring deprecation inside external dependency ignores commented package triggering remove able update dependency triggering ignoring deprecation would much fix immediately library update lot new deprecation added say dbal renaming big portion public api would much work fix immediately ignore deprecation temporarily create ticket remove deprecation feature flag system internal deprecation internally feature flag system trigger deprecation message throw exception major feature flag activated explained deprecation handling adr already system new unit test suite custom activefeatures annotation allows run single test case specific set feature flag current implementation big drawback feature flag actively enabled lead following problem already test passing deprecation removed rely deprecated behaviour cant check automatically implementation forward compatible default way executing test without major flag activated hard directly see test case cover legacydeprecated functionality safely removed deprecation removed therefore workflow updated following way unit test get executed major feature flag activated activefeatures removed introduce disablefeatures annotation work exact opposite way disabling feature flag passed upside default behaviour test suite newnotdeprecated behaviour deprecated code path treated exceptional case instead way around additionally test relying deprecated behaviour marked disablefeatures annotation easy detect simply remove underlying deprecation removed
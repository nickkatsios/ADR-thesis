driver registration platform caused virtual platform take thwplatform type caused hardware platform file previously driver base class interacted driver registry eliminated work needed user side also complicated base class introduced dependency driver registry driver registry dependency removed driver base class driver instead manually registered hardware platform come related change global driver registry instance part hardware platform virtual platform interface forward call hardware platform virtual hardware platform base class take driver registry template parameter allows defer selection driver registry declare one platform hardwareplatforms perspective dont care static dynamic registry creation cant hardware platform deciding dynamic memory platform set dynamic memory virtual platform base class adjusted forward call hardware platform apis driver registry global singleton virtual platform dont access registry hardware platform created instance kept virtual hardware platform consequence user must manually handle registration driver created user must manually handle deregistration driver destroyed mostly problem unit test platform dynamic discovery user control driver get added registry driver registered multiple time different interface needed create hardware platform file enable user configure desired driver registry type compiletime introduces build complexity user know thing right way would better find way hide user related document please see associated development log detailed information change made part effort
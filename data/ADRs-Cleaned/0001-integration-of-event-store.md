integration event store audit change feed purpose adr proposes solution several longstanding challenge marainworkflow solution currently provide kind audit log message received andor processed neither provide kind history workflow instance work done address latter described github issue associated pull request take approach storing previous version workflow instance time new version stored address audit log requirement allow external actor notified change occurred without feature much harder debug issue workflow instance cant see actionsevents brought current state whilst possible workflow action effect arbitrary change part transition experience implementing workflow led conclusion logic implemented way difference action required part state change action could happen result observing change taken place example expense claim workflow example shown core workflow concept submit transition take place claimant submitted claim approval part transition might require via action appropriate approver identified claim somehow marked thir attention cannot done transition cannot succeed however may also decide want management dashboard allow see statistic expense claim present would implemented adding action various transition update dashboard however core task submitting expense result would happy happen result observing state change take place rather part allowing external service observe state change taken place inside workflow engine act needed allows keep workflow definition focussed core responsibility ensuring model directly related activity also make workflow definition maintainable fewer reason change implement would useful equivalent cosmos change feed mechanism many azure service publish event event grid would allow service react event without explicitly integrated workflow present marainworkflow capable writing extensive log message appinsights hugely useful diagnosing problem led faulted workflow instance however easy way detect workflow instance enters faulted state uibased implementation normally manifest error message user interface followed complaint user longer trigger transition worflow instance faulted instance permitted accept trigger addition simple way detect faulted instance occur would greatly improve ability proactively address problem workflow engine problem addressed introducing following feature persistence event capturing fact workflow instance state change change taken place within workflow engine creation change feed workflow engine writing generic event cover workflow instance creation transition completion faulting update workflow engine reimplement workflow instance event sourcing pattern corvuseventstore integrated provide underlying event store workflow instance considered aggregate root always storage siloed tenant require additional configuration supplied workflow engine per tenant determine event data stored add mean publishing event interested party first instance aim keep simple possible implementing webhook based approach cloudevents standard publish event service statically registered workflow engine allow prove event publishing approach quickly simply future extended solution publish event external messaging system azure event grid service bus consequence complexity change add complexity codebase two area require additional storage event data configured part tenant onboarding additional infrastructure form event grid topic production support present workflow instance enters faulted state way recover manual modification workflow instance document storage event store approach implemented becomes impossible change effected adding event aggregate necessary provide tooling assist identification recovery faulted instance however change also make easier identify faulted instance handling event subscriber event must prepared handle sequence message must idempotent whatever mechanism choose publish event workflow engine adopt position cannot guarantee ordering message cannot guarantee message published exactly due possibility might publish event fail persist fact dispatched
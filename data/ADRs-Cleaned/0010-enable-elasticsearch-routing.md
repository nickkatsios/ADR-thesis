enable elasticsearch routing lazy consensus additional performance testing required adoption query mostly bounded mailbox user easily limit number elasticsearch node involved given query grouping underlying document node routing key without routing key shard execute query coordinator also waiting slowest shard routing key unlocks significant throughput enhancement proportional number shard also possible high percentile latency enhancement request restricted single coordination search request hit single shard opposed non routed search would hit shard shard would return number searched document ordered limited coordination node allows linearly scalable enable elasticsearch routing message indexed mailbox quota ratio indexed user consequence data reindex needed single elasticsearch node shard noticed latency reduction mailbox search mean time percentile reduction reference httpswwwelasticcoguideenelasticsearchreferencemappingroutingfieldhtml jira
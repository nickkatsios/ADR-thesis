object construction improvement deciders gabriel birke abban dunne corinna hillebrand proposed problem statement creating central factory served well drawback outlined adr document exploring way mitigate drawback keeping benefit typesafety architecture based solid principle driver funfunfactory long class many extension point test exposing many instance ideally class branching logic without branching logic test class produce right instance edgetoedge integration test switch web framework layer discontinued silex framework symfony symfony come powerful dependency injection container dic purpose factory considered refactor funfunfactory inject service controller drop funfunfactory create symfony service configuration instead outcome presented dont exclude start end state refactoring reality start injecting funfunfactory without refactoring controller next step swap factory inject service instead defining funfunfactory service creating factory service configuration file time define service service configuration extracting funfunfactory delete pro con refactor funfunfactory moment funfunfactory much provide presentation service controller provide case controller across bounded provide shared service logging notification entity manager bounded could split big factory smaller one presenterfactory controller sharedservicesfactory shared service contextfactory bounded sharedservicesfactory passed dependency could either forgo default symfony application structure trying build controller controllerfactory integrated custom front controller alternatively could inject factory dependency controller good slightly anemic contextfactory class already implemented show dependency better good explicit knowledge layer one smaller public interface good would still typesafety autocompletion everywhere bad interface sharedservicesfactory bad setup hide dependency controller creating service locator antipattern bad grain symfony framework creating mental load try figure symfony without dic component drop funfunfactory symfony dic service configuration good visualize dependency tree instead jumping initialization initialization function good boilerplate code class autowiring define interface concrete implementation good service configuration format offer domainspecific language advanced dependency injection concept like decorating service shared service etc making explicit funfunfactory pattern implicit bad php type system longer make sure inject correct service mitigate linting container configuration bad big bang rewrite crucial part application dont good safety net miss something rewrite highly iterative process pitfall bad lose debuggability longer step initialization process class easy factory mitigate building code branch moved dedicated unittested factory
placement support deciders roleyfoley rossmurry problem statement time hamlet idea placement mechanism dynamically determine resource hosted placement currently part hierarchy state tree resource group within occurrence structure intended allow group resource placed different provider account however number limitation inefficiency stemming hamlet original design prevented full exploitation placement concept assembly solution engine run focus template run single segment generation account template different concept product template maintenance critical configuration information environment account mapping external cmdb introduction dynamic cmdb loading input pipeline processor full cmdb qualification present opportunity address long standing issue complete implementation placement support question driver reuse existing concept way thing much possible given cmdb configuration information necessary deploy product considered adr extends made adr layer level deployment provides design detail primarily enrichment link semantics outcome chosen extend link semantics address driver best see aligns adr previously made positive consequence reduced configuration complexity everything one place better validation configuration link proven flexible expect proposed change repurposed thing future straightforward transition process infrastructure place negative consequence expansion semantics existing concept may harder document understand explain dedicated new concept design detail new link semantics currently link one occurrence solution another within solution solution build existing link processing adding support link target occurrence another solution follows link target occurrence within solution link consists two part attribute identify district solution attribute identify occurrence within solution occurrence within solution identified standard set link attribute tier component subcomponent instance version thus attribute must present link inherited occurrence link configured subcomponent attribute replaces type specific attribute port optional type attribute added ensure link named subcomponents resolved value desired component type link target side effect link type attribute added document expectation type intended target allowing misconfigured link identified case district type configured via districttypes plugin directory directory idftl file define district type districttype name defines ordered set layer identify district solution turn input filter attribute associated layer attribute link identify layer within district order resolve link desired district must known value layer identifying district solution must known identify district link must districttype attribute whose value match name one known district default value self mean link district type associated solution link originates initial implementation following district type defined shared provider indicated layer ordering segment product environment segment account account tenant tenant way link inherit occurrence identifier source component inherits layer identifier source solution link indirection supported optional linkref attribute within link object present link attribute merged resolved link resolved link taking precedence permit user linkref still control attribute includeincontext linkref resolution recursive linkref resolve link containing linkref attribute value linkref attribute attribute name linkrefs configuration object attribute value desired link definition linkref definition provided via linkrefs attribute within blueprint via solution product tenant layer configuration effective target link generated merging match order permitting partial definition different layer usual precedence order applying blueprint configuration module inject linkref definition blueprint override layer based definition linkref attribute provide convenient mechanism centralise qualification link shared across multiple component commonly case placement new component also introduces two new component subscription hostingplatform subscription subscription component represents provider specific mechanism purchasing hosting capability account aws subscription azure external namespace flag attribute involved importing component subscription component support importation identifier provider well provider specific identifier subscription deployment framework default subscription component typically tenant district type solution also component location information see connect another subscription example master account aws subscription component support importing externally created subscription well creation via hamlet mixed usage expected common master account aws created externally subsequent account created via subscription component hostingplatform hostingplatform component represents place within subscription resource physically deployed engine attribute hostingplatform determines type hosting provided initially engine value region permit placement resource within region subscription hostingplatform component typically within account district type solution engine type region region value must provided hostingplatform component relies component location information see provide detail associated subscription thus least one subscription must defined order hostingplatform component example usage aws azure would normal see component account district type solution instance region active account also likely component within account district type solution registry would also link component order establish account solution resource deployed deploying based registry region would provided command line select desired template generate hostingplatform determine given registry included see resourcegroup placement location occurrence attribute component solution support deploymentlocations attribute purpose provide mechanism component document requirement information related placement component location represented key within deploymentlocations attribute key mandatory link attribute location included metadata resourcegroups defining component type specify location mandatory optional component type targetted link permit location information checked completeness occurrence attribute deploymentlocations attribute populated directly component maximum granularity equally configured via deploymentprofiles enforced via policyprofiles also give ability location varied based component type example select different registry general expected linkref location link centralise qualification example differentiation nonproduction production environment placement resourcegroup placement placement resource group done way location name resource group target location reflect information needed component implementation common example link region based hostingplatform occurrence case occurrence expected offer provider account region deploymentframework attribute location time location expected selection registry code sourced current baseline network processing could also merged location processing perhaps predefined value baseline network standard set based linkrefs offered component requiring would still declare validation documentation purpose assessment good reuses existing concept layer district type solution good improves documentation dependency requirement component good placement information contained within cmdb bad degree expertise deployment profile advanced fature required advanced case
adr http transport middleware approved flashheart although useful become difficult maintain extend due feature coupled client httptransport mitigates middleware extend rest client behaviour middleware comparable plugin based artitecture allows user add change behaviour without make change core client conforms openclosed principle decided koa middleware via koa compose library rather creating custom implementation opted library well tested library extensively production environment aid implementation caching layer see example familiar syntax expresskoa support asyncawait example middlware stack async function middlewarectx next const req ctxres handle request await next invokes next middleware const ctxres handle response etc async function middleware async function middleware register httptransport usemiddleware usemiddleware usemiddleware would unwind stack way expresskoa middleware middleware middleware http request middleware middleware middleware http response aid module caching transformation caching middleware function modifyheadersreq next function rediscachereq next httptransportusemodifyheaders userediscache middleware execution order modifyheaders rediscache http request modifyheaders rediscache http response ensures caching module cache request enters pipeline requires minimum amount processing recreate cache key despite transport modifying terminating middleware chain terminating chain achieved suppressing call next async function cachingmiddlewarectx next const req ctxres iscachedreq return await next call next middleware allowing chain continue const ctxres handle setting caching response consequence support node ability existing middleware party module developmentmaintenance required middleware library flexibility via middleware rather limited signiture like req next control execution order middleware chain request handling easily terminated due recursive call stack response handling terminated however queried conditional response handling required
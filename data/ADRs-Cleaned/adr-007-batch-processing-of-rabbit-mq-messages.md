record batch processing rabbit message definition refers elasticsearch result adr process data rabbit insert search index process work expected scaling issue large volume message arrive publishing api sit sidekiq queue waiting processed two scenario result large queue size republishing publishing api something want support moving forward ultimately would like ability rebuild search index scratch change reference material department name taxon require associated document updated currently process sends message rabbitmq sent sidekiq processed index message currently consists single document updated search index know cause bottleneck performs balancing work insert reason documentation recommends bulk insertion data rather individual document already implemented following item support batch processing handling batch message rummager processor requeues message fail update batching message read rabbit govukmessagequeueconsumer done initial testing new batch processor following result current process processing message time approx document employmenttribunaldecision format new process processing message time second timeout approx document employmenttribunaldecision format new process bulk processing message time second timeout top format approx document dont see increase error dependant apps mean arent blocking consumer application result increasing throughput observed number sigterm exception worker process sentry unexpected action plan following item completed rolled investigate cause sentry sigterm error test document correctly republished ideally renaming index republishing comparing consequence processing bulk reduce processing time index document move step closer able rebuild search index regular basis would insure drift sync publishing api time
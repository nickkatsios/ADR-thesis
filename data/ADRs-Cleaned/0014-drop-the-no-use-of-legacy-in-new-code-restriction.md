drop legacy new code restriction originally prestashop made mainly static class dependency injection address problem decided non namespaced code would progressively refactored core namespace would contain code dependency injection furthermore core code wouldnt allowed depend directly non namespaced class could indirectly mean adapter class would act bridge new old code direct dependency core legacy rule led evergrowing collection adapter resulted greatly increased code complexity duplication case service legacy adapter core implementation subtle difference one furthermore constraint backward compatibility increase difficulty refactor code core surface public api larger following applies core prestashopbundle class referred core shortness new core class placed either core prestashopbundle namespace following rule established previously new class must added adapter namespace added legacy root namespace core class may depend instance legacy class provided following rule respected legacy class may either injected parameter constructed within caution must exerted legacy class produce side effect global state dont guarantee internal consistency case class accessed dedicated service enforce consistency core class must call static method class except factory method stateless tool method within service dedicated encapsulate static class core class may access data provided static class method static class relying dedicated service application service repository data provider core class must reimplement code found legacy class without deprecating original methodclass optionally making rely new implementation adapter namespace must phased eventually class adapter namespace must copied core namespace original adapter class must emptied made extend core class deprecated fully removed following major adapter service must deprecated copied core namespace well code must depend adapter class service consequence refactoring become easier complexity code duplication reduced hand harder refactor legacy class without introducing breaking change
ref facet parsing draft json schema draft indicates ref entry keywords alongside departure previous draft didnt allow validation result ref must anded validation facet similar allof oneof others avoid creating new field model reference would confusing client would take account field particular ocasions instead decided ref keywords beside parsed allof shape case standalone ref json map ref entry single entry map ref parsed link returned json type object property name ref somewhere ref adjacent keywords original json type object ref somewhere property name type string transformed json type object allof ref somewhere property name type string ref adjacent keywords allof original json type object ref somewhere property name type string allof ref somewhereelse transformed json type object allof ref somewhere ref somewhereelse property name type string consequence json schema emitted shape may allof previously hadnt could fixed emission isnt necessary validation emission wont modified draft json schema ref likely wont able cycled constraint amf model directly related json schema allof facet validation error message draft may change due transformation
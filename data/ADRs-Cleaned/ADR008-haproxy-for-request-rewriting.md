want serve hsts header http request apps domain safeguard existing user mitmed insecure connection improve user experience click hostname doesnt protocol note without preloading browser wont help first time user want leave open able override header tenant application wish feature requires conditionally process modify request header several possible implementation implement logic gorouter gorouter shall process add header required supporting specific hsts header allowing configure sort behaviour default value allow inject additional header missing current gorouter implementation support feature require added add intermediate proxy example nginx haproxy front gorouters elb implement external cdn front paas origin paas entry point commercial cdn capacity add additionally header conditionally aws elb support logic short term consequence cannot solve problem want add additional logic cdn optional part platform try keep simple possible consider optional solution would implement logic gorouter requires development effort merged upstream implement short term second proxy front gorouter implement haproxy front router haproxy default solution official distribution really powerful good support enough feature cover setup colocated gorouter proxying directly localhost ssl termination haproxy plain text gorouter two service colocated reuse code official haproxy job cfrelease although fork add additional setting haproxy configuration future work implement propose add logic gorouter allow define additional header consequence positive able easily add logic rewrite http communication application haproxy haproxy ssl termination better performance gorouter although low impact elb terminating end user connection keep alive connection gorouterhaproxy haproxy support websockets http multiplexing implement http http redirect haproxy negative add additional latency every request maintain custom haproxy release another moving part monitor take account see also adr
hexagonal architecture cqrs enough feature repo see shape take well aim refactoring towards hexagonal architecture command event way communicate core domain something like key diagram box represents least one yarnnpm package arrow drawn indicate dependency green indicates weve already created building package amber indicates code still factored design handdrawn line indicate bounded agreement communication core domain via command domain event command going domain asynchronous application layer client port abstract away watching domain event indicate command completed wont event sourcing domain model probably persist domain event log client port mediate query straight git stream file web may keep cache read model shaped representation needed api hence separate bounded consequence design enables handle known anticipated future requirement cleanly quickly time move existing code design ready absorb new feature still figure shape abstraction around task scheduler specific port build someting around event repoindex currently based folder disk move postgres incoming webhooks port still much pull yet model asynchronous behaviour command repos different state model tracking completion command return commandid client thats mentioned event maybe
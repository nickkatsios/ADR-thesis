layout page title channellifecycle applying config reconnection loop deciders aaron mcgrath lewin chan paul higginson sebastien belin problem statement recorded interlok interlok attempting reconnect endpoint becomes difficult amend configuration reconnect loop dictated reconnection setting configured connection connection initialized cannot connect endpoint reconnect loop begin connection initialized startup runtime lose connection interlok shift connection lifecycle phase initialised therefore two trigger issue connection cannot established startup connection break runtime connection either established connection reached maximum number configured reconnect attempt connection remain initialization phase phase interlok component dictated statemanagedcomponent interface defines basic stage init start stop close request change component state init start example typically synchronize state change complete mean example interlok launch initialization phase kick attempt initialize connection connection cannot established mentioned stay synchronized init phase potentially forever phase transition synchronized cannot therefore change state current transition completed currently two problem applying configuration connection attempting reconnection applying config request restart running instance attempt run lifecycle phase mentioned course connection stuck synchronized initialization phase trying reconnect state change request must wait therefore process hang second problem applying config simply process wait interlok process completed full startup course able connection cannot established essentially process hang period time considered first issue nothing remove synchronization interrupt blocking transition second issue nothing non blocking apply config outcome first issue chosen yet decided nothing case accept people modifying production ready instance even probably therefore going run issue raised remove synchronization couple way first would literally remove synch block implementation like one java public final void init throw coreexception synchronized lock prepared prepare initconnection lifecyclehelperinitconnectionerrorhandler second way would wrap actual work inside synch block new thread consequence allowing process request state change middle previous state change could cause undefined behaviour especially around edge case interrupt blocking transition essentially would stop transition currently running case reconnect inside initialization phase transition done couple way first could make sure thread handling initialization transition named managed thread threadmanagerfactory add new static method factory would send interrupt named thread considering reconnect code could refactored parent connection impl could cover connection reconnect ability extend allowsretriesconnection make sure reconnect code exists parent class new volatile variable get set close request made reconnect loop could check value exit necessary second issue chosen yet decided nothing case deem current hanging behaviour expected correct nonblocking applying config case change would made application config would request full restart necessarily wait running instance complete full startup would either kind notification interlok completed startup user would directed dashboard
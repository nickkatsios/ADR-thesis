manage shortlived access token test implemented vcr gem part testing suite gem allows record test suite http interaction replay future test run fast deterministic accurate test interaction saved yaml file cassette part specfixtures folder committed repository vcr allows filter sensitive information cover data returned body get shortlived access token returned body part oauth flow find way ensuring exposed get access sensitive data whilst test run anonymised dataset dont want risk possibility someone able engineer way undoing seeing real data main making github repository private gitcrypting vcr cassette folder adding vcr cassette folder gitignore vcr instead way mocking external call test making github repository private contradicts commitment coding open eventually opening previously closed repository often risky hard prioritise encrypting vcr cassette folder would effectively mean making portion repository private three criterion keeping code closed publishing key credential algorithm related detecting fraud anything around unreleased policy situation meet criterion full documentation related open source code guidance found adding vcr cassette folder gitignore would mean could continue make gem local development circleci workflow apis actively developed important catch change early possible therefore developer rerecord cassette start feature check change reuse speed test cassette dont get committed github access token exposed circleci continue run test normal whilst anyone access project cannot see content cassette lastly vcr gem something like webmock mock every api call test suite however issue api documentation wouldnt necessarily know expect response also mock call might change werent aware find late development process whereas actually making call cause test fail let investigate add vcr cassette folder gitignore change vcr config allow recording mode added rerecord cassette newepisodes append cassette new call made record reuse consequence remove risk shortlived access token exposed publicly continue vcr local development keep test speed low possible also continue vcr cicd workflow circleci regard circleci mean circleci project environment variable include credential authenticating important note test making external network call may increase build time flakiness likely address concern later pragmatic approach help move forward
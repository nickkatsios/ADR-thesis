azure pipeline security model proposed adr defines approach pipeline security management process itt enables application deployment pipeline perform task associated deployment typical azure paasbased solution way adheres principle least privilege support oversight audit requirement importantly process making security change utilises standard development workflow allows team manage configuration minimal friction whilst still facilitating centralised oversight needed security team describing process detail sort task application deployment pipeline typically able perform create resource target subscription perform arm role assignment target subscription query azure active directory aad existing application service principal create new aad application service principal manage aad application service principal application role assignment deletion etc let start outlining requirement commonly achieved today create resource target subscription default service connection azure pipeline authenticate azure already provide constraining access given resource group perform arm role assignment target subscription enabled automated approach typically achieved one following granting identity behind service connection owner role target subscription separate identity required permission whose credential available pipeline manual scenario raising service desk ticket asking someone permission query aad existing application service principal main pipeline restructured expect required information provided manuallymaintained configuration create new aad application service principal enabled automated scenario commonly handled one three way entirely separate pipeline running different identity necessary permission considered fullyautomated dependent pipeline able trigger pipeline ondemand running subset main pipeline different identity necessary permission task require elevated privilege run manual scenario outofband process whereby individual appropriate permission executes necessary step either manually script manage aad application service principal largely equivalent preceding create scenario addition dependency query aad requirement permission update application principal owned others created separately note functionality may run multiple time case evolving application particularly scoping permission applied pipeline running azure devops executing pipeline azure resource manager type service connection authenticate azure task perform configuration model defines security requirement service connection maintained git repository separate pipeline applies configuration azure note yaml fragment would exist individual file git repo logical folder structure help organise reflect ownership required across development team product etc fragment maintains shared configuration defines permission azure devops service connection managed system azurerm customrole name acmeazuredeployer allowedactions microsoftauthorizationroleassignmentsread microsoftauthorizationroleassignmentswrite microsoftauthorizationroleassignmentsdelete requiredroles contributor acmeazuredeployer azuread requiredgraphpermissions aebfbaffaaffd readdirdatapermissionid cebefeefddefdb manageownappspermissionid defines logical environment part application release promotion associated azure subscription environment name dev subscription name test subscription name prod subscription defines applicationsystem deploys resource across resource group requires service connection environment name producta environment dev test prod resourcegroups productaservices note relies naming conventionbased expansion acmeproductaservicesrg acmeenvironmentproductadatarg note simpler token replacement approach defines applicationsystem deploys resource single resource group requires service connection environment name productb environment test prod resourcegroups acmeenvironmentproductbrg security management pipeline running azure devops able read configuration model performs following task ensure least privilege azure devops service connection maintained per application per environment ensures required resource group exist maintains custom role grant elevated permission maintains set assignable scope resource group maintains required aad service principal assigns specified role aad service principal required resource group scoping constraint assigns required aad permission service principal pipeline run highlevel permission therefore must tightly controlled ensure elevated right exploited azure devops project user access outside responsible team privileged service connection available within restricted project requires explicit authorisation new pipeline pipeline trigger change master branch master branch protected cannot directly committed anyone wishing make change configuration must raise pull request subject reviewapproval policy least responsible team consequence positive development team development team benefit highly autonomous pipeline fullysupport deployment give familiar way manage security requirement solution evolve security team team responsible security released directly support securitysensitive pipeline operation without cede control instead review approval responsibility security change complete operational control security management pipeline security management pipeline operates desired state basis therefore aim correct drift security configuration may occurred since last run finally versioncontrolled configuration provides full audit trail pipeline access resource negative given large enough security configuration repository duration single run security management pipeline could extend point becomes pain point though parallelisation strategy ought mitigate security management pipeline would become single point failure event fall broken state whether bad configuration data azure devops environmental issue development team would blocked creating updating service connection deletion renames made security configuration model require complex synchronisation logic pipeline credential keyrotation policy aad service principal would require associated azure devops service connection kept insync approach address
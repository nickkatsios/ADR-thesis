clean architecture writes log applied cqrs style see adr decide handle writing operation command clean architecture handle command layer api layer application service layer infrastructure layer domain layer add domain layer domain logic complex want isolate logic stuff like infrastructure api isolation domain logic support testing maintainability readability consequence complexity whole solution higher add two layer domain infrastructure complexity implementation business logic smaller focus business concern layer complexity implementation infrastructure smaller focus infrastructure concern layer business logic testable reference layer business logic independent persistence level domain layer level abstraction close business application layer louse coupling domain layer infrastructure layer depend abstraction one popular application architecture developer familiar
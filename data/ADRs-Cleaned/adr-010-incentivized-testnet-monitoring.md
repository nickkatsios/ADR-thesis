adr incentivized testnet monitoring changelog started add section monitor celestianode grafana cloud add section monitor celestianode uptrace add section send data http revise architecture minimize celestia managed component add section doesnt celestia team host otel collector node operator rename section actor run otel collector incentivized testnet update diagram add scenario add actor run otel collector incentivized testnet adding telemetry celestianode instrumenting codebase metric see adrtelemetry report metric enabled celestianode celestianode push metric via otlp exporter otel collector instance would like make metric exported celestianode actionable making queryable internal grafana dashboard additionally want subset metric queryable public incentivized testnet leaderboard frontend would like make possible node operator monitor node existing telemetry tool grafana uptrace document proposes strategy making data available internal grafana dashboard public leaderboard additionally describes node operator deploy configure otel collector instance detailed design export data grafana query data multiple data source document explores two data source prometheus opensource time series database written prometheus promql query language deploy prometheus hosted prometheus provider google aws grafana etc prometheus pullbased mean service would like expose prometheus metric must provide http endpoint metric prometheus instance poll see instrumenting application prometheus prometheus cosmos sdk telemetry tendermint telemetry one major benefit prometheus metric emitted celestiacore celestiaapp celestianode share database influxdb another opensource time series database written free deploy influxdb commercial offering influxdata provides clustering onprem deployment influxdb influxql query language appears capable advanced query promql article influxdb pushbased mean service push metric directly influxdb instance ref see prometheus influxdb detailed comparison alternative data source evaluated please share agreed prometheus time export data otel collector exporter provide way export data otel collector supported destination configure otel collector export data prometheus like yaml exporter data source metric prometheus endpoint prometheus namespace default must additionally enable exporter via configuration like yaml service pipeline metric exporter prometheus otel collector support exporting influxdb still beta see influxdb exporter query data prometheus grafana order query prometheus data grafana must add prometheus datasource step outlined query data prometheus incentivized testnet leaderboard prometheus server expose http api querying metric see doc implementation detail incentivized testnet leaderboard yet known likely built external vendor two possible implementation incentivized testnet dedicated backend query http api incentivized testnet dedicated backend frontend query prometheus directly exists typescript library prometheusqueryjs may helpful node operator monitor node node operator adding additional exporter otel collector configuration order export multiple backends may useful node operator want configure alerting metric emitted node minimal guide node operator collect telemetry node follows monitor celestianode grafana cloud install celestianode sign account grafana install otel collector machine celestianode linux machine follow step otel collector start automatically immediately installation configure otel collector receive metric celestianode confirming etcotelcolconfigyaml default config yaml receiver otlp protocol grpc http start otlp receiver port grpc http celestianode default emit http metric localhost deployed otel collector machine celestianode preserve default config configure otel collector send metric prometheus cloudhosted grafana add something like following etcotelcolconfigyaml yaml exporter prometheusremotewrite endpoint httpsprometheusprodeuwestgrafananetapiprompush configure otel collector enable otlp receiver prometheusremotewrite exporter etcotelcolconfigyaml yaml service pipeline metric receiver otlp exporter prometheusremotewrite see article detail may specify port endpoint like endpoint httpsuserpasswordprometheusblocksproduscentralgrafananetapiprompush restart otel collector sudo systemctl restart otelcol monitor otel collector started correctly systemctl otelcolservice confirming error journalctl grep otelcol grep error start celestianode metric enabled celestia light start coreip httpsrpcmamakipopsone metric verify metric displayed grafana optional import opentelemetry collector dashboard grafana monitor otel collector monitor celestianode uptrace install celestianode create account uptrace create project uptrace follow step install otel collector contrib host celestianode configure otel collector contrib based configuration section uptrace doc ensure selected newly created project dropdown youd like collect trace metric add metric section servicespipelines yaml service pipeline metric receiver otlp processor batch exporter otlp restart otel collector contrib sudo systemctl restart otelcolcontrib check otel collector contrib running sudo systemctl otelcolcontrib confirm error sudo journalctl otelcolcontrib encounter journal file found reference stackoverflow post start celestianode metric trace enabled celestia light start coreip httpsrpcmamakipopsone tracing metric navigate uptrace create dashboard confirm see metric host prometheus instance hosted provider currently host prometheus instance digitalocean host mamakiprometheus development however cloud hosted prometheus provider take responsibility running upgrading scaling prometheus instance see ossvscloud although multiple hosted provider exist propose grafana cloud hosted prometheus time host grafana instance hosted provider already host grafana instance digitalocean host mamakiprometheus propose grafana cloud hosted grafana time due tight integration grafana cloud prometheus host separate prometheus instance per case one internal dashboard one public leaderboard prometheus doc state following regard denial service mitigation place excess load expensive query however many expensive queriesmetrics provided component fall likely component accidentally taken trusted user malicious action concerned public leaderboard crashing prometheus instance internal dashboard may want host two separate instance seems feasible configuring otel collector export two different prometheus instance one way door suggest sticking one instance grafana cloud guarantee uptime actor run otel collector incentivized testnet scenario node operator pro deployment architecture representative mainnet full storage node operator run telemetry stack monitor node exposing node operator otel collector incentivized testnet allows practice deployment architecture incentivized testnet prior mainnet node operator incentive maintain high uptime otel collector con additional operational burden incentivized testnet participant mitigate concern providing easy install step script scenario celestia team pro easier node participate deploy one piece software celestianode two celestianode otel collector con time cloud managed offering otel collector minimal documentation scale workload individual otel collector handle wed design operate highly available otel collector fleet maintain high uptime node operator wed also mitigate ddos attack otel collector endpoint cursory investigation scenario node operator default celestia team fallback pro optionality node operator dont want deploy otel collector rely besteffort otel collector provided celestia team con increase cognitive load node operator additional deployment time increased operational burden celestia team incentivized testnet beyond scenario celestia team default node operator want diagram pro con scenario scenario differs scenario doc node deployment doc specify celestia team managed otel collector endpoint default node operator want selfmanaged telemetry doc contain step setup node operator managed agent otel collector proxy metric celestia team managed gateway otel collector doc may also contain step connecting agent otel collector prometheus grafana agreed scenario time doc describe connect celestia team managed otel collector metricsendpoint doc also include advanced guide node operator wish deploy selfmanaged otel collector node operator able configure celestianode export multiple otel collector supported opentelemetryopentelemetrygo mean node operator configure one otlp backend node wish export metric multiple otel collector must route traffic agent otel collector deployed agent otel collector forward metric otel collector access mitigate ddos attack otel collector httpsmediumcomopentelemetrysecuringyouropentelemetrycollectoraffabdf authentication server keycloak handle oauth service remote otel collector httpsmediumcommichaelericksensecuringyouropentelemetrycollectorupdatedfea also authentication server keycloak run service docker mitigate ddos attack prometheus possible create api key metricspublisher role cloud hosted prometheus api key distributed participant expected remote write prometheus send data http otel collector prometheus http default additional configuration needed besides copying remote endpoint grafana cloud otel collector uptrace http default additional configuration needed besides copying data source name uptrace celestianode otel collector public certificate case otel collector running different host celestianode otel collector must configured public certificate celestianode send data http ensure celestianode doesnt withinsecure constructing otlptracehttp client configure otel collector receiver run certificate key certificate generated letsencrypt example yaml receiver otlp protocol grpc http endpoint otelcollectorcelestiaobserver certfile homefullchainpem keyfile homeprivkeypem celestianode otel collector without public certificate case node operator want send data celestianode otel collector without public certificate nodeoperator managed otel collector issue selfsigned certificate order send data http alternatively send data http follow step setting certificate configure otel collector receiver run selfsigned certificate example yaml receiver otlp protocol grpc http certfile homecertpem keyfile homecertkeypem ensure celestianode run config contains root created step see sample code resource requirement otel collector official resource requirement stated otel collector doc however performance benchmark indicate otel collector able handle trace unit unclear cpu ram given light node run cpu ram seems feasible run otel collector agent resource constrained target hardware proposed reference httpsgithubcomcelestiaorgcelestianodepull httpsgithubcomcelestiaorgcelestianodepull httpsopentelemetryiodocscollector httpscelestiateamslackcomarchivescqajvlhkp httpswwwnotionsocelestiaorgtelemetrydashboarddacaeebaebfb httpswwwnotionsocelestiaorgtlsfortelemetryceeabeededc httpslightstepcomopentelemetrycollectingandexportingdataopentelemetrycollector
database migration designed zero downtime see also adr database migration standalone release system designed zero downtime careful dont change database way cause production issue possible avoid database migration lock database significant amount time hard enforce make sure documentation project readme way achieve mostly affect index creation change several year data database adding changing index slow general create index concurrently let index created nonblocking way see httpswwwpostgresqlorgdocscurrentstaticsqlcreateindexhtml want alter index reindex cant concurrent case youll look stopping event recorder lambda allowing message queue index change made beware however sqs queue allow message peak load historically sent message hour somewhat limited amount time run change complex change consider dropping index running create index concurrently rather altering index generally report run intermittently safe index period time data still appended problem performance testing change large fake dataset available simulate production database test environment duplicating database could apply change new database containing copy production data switch database migrate missed change old database new transactional ddl change postgresql schema change made transactionally great feature allows making multiple change roll back something wrong example begin alter table fizzbuzz rename column foo bar update table fizzbuzz set foo splat commit case update fail column rename reverted however note create index concurrently work transaction depends able change table incrementally doesnt fit transaction model index creation fails recommended drop index recreate wont rolled back may partially created avoiding blocking change useful table article ive reproduced article may disappear run concurrently select insert update delete create index conc vacuum analyze create index create trigger alter table drop table truncate vacuum full select insert update delete create index conc vacuum analyze create index create trigger alter table etc report select operation wont block event recorder however insert data cant run index modification change apart create index concurrently without risking blocking note however change may fast enough despite blocking adding column example however performance test change productionsized database sure consequence practice ensure database change dont put production system risk however may require extra work especially making sure people follow guideline
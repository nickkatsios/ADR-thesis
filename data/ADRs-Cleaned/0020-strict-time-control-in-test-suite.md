strict time control test suite proposed number test section code make one following assumption time move perceptibly statement time move perceptibly statement record sorted creationorder createdat timestamp test written today pas given day year timecop specific test setup enough control time throughout stack assumption opposition one another none universally true lead flakey andor timebomb test proposition restore order must strictly control application clock test suite mean cannot allow clock run freely must robustly reset time known value test also freeze time default move time consciously needed wei created timecop wrapper called testsuitetimemachine provides slightly higherlevel api controlling time test api guidance pretenditisdatetime start test suite soon possible test setup set baseline whole test suite run travelpermanentlytodatetime set time start test needed affect test per test traveltemporarilytodatetime temporarily travel time within test affect test many time needed within test commonly temporarily move back time specific test setup advancetimetoadvancetimebyduration move time forward within test affect test many time needed within test mostly jump forward specific point time test behaviour system point advance move time forward one second many time needed within test commonly ensure createdat timestamps increment expected series record creation reset reset time baseline end test handled circumstance unfreeze allows clock move forward naturally current time sparingly test specifically testing behaviour system time pass reverttorealworldtime unstubs time entirely allows system clock move naturally infrequently ever pro confident test pas given day year provided natural way moving time forward key point test progress reveal code unwittingly dependent precision timestamps andor risk race condition externally control presumed time test suite allow run test suite multiple important deadline well sweep ahead timesensitive test running suite rolling period future remove coupling timecop con update lot test new api replace timecop coupling new coupled coupling testsuitetimemachine wrapper may extracted gem future think carefully effect time test write write code make assumption passage time relation creation record
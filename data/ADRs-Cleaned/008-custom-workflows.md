custom workflow author luontola background original idea workflow handler power anything would enough fit various organization way working found bureaucratic reason organization want restrict handler example application come one person backandforth applicant application ready application forwarded official either approve reject application case handler cannot approvereject application also application never closed always official thus arose custom workflow prototype calculatepermissions function since renamed applicationpermissionsview control mapping user role allowed command modifying allowed command produce different kind workflow poc multiple distinct workflow first idea multiple calculatepermissions function one workflow flexible solution result quite much duplication duplication scale linearly number command prototype fcbbefc poc master workflow command whitelistblacklist second idea one master workflow contains command command whitelistedblacklisted derive restricted workflow organization approach may require creating variation command organization choose variation fit prototype aebafddfcaffdea poc command variation requestfinaldecision avoided granting approve reject decide permission requestdecisions decider role filtering unwanted permission let proceed master workflow command whitelist approach seems produce duplication approach flexible enough create command variation hard case choose whitelist instead blacklist even though blacklist would shorter write run risk exposing unwanted command new command added
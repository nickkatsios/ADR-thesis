invalidate parsercache backwards incompatible frontend change adr change markup entity page made often end outdated content parsercache result user facing error either backend code attempting perform processing parsercache output frontend javascript attempting access part dom changed example backend attempting fill placeholder doesnt expect frontend looking newly introduced dataattribute isnt present historic parser cache entry distant past solved problem introducing custom rejectparsercachevalue hook operationsmediawikiconfig httpsgerritwikimediaorgrcoperationsmediawikiconfig reject cache entry made deployment time weve also done stage leaving invalid entry cache avoid increased load marking entry invalid worked past typically applied discovering problem even way gradually reject historic invalid cached result user facing error time record thing impact parseroutput content version code generate parseroutput parser parser marked generating parsercache key rejectparsercachevalue two version parseroutput content cannot coexist backwards compatibility possible way split parsercache old new version example trialled introducing new mobile termbox see httpsgerritwikimediaorgrcmediawikiextensionswikibase event tracking new part code doesnt currently corresponding may necessary ensure introduced parseroptions calculate parsercache key determined existing cache entry thus introducing new key new key value custom rejectparsercachevalue hook may still required see httpsgerritwikimediaorgrcmediawikiextensionswikibase example already exists hasnt last year entitycontent entityhandlerparserversion may useful change however currently applies entity general usually make change one type entity time needed consequence followed avoid user facing error making breaking frontend change able serve without additional hack current old version parsercache output mean test feature gradually roll feature across entity revert broken feature however feature suddenly turned user entity may see spike parsercache size application server load initially always miss cache therefore big bang breaking change done caution gradual rollouts preferred
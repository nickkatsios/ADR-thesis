adr rosetta api support author jonathan gimeno jgimeno david grierson senormonito alessio treglia alessio frojdy dymylja fdymylja changelog external library cosmosrosettagateway moved within cosmos sdk rosetta api opensource specification set tool developed coinbase standardise blockchain interaction standard api integrating blockchain application easier user interact given blockchain allow exchange integrate new blockchains quickly easily enable application developer build crossblockchain application block explorer wallet dapps considerably lower cost effort clear adding rosetta api support cosmos sdk bring value developer cosmos sdk based chain ecosystem implemented key driving principle proposed design extensibility must riskless painless possible application developer setup network configuration expose rosetta apicompliant service long term support proposal aim provide support supported cosmos sdk release series costefficiency backporting change rosetta api specification master various stable branch cosmos sdk cost reduced achieve delivering principle following package rosettalib implementation core rosetta api feature particularly type interface client offlineclient separate design implementation detail server functionality independent cosmos sdk version onlineofflinenetwork exported implement rosetta api client interface query node build error package extend rosetta error due difference cosmos release series series specific implementation client interface two starting api service application api share application process apispecific process architecture external repo section describe proposed external library including service implementation plus defined type interface server server simple struct started listens port specified setting meant across cosmos sdk version actively supported constructor follows func newserversettings setting server error setting construct new server following setting define rosetta server setting type setting struct network contains information regarding network network typesnetworkidentifier client online api handler client crgtypesclient listen address handler listen listen string offline defines rosetta service exposed offline mode offline bool retries number readiness check attempted instantiating handler valid online api retries int retrywait time waited retries retrywait timeduration type package type mixture rosetta type custom defined type wrapper client must parse return executing operation interface every sdk version different format connect rpc grpc etc query build transaction abstracted client interface client rosetta type whilst onlineofflinenetwork take care returning correctly parsed rosetta response error cosmos sdk release series client implementation developer implement custom client required client defines api client implementation provide type client interface needed client perform action connecting bootstrap error ready check servicer constraint query satisfied example node might still ready useful process rosetta instance might come node servicer must return nil node ready ready error data api balance fetch balance given address height nil balance displayed provided height otherwise last block balance returned balancesctx contextcontext addr string height int typesamount error blockbyhashalt get block transaction provided height blockbyhashctx contextcontext hash string blockresponse error blockbyheightalt get block given height height nil last block returned blockbyheightctx contextcontext height int blockresponse error blocktransactionsbyhash get block parent block transaction given block hash blocktransactionsbyhashctx contextcontext hash string blocktransactionsresponse error blocktransactionsbyhash get block parent block transaction given block hash blocktransactionsbyheightctx contextcontext height int blocktransactionsresponse error gettx get transaction given hash gettxctx contextcontext hash string typestransaction error getunconfirmedtx get unconfirmed given hash notefdymylja implemented yet getunconfirmedtxctx contextcontext hash string typestransaction error mempool return list current non confirmed transaction mempoolctx contextcontext typestransactionidentifier error peer get peer currently connected node peersctx contextcontext typespeer error return node sync data version etc statusctx contextcontext typessyncstatus error construction api posttx post txbytes node return transaction identifier plus metadata related transaction posttxtxbytes byte typestransactionidentifier meta mapstringinterface err error constructionmetadatafromoptions constructionmetadatafromoptionsctx contextcontext mapstringinterface meta mapstringinterface err error offlineclient offlineclient defines functionality supported without access node type offlineclient interface networkinformationprovider signedtx return signed transaction given byte msg plus signature signedtxctx contextcontext txbytes byte sigs typessignature signedtxbytes byte err error txoperationsandsignersaccountidentifiers return operation related transaction account identifier transaction signed txoperationsandsignersaccountidentifierssigned bool hexbytes byte ops typesoperation signer typesaccountidentifier err error constructionpayload return construction payload given request constructionpayloadctx contextcontext req typesconstructionpayloadsrequest resp typesconstructionpayloadsresponse err error preprocessoperationstooptions return given preprocess operation preprocessoperationstooptionsctx contextcontext req typesconstructionpreprocessrequest mapstringinterface err error accountidentifierfrompublickey return account identifier given public key accountidentifierfrompublickeypubkey typespublickey typesaccountidentifier error cosmos sdk implementation cosmos sdk implementation based version take care satisfying client interface stargate launchpad introduced concept rosettamsg message shared repository sdkmsg type differs cosmos sdk version rosettamsg interface follows msg represents cosmossdk message converted rosetta operation type msg interface sdkmsg tooperationswithstatus haserror bool typesoperation fromoperationsops typesoperation sdkmsg error hence developer want extend rosetta set supported operation extend module sdkmsgs tooperations fromoperations method api service invocation stated start application developer two method invocation rosetta api service shared process application api standalone api service shared process stargate rosetta api service could run within execution process application would enabled via apptoml setting grpc enabled rosetta instance would spinned offline mode building capability separate api service client application developer write new command launch rosetta api server separate process rosetta command contained serverrosetta package construction command depends cosmos sdk version example found inside simd stargate contribrosettasimapp release series proposed consequence positive outofthebox rosetta api support within cosmos sdk blockchain interface standardisation reference httpswwwrosettaapiorg
psr php cache interface wikibase adr wikibase cache different part php code base wikibase provide abstraction cache implementation instead mediawikispecific class abstract bagostuff wanobjectcache code psr standard defines abstract simple cache interface php code formal verbose caching interface defined psr find overly verbose compared simpler psr favour possible psr mediawiki scope might possible next step regard possibly worth mentioning psr interface mediawiki proposed declined see also noted already psr adapter bagostuff httpspackagistorgpackagesaddshorepsrmediawikibagostuffadapter already adapter psr cache psr cache vice versa httpssymfonycomdoccurrentcomponentscachepsrpsradaptershtml also psrcachecacheitempoolinterface psrsimplecachecacheinterface declare one method name clear declaration signature cache system may implement interface introduce psrcompliant cache interface wikibase new php code cache abstraction instead binding directly mediawiki cache class specific thirdparty implementation psrsimplecache library add cacheinterface wikibase consequence psrsimplecache library added php dependency wikibase also mean adding library mediawikivendor component wmf php code hinting abstract psr cacheinterface existing mediawikis bagostuff cache service could still psrcompliant implementation implementation wrapping bagostuff wanobjectcache added possible create code wikibase cache without needing add dependency mediawiki easy replace real cache implementation test double wikibase test code particular test depend mediawiki able mock bagostuff class potential switching part wikibase code different nonmediawikis cache implementation going possible long psrcompliant interface cache
title allow apps define custom api endpoint area core tag adminapi storeapi appsystem apps allowed provide api storeapi storefront endpoint execute different logic deviate automatic entity api api implement two new endpoint apiscripthook storeapiscripthook hook parameter script hook name prefixed url prefix api storeapi hook executed apps possibility load even write data script following data given script array requestrequestall contextsales channel default multiple script executed single hook however add hookstoppropagation method apihooks called script executed furthermore document hookname app developer chooses contain vendorprefix prevent unwanted override apps storefront implement new endpoint storefrontscripthook hook parameter script hook name prefixed url prefix storefront hook app load write data either return script response render twig template response following data given script array requestrequestall array requestqueryall sale channel genericpage page response handling add new response service provides factory method create response object returned response object generic wrapper around one following response jsonresponse redirectresponse storefrontresponse output created response assigned hook twig hooksetresponseresponse response set empty response sent default returning custom jsonresponse json method allows specify data httpstatus code returned twig set response servicesresponsejsondata data statuscode redirecting redirect method allows specify route route params redirected optional statuscode default twig set response servicesresponseredirectroutename params statuscode rendering template render factory allows pas template name parameter page object additional params perform storefrontcontrollerrenderstorefront twig set response servicesresponserendermyappstorefrontpagesmycustompagehtmltwig page hookpage called outside saleschannelcontext api endpoint called installation dont storefrontbundle installed throw exception login protection add helper method saleschannelcontext ensure customer logged continuing execute script helper method check customer current saleschannelcontext throw customernotloggedinexception customer logged twig hookcontextensurelogin caching script response wrapper allows modifying caching strategy response twig responsecacheinvalidationstateloggedin cartfilled responsecachemaxage responsecachedisable responsecachetagmymanufacturertag manufacturerid anothertag default storefront storeapi route cached caching optout route api route caching supported provide cache configuration response route ignored individual cache invalidation add new cacheinvalidationhook point hookpoint hook general entitywrittencontainerevent app analyze write payload event cacheinvalidation service invalid cache given tag wrap entitycontainerevent script forced specify entity want inspect write payload instead providing raw payload provide fluid functional interface allows filter entityids match criterion twig set hookeventgetidsmanufacturer set idsonlyupated update event set idswithname url name url cahnge set hookeventgetmanufactureronlyupatedwithname url chained idsempty return endif set tag set tag tagsmergemymanufacturertag endfor servicescacheinvalidatetags xmlconfig appscripts general custom api endpoint particular work without configuration inside manifestxml file prefer solution inside script solution would require additional configuration xml file reason everything regarding app script one place inside app namely resourcesscripts folder additionally manifestxml get outdated may lead confusing error general structure xml file limited possibility app script seourls wont add seo url iteration reason feature pretty complex dont know yet feature would additionally feature like would add heavy maintenance burden tight coupling general seourl solution dont know yet feature brings value also dropped idea customroutes aka static seo url light overly specific solution prefer general solution cant anticipate case app developer may cant possibly build custom solution every case may therefore create separate ticketadr add lifecycle script app script script like could add entry seourl table alias script route limited case greatly simplify case installation app something changedadded shop current way would add webhook appinstall event build external service turn api change stuff would eliminate external server
adr daser parallelization changelog started author walldiss process verifying availability block data sampling share block package implement engine ensure availability chain block data via availability interface verifying availability block data priority functionality celestianode performance could benefit significantly parallelization optimisation make able fully utilise network bandwidth previous approach share sampling nature networkbound operation implies multiple network roundtrips previous implementation daser singlethread synchronous approach meaning one process sequentially performing sampling operation past header blocked awaiting response multiple coordinated worker running parallel drastically improves dasers performance better network bandwidth utilization downside proposed solution brings concurrency complexity detailed design achieve parallelization daser split following core component coordinator hold current state sampled header defines header sampled next worker perform sampling range header communicate result back coordinator worker created demand job available amount concurrently running worker limited const concurrencylimit length sampling range defined daser configuration param samplingrange subscriber subscribes network head update new header found notify coordinator recent network head block prioritized sampling increase availability demanded block checkpointstore storesloads coordinator state checkpoint allow seamless resuming upon restart coordinator store state checkpoint exit resume sampling latest state also periodically store checkpoint storage avoid situation checkpoint stored upon hard shutdown node sampling flow coordinator check worker concurrency limit reached limit reached coordinator form new sampling job look job top priority stack nothing priority stack pick next sampled range job launch new worker formed job worker get header given range sample share worker done communicates result back coordinator coordinator update sampling state according worker result concurrency limit maximum amount concurrently running worker defined const concurrencylimit value approximation came first basic performance test test samplessec rate observed moving average sec window period min metric triggered sampled header width text amount worker speed amount worker speed amount worker speed amount worker speed based basic experiment result value higher dont bring much benefit time increased parallelization come cost higher memory consumption future improvement discussed later scope adr implemented future plan several params value come hardcoded daser samplingrange concurrencylimit priorityqueuesize genesisheight backgroundstoreinterval become configurable node runner define based specific node setup default value optimized performance testing common setup could potentially vary different node type reference daser
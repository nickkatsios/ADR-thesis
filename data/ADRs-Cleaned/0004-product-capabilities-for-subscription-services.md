product capability subscription service deciders ben bangert ian bicking ryan kelly orchard shane tomlinson problem statement subscription service way inform relying party relevant subscription enable feature given user driver engineering simplicity security business operation marketing considered single profile assertion consisting list subscription capability string based requesting client single boolean profile assertion indicating subscription based requesting client dedicated profile server api reporting subscription based oauth scope separate userinfo endpoint multiple boolean profile assertion indicating capability based oauth scope outcome chosen single profile assertion consisting list subscription capability string based requesting client subscription capability conveyed single additional profile assertion fxa maintains mapping clienttocapabilities capabilitiestoproduct relying party provide multiple subscriptiongated capability example rpa provides goldbadge silverbadge rpb provides goldbadge unlimitedstorage rpc provides freepuppies fxa bundle capability crossrp product needed marketing business purpose example product bundle goldbadge unlimitedstorage rps granted visibility user entire subscription example user subscribes product rpa see goldbadge unlimitedstorage user subscription claim profile rpb see goldbadge unlimitedstorage rpc see capability listed pro con single profile assertion consisting list subscription capability string based requesting client description openid subscription field visible profile profilesubscriptions oauth scope result subscription field mapping user subscribed product capability filtered relevant capability provided requesting internal mapping rptocapabilities capabilitiestoproduct pro additional oauth complexity finegrained ability specify different feature per subscription access support subscription without changing openid field include scope avoid user later logoutlogin change valid scope con requires update internal mapping table determine capability provides well mapping product capability single boolean profile assertion indicating subscription based requesting client description single openid subscriptionstatus field internal service subscription mapping subscription track rps subscription result service maybe get stripe data include wed still copy event distribution lookup fxa login include subscriptionstatus field mapping value yes event distribution resolve user active subscription rps provides access send appropriate whether user considered subscribed pro support subscription without changing openid field include scope avoid user later logoutlogin change valid scope con assumes provides single serviceproduct tier multiple service different subscription providing access different tiersservices single provides wont work requires update internal mapping table determine provides service subscription dedicated profile server api reporting subscription based oauth scope separate userinfo endpoint description openid subscription scope granting access getting user subscriptionsfeatures via api include scope default rps recognize subscription vendorspartners profile server modification profile api addition vsubscriptions requiring scope profilesubscriptions feature oauth server modification responds profile server request fetch active featuressubscriptions user internal service mapping featurescapabilities see description solution service mapping featurescapabilities pro additional oauth complexity rps specifically request scope include side rps request subscription user via api needed valid access later point theyre unsure webhook delivery subscriptionfeature response profile server api scheme choose data doesnt fit idtoken con see con solution service mapping featurescapabilities multiple boolean profile assertion indicating capability based oauth scope description openid field per featuretier vpn sendpremium etc internal service mapping featurescapabilities subscription track featurescapabilities subscription includes well provides feature fxa login include openid scope based mapping value yes depending sub includes event distribution determine openid scope determine feature toggled subscription change based mapping pro finegrained ability specify different feature per subscription access con requires update internal mapping table determine provides featuretier subscription requires adding openid field every featuretier requires forcing user logoutlogin featuretier subscription applies change openid scope change
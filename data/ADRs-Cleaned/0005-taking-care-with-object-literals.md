taking care object literal mixing class object literal dangerous passing test application work test itcan optedout marked deleted instead async const lobster new mocklobstersit itlistreturns new newsitema item new newsitemb item const seive new mockseiveit italwaysreturn const toggle new mocktogglesit itreturntrueshowdeleted const application new applicationnew portslobsters consolelog seive toggle const seivedresult await applicationlobsterslist expectseivedresultmapit itid deleted itdeleted toeql deleted true deleted false written itcan optedout marked deleted instead async const lobster new mocklobstersit itlistreturns title item title item const seive new mockseiveit italwaysreturn const toggle new mocktogglesit itreturntrueshowdeleted const application new applicationnew portslobsters consolelog seive toggle const seivedresult await applicationlobsterslist expectseivedresulttoeql title item deleted true title item deleted false pas implementation written expecting object literal trouble application return work list newsitem nothing failed either culprit srccoreinternalusecasesnewslistjs moduleexportslist async list seive toggle const fulllist await list const theidstoreturn await seiveapplyfulllist togglesgetshowdeleted return fulllistmapit itdeleted false theidstoreturnincludesitid return else return fulllistfilterit theidstoreturnincludesitid specifically itdeleted false theidstoreturnincludesitid fail run newsitem also produce expected result either there setter adding one produce correct behaviour get deleted return thisdeleted itdeleted false work without change proposing agreed implement consequence becomes easier difficult risk introduced change mitigated
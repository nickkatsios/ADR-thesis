create endpoint playfrontendhmrc surfacing session metadata technical story platui problem statement tax user sometimes without warning unnecessarily signed accessing mdtp service multiple browser tab window violation wcag success criterion timing adjustable problem consequence fact user session refreshed via user activity tab window belonging browser profile however javascriptpowered hmrctimeoutdialog currently way knowing activity following initial page load solving issue requires providing timeout dialog component knowledge actual time remaining user active session via endpoint excluded session management achieve costeffectively minimising impact service team limiting duplication knowledge avoiding introducing additional coupling frontend microservices driver minimise code change service team library upgrade avoidance requiring service team add additional routing rule avoidance requiring service team add additional configuration limit duplication knowledge sessiontimeoutfilter bootstrapplay library service preference maintaining loose coupling frontend service avoiding adding single point failure frontend microservices endpoint interrogate session affect session considered add controller route playfrontendhmrc interrogating session state without adding playfrontendhmrc dependency bootstrapplay add controller route bootstrapplay interrogating session state adding bootstrapplay dependency playfrontendhmrc create dedicated microservice hosted platform whose sole purpose would query session state request change frontend manage sign interaction scp add endpoint querying session state store time remaining session unencrypted cookie timeout dialog read cookie moving timeout dialog related functionality playfrontendhmrc bootstrapplay including twirl template split session related functionality including filter timeout dialog twirl template session keep alive controller playsession new sessionmanagement library make playsession dependency playfrontendhmrc playfrontendhmrc dependency bootstrapplay except adding playfrontendhmrc dependency bootstrapplay hmrctimeoutdialog component hmrctimeoutdialoghelper playfrontendhmrc adding playfrontendhmrc dependency bootstrapplay outcome chosen platui platops agree technically feasible satisfies driver smallest possible change least impact service team intention would revisit playsession later order address outstanding concern around knowledge duplication pro con good playfrontendhmrc already controller manage language switching keep alive functionality timeout dialog good team already routing rule hmrcfrontend route approutes file bad duplication knowledge bootstrapplay playfrontendhmrc unless calculated time remaining could stored session bad setting excluded endpoint playfrontendhmrcs referenceconf would rely default setting provided bootstrapplays frontendconf nonstandard introduces implicit dependency via configuration made explicit additionally adding configuration library referenceconf file lead unexpected behaviour due lack configuration precedency library good added additional endpoint could supplying additional metadata frontend service future good prior art form health endpoint bad service would add additional routing rule approutes file bad reverse router hmrctimeoutdialoghelper problematic bootstrapplay include play plugin unable compile route file generate reverse router could handroll router healthroutes would additionally create reverse router call setprefix withprefix case autogenerated router bad mechanism undocumented risk breaking future play version bad playfrontendhmrc would add bootstrapplay dependency access sessioncontrollers reverse router may break consumer earlier version bootstrapplay good potentially performance implication consuming frontend microservices good endpoint would frontend specific exemption session timeout filter could hardcoded bad compound duplication knowledge adding another moving part session management networked dependency bad mean service developer spin yet another microservice running locally via service manager bad introduces tight coupling single point failure frontend microservices platform bad massive scaling requirement needed support endpoint simply decode session cookie something frontend microservice arguably poor resource bad stand frontends choose session timeout duration centralised service knowledge actual session timeout applicable service however possible ability may removed later iteration platform removing obstacle bad cost resource time supporting maintaining another shared service new service would runbook auditing assessment pra cab approval etc good potentially performance implication consuming frontend microservices good authenticated service likely already microservice part service manager profile good endpoint would frontend specific exemption session timeout filter could hardcoded bad would add huge additional scaling requirement microservice bad would create additional coupling microservice bootstrapplay playfrontendhmrc bad platform team microservice bad service authenticated would currently dependency microservice bad microservice knowledge actual session timeout applicable service good timeout dialog would perform xhr request obtain second remaining session read cookie bad unencrypted cooky would trigger dast zap test failure possible add exemption individual cooky suppressing alert completely would potentially mask warning team something bad new cookie may auditing listing mdtp cookie policy although regarded essential cookie bad may technically feasible cookie would set server side requiring server request actually set good reason good resolve duplication knowledge bootstrapplay playfrontendhmrc session related logic bootstrapplay except javascript logic hmrcfrontend bad reason bad bootstrapplay include twirl plugin adding may cause incompatibility issue bad bootstrapplay historically hosted twirl template would change direction bad introduces dependency hmrcfrontend webjar bootstrapplay good would requirement add additional routing rule frontend microservices implying reduced risk broken implementation good fully resolve duplication logic bootstrapplay playfrontendhmrc good better separation concern good tying bootstrapplay make likely engaged team update frontend library regularly bad potential unintended sideeffects service currently playfrontendhmrc user playnunjucksplayui bad tie platui frontend library release schedule bootstrap unless microservices import playfrontendhmrc separately may increase lead time latest bug fixesfeatures bad introduces additional library cross compiled multiple play version would ongoing maintenance bad also extract javascript functionality hmrcfrontend change would needed hmrcscripts playfrontendhmrc include additional javascript snippet would create additional complexity around testing building javascript spike keep javascript hmrcfrontend poc purpose also team hmrcscripts bad impactful change affecting standard set play filter frontend microservices bootstrap version bump would required bad filter configuration would implicitly depend hmrcfrontend routing rule configured frontend microservices although relatively standard bad team would update timeout dialog helper new library rather one playfrontendhmrc could mitigated including timeout dialog hmrclayouthmrchead good reason good potentially doesnt require sbt twirl plugin added bootstrapplay good conforms pattern playfrontendhmrc direct port hmrcfrontend bad reason bad result component partially implemented another library bad add playfrontendhmrc dependency bootstrapplay see good code change consuming service requirement add additional routing rule implies faster rollout reduced risk broken implementation good simple requirement create additional library good issue around filter configuration default good including playfrontendhmrc bootstrapplay reduces number library dependency frontendmicroservices good make explicit implicit coupling javascript timeout dialog sessiontimeoutfilter hmrcfrontend dependency playfrontendhmrc good tying bootstrapplay make likely engaged team update frontend library regularly bad potential unintended sideeffects service currently playfrontendhmrc user playnunjucksplayui bad tie platui frontend library release schedule bootstrap unless microservices import playfrontendhmrc separately may increase lead time latest bug fixesfeatures bad filter remains bootstrapplay still duplication timeout calculation logic playfrontendhmrc bootstrapplay unless mitigated storage session time remaining session link timeout warning govuk design system issue
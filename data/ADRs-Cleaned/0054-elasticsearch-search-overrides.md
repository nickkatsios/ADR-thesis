elasticsearch search override lazy consensus implemented imap search request course user search many application samsung email client also imap search resynchronization elasticsearch resynchronization problem resynchronization incurs many request elasticsearch made cope performance impact second spotted elasticsearch indexing asynchronous ideal resynchronization elasticsearch downtime would imply full downtime client resynchronization query would better served metadata database define api searchoverride called matching search query thus offload elasticsearch provide extension mechanism search override potentially custom implementation loaded configuration provide well targeted searchoverride implemented top cassandra database consequence expect observe imap search slow request elasticsearch downtime impact imap client imap search like imap samsung application thus also able support higher imap workload cassandra suited resynchronisation request sample imap request searchoperationkeysearchkeytypetypeuid datenull size valuenull second modseq uidsidrange type uid messageuiduidmessageuiduid sequencesnull keysoptionalempty searchoperationkeysearchkeytypetypeand datenull size valuenull second modseq uidsnull sequencesnull keysoptional searchkeytypetypesequenceset datenull size valuenull second modseq uidsnull sequencesidrange keysoptionalempty searchkeytypetypedeleted datenull size valuenull second modseq uidsnull sequencesnull keysoptionalempty optionscount searchoperationkeysearchkeytypetypeand datenull size valuenull second modseq uidsnull sequencesnull keysoptional searchkeytypetypeuid datenull size valuenull second modseq uidsidrange type uid messageuiduidmessageuiduid sequencesnull keysoptionalempty searchkeytypetypeunseen datenull size valuenull second modseq uidsnull sequencesnull keysoptionalempty optionscount searchoperationkeysearchkeytypetypeand datenull size valuenull second modseq uidsnull sequencesnull keysoptional searchkeytypetypesequenceset datenull size valuenull second modseq uidsnull sequencesidrange keysoptionalempty searchkeytypetypenot datenull size valuenull second modseq uidsnull sequencesnull keysoptional searchkeytypetypedeleted datenull size valuenull second modseq uidsnull sequencesnull keysoptionalempty optionsall searchoperationkeysearchkeytypetypeall datenull size valuenull second modseq uidsnull sequencesnull keysoptionalempty reference jira
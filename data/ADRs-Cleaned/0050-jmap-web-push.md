implement web push jmap lazy consensus implemented notification newly received email common feature modern mail application furthermore real time update across device common feature wish provide support top apache james jmap implementation large variety device dealing mobile device yield unique set challenge protocol level including low bandwidth connection long latency save battery mobile device operating system tend limit background connection application thus order receive notification application running background one cannot rely adr jmap websocket push would imply application maintaining persistent connection server batterynetwork consuming rfc section jmap specification web push introduces rfc generic event delivery http push intermediate push server push gateway device multiplex push application single connection device register url push gateway application server jmap server forward statechange event push gateway implement rfc section jmap specification web push store statechanges provide cassandra implementation storage distributed application implement pushclient based reactornetty send event push gateway rely group listener plugged jmap event bus handle web push see adr event bus implement pushsubscriptionget pushsubscriptionset jmap method also implement verification code mechanism first roundtrip verify push gateway work well also decided allow single push subscription per devideid includes device app identifier consequence notification traffic transit third party infrastructure security privacy risk rfc message encryption web push introduces encryption web push message integrated jmap web push mechanism implemented googletink library provides utility easily testing strategy rely mock http server mimicking behavior push gateway push gateway support rate limiting might reject message pushed http many request please note jmap statechanges resilient message loss latest state underlying object transmitted missing intermediate state imply missing change plan implementing retries adaptive push rate reference rfc section jmap specification web push adr jira ticket adr rfc generic event delivery http push rfc message encryption web push googletink webpush encryption
miscellaneous small problem statement multiple small made process create key whatever method store key generation preferred allows individual loader care key generation ingestion time microsecond practice monotonic never able simulate duplicate system time time jumped backwards sequence threadsafety came free zmq would require extra work simplified solution work could mutex mpsc queue channel didnt provide lot value ingest time metadata useful evaluating lag ingestion event dissemination based previous statement tried implementing atomicusize worked well except made api contract little gross made store considerably complicated keyless fetch iterate backwards key deserializing data checking ingest time threshold performance constraint read seemed bad ended mutex loop prevent collision ingest timestamps mutex dbget arent ideal write performance shouldnt issue would nice leverage sort castransaction rocksdb rust binding didnt allow tested write performance release build sput mutexcasfree code sput final implementation mutex performance hit negligable hit came behavior even busiest weather day youre still going limited writes time overthewire source measure dozen millisecond difference would noticeable sware writes considerably faster create collision took thread put event throttling expected see key rocksdb saw almost collision rate roll error wxerror type essentially persisted message boilerplate didnt add ton value changed function return err log error occur also switched slog log never really structured logging feature test event gzipping shrunk payload original size saving creating optimized event struct doesnt serialize none value smaller ill leave much extra work compression wont available warp little
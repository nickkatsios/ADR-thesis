relevant arangodb documentation transaction httpswwwarangodbcomdocsstabletransactionshtml write conflict httpsgithubcomarangodbarangodbissues transaction failure httpsgithubcomarangodbarangodbissues sorting graph traversal result httpsgithubcomarangodbarangodbissues data link deleted object workspace currently link deleted object returned getlinksfromsample changed mean extra workspace call also reproducibility issue call method effectivetime may produce result said changing permission workspace also change link returned time dont return link deleted object link autoexpired arent already assumes getobjectinfo ignoreerrors return null deleted object called via administer verify expired link deleted object effectivetime past return link deleted object expired long user write access workspace however link object deleted workspace cannot expired anyone including admins given current implementation naively seems since link arent accessible anyone admins creating updating link link limit sample service allows nonexpired link one version sample one version object mean single object version data column name matrix data requirement originally agreed upon appears way efficiently sort page result graph query arangodb allowing collection grow without limit mean eventually sorted graph query oom hog cpu database consistently killed capability small enough result sorted small amount memory application link lookup currently implemented without graph traverals theory limit could lifted would sort paging index usual paging based aspect link unique tricky however query parameter expectation change limit may reinstated change search regard acls searching additional property workspace object property sample property implementation note since multiple client may creating updating expiring link sample data object simultaneously code account possible race condition operation link immutable created except expired unique link database data unit workspace upa data unexpired link duid created time expired link ensures there one nonexpired link per duid implementation parameter newlink update boolean indicating currentlink replaced exists start transaction collection exclusive lock required since counting multiple document allowing writes transaction progress make count inaccurate fetch currentlink data unit currentlink update fail currentlink newlink abort transaction return noop newlink different sample countlinksnewlinksample fail link look based data know upa since expiring replacing link link count upa doesnt change expire save currentlink creates new arangodb document new key else countlinksnewlinkupa fail countlinksnewlinksample fail save newlink complete transaction extant failure mode arangodb transaction fail one node succeed another commit change succeeded cause transaction whole fail clientside mean theory client could determine current state try repair inconsistency practice complicated link could expired without current link updated effectively leaving expired current version link link expired error would occur would manually corrected link could updated without prior link expired effectively causing record prior link disappear expiring link implementation note see implementation note creating updating link arango support atomically changing document key since expiring link mean changing key transaction reduce possibility inconsistent database state transaction really help implementation parameter duid data unit fetch currentlink via duid currentlink fail start transaction expire currentlink save creates new arangodb document new key fail duplicate key error occurs meaning link expired fetching document delete old currentlink document complete transaction extant failure mode arangodb transaction fail one node succeed another commit change succeeded cause transaction whole fail clientside mean theory client could determine current state try repair inconsistency practice complicated link could expired without current link deleted effectively leaving expired current version link link expired error would occur would manually corrected link could deleted without expired document written destroying link history since expiration exclusive lock possible writes collide expired link document cause write fail clear cause transaction whole fail delete fails error raised transaction aborted funnily enough ignoremissing parameter pythonarango documentation param ignoremissing raise exception missing document parameter effect transaction exception always raised failure could caused another thread expiring deleting link case action necessary another thread expiring updating link case current operation expire new link error take split second timing highly unlikely occur leave database inconsistent state
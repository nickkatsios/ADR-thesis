adr bootstrap pod installing connaisseur isnt simple one might think applying yaml file due nature admission controller might block various way adr depicts issue installation connaisseur show solution try make process simpler easier understand problem installation order connaisseurs installation order fairly critical webhook responsible intercepting request dependent connaisseur pod work pod available ready failurepolicy set fail webhook block anything everything including connaisseur pod mean webhook must installed connaisseur pod ready previously solved postinstall helm hook installs webhook configuration resource applied considered ready installation purpose solution suffices downside every resource installed via helm hook isnt natively considered part chart meaning helm uninstall would completely ignore resource leave webhook configuration place situation everything anything blocked arises additionally upgrading wont possible since cant tell helm temporarily delete resource reapply thats helmhook image bootstrapsentinel introduced temporarily delete webhook reapply installation order beat race condition unfortunately solution always felt bit clunky added lot complexity seemingly simple problem solution empty webhook part helm release bootstrap sentinel helmhook image wont anymore instead empty webhook configuration configuration without rule applied along resource normal helm installation phase way webhook normally deleted helm uninstall command additionally postinstall postupgradepostrollback helm hook webhook updated actually intercept incoming request sense unloaded webhook get installed get armed postinstall also work upgrade since armed webhook overwritten empty one trying apply chart obviously reverted back upgrading postupgrade helm hook pro clunky native con connaisseur deactivated short time upgrading solution bootstrap sentinel helm hook everything stay helm hook image still uninstall webhook bootstrap sentinel mark connaisseur pod ready initial installation pro never change running system con clunky time confusing anyone familiar connaisseur installation order problem inactive webhook upgrade solution uninstallation webhook helm hook webhook easily installed postinstall step helm installation isnt part helm release cant uninstalled mentioned neat little trick still possible postdelete step webhook reapplied empty unarmed form setting hookdeletepolicy delete resource either way matter helm hook step fails way webhook get reapplied immediately deleted still work upgrading connaisseur rolling update strategy pursued meaning old pod still available admitting new one new pod ready old one get deleted pro clunky native inactivity webhook upgrade con slower upgrade connaisseur compared solution outcome solution chosen kubernetes native way thing connaisseur always available even upgrade problem admission webhooks must communication purpose wont kubernetes connaisseur creates self signed certificate communication webhook pod certificate created within helm chart native genselfsignedcert function make connaisseur pipeline friendly additional package installation openssl unfortunately certificate get created every time helm whether helm install helm upgrade especially upgrade webhook get new certificate pod get new one written secret problem pod capitalize new certificate inside secret restarted restart happens pod webhook different certificate validation fail solution lookup instead always generating new certificate lookup function helm template could see whether already secret defined contains certificate one way certificate reused whole time pod restarts necessary secret certificate begin new one generated within helm chart pro restarts changing certificate con lookup function take time gather current cert solution restart upgrade helm release pod restarted incorporate new secret pro con restarting take time may break many connaisseur pod unavailable time solution external back external certificate generated within helm chart preconfiguring openssl pro fastest solution con configurational effort andor pipeline friendly may openssl outcome solution implemented important connaisseur work little configuration effort possible getgo nonetheless external configuration certificate still considered later development
service self config init config seed removal approved tsc vote geneva release note adr address high availability consideration concern edgex general number unanswered question regard architecture design add consideration since debut edgex configuration seed service configseed start edgex deposit configuration service consul configurationregistry service development purpose resource constrained platform edgex run without consul service simply reading configuration filesystem process nominally worked several release edgex always issue extra initialization process configseed least race condition part service bootstrap coming configseed completes deposit configuration consul deal override environmental variable provided configuration override override often specific service place configseed order take effect additional service init confusing user note historical purpose noted configseed writes configuration configurationregistry service consul first start edgex subsequent start edgex configseed check see already populated configurationregistry service rewrite configuration unless overwrite flag designarchitectural proposal therefore removal configseed service removing cmdconfigseed edgexgo repository edgex micro service self seed seed consul required configuration bootstrap service detail bootstrapping process command line edgex service support common set commandline combination required startup service interact rest edgex command line set configuration command line include configprovider configuration provider location url prefixed consul example cpconsulhttplocalhost overwrite overwrite configuration configuration provider file configuration filename configurationtoml default configuration filename provided profile name sub directory configuration directory profilespecific configuration file found default specified configuration file read configuration directory confdir directory configuration file found default confdir specified convention linuxunixmacos mean current directory registry string indicating registry distinction command line versus configuration important later adr two command line overwrite registry overridable environmental variable note overwrite command line sparingly expert knowledge edgex particular knowledge operates wherehow get configuration restarts etc ordinarily overwrite provided mean support development overwrite permanently production enviroments highly discouraged configuration initialization service shall providing already local configuration file service may local configuration file initialization service aka bootstrap service depending command line environmental variable see provided startup configuration provider configuration provider specified service call configuration provider consul check toplevel root namespace service exists configuratation toplevel root namespace exists indicates service already populated configuration configuration provider prior startup service find toplevel root namespace already populated configuration information read configuration information configuration provider namespace service ignore local configuration file service find toplevel root namespace populated configuration information read local configuration file populate configuration provider namespace service configuration read local configuration file configuration provider specified command line argument configprovider environment variable edgexconfigurationprovider environmental variable override command line argument note environmental variable typically uppercase inconsistency environmental variable casing example edgexregistry considered made consistent future major release local configuration file configuration provider isnt specified service configuration local configuration file service configuration file associated profile config filename config file directory command line environmental variable case service contact configuration service consul configuration information note service self seed deployment specific change made via environment override longer necessary docker profile configuration file service directory example httpsgithubcomedgexfoundryedgexgoblobmastercmdcoredataresdockerconfigurationtoml see consequence still possible user profile mechanism specify docker configuration longer required recommended approach providing docker container specific configuration override environment variable override configuration always take precedence whether configuration sourced locally read config providerconsul note mean configuration value overridden environment variable always source truth even configuration changed directly consul name environmental variable must match path name consul note environmental variable override remove change docker profile resdockerconfigurationtoml file allowing removal existing configurationtoml file override rule edgex environmental variable command line may counter intuitive compared system appears standard practice indeed web searching reddit starting fight env variable command line args layout prevailing difference environment variable configuration override named prepending configuration element configuration section inclusive subpath subpaths replaced underscore configuration environment variable override must specified camel case two example registryhost registry host localhost clientscoredatahost client clientscoredata host localhost going forward environmental variable override command line uppercase value overriden get logged indicating configuration value param new value feature implemented minor change done consideration httpsgithubcomedgexfoundrygomodbootstrapcomparemasterlennyintelselfseed code branch removed adr approved implemented master implementation selfseeding service environmental override already implemented fuji per document application service device service instituted sdks backward compatibility several aspect adr contain backward compatibility issue device service application service sdks therefore upcoming minor release following guideline expections added provide backward compatibility registry device sdks earlier version device service sdks uri registry specified command line given uri address configuration provider configprovider registry specify uris service log error exit registry configprovider sdks configprovider uri isnt specified registry wout uri specified service registry provider information local configuration file configuration registry provider env var edgexregistry service currently removed add back value edgexconfigurationprovider enable registry setting url default http fuji consequence docker compose file changed remove config seed main snap changed remove config seed config seed code currently edgexgo repo removed service specific environmental override currently config seed moved specific service docker configuration file directory example httpsgithubcomedgexfoundryedgexgoblobmastercmdcoredataresdockerconfigurationtoml populate config seed docker container eliminated service cmdsecuritysecretstoresetup docker configurationtoml file moved rather deleted documentation would reflect removal config seed self seeding process remove potential issue past race condition experienced edinburgh release service responsible configuration still high availability concern considered covered adr time remove confusion part user service configseed start immediately exit minimal impact development cycle release schedule configuration endpoint service ensure environmental variable reflected configuration data returned system management impact docker file modified remove setting profiledocker docker compose file changed add environmental override removal docker profile global environment section compose file override apply service example common shared environment variable defined xcommonenvvariables commonvariables edgexsecuritysecretstore false edgexconfigurationprovider consulhttpedgexcoreconsul clientscoredatahost edgexcoredata clientslogginghost edgexsupportlogging loggingenableremote true
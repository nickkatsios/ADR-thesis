adr celestianode fraud service changelog init commit added pubsub added befp verification updated rsmtd error namingas changed implementation changed namespacesharewithproof sharewithproof made proofunmarshaler public extended return params fixed typo issue extend proof interface headerhash method updated rsmtd change isrow axis added storage description reworked unmarshalers registration added binaryunmarshaller proof interface changed prooftype type int string author vgonkivs bidon adlerjohn wondertan renaynay bad encoding fraud proof befp case full node receives errbyzantinedata rsmtd library generates fraudproof broadcast network light node notified corresponding block could malicious befps first addressed two issue httpsgithubcomcelestiaorgcelestianodeissues httpsgithubcomcelestiaorgcelestianodeissues detailed design fraud proof generated recovered data match respective rowcolumn root block reparation result repairextendeddatasquare error errbyzantinerowerrbyzantinecol error consist rowcolumn number match merkle root share successfully repaired verified correct share based errbyzantinerowerrbyzantinecol internal field generate merkleproof respective verified share nmt tree return errbyzantine retrievedata type errbyzantine struct share contains share rowcol nonnil share merkleproof computed share sharewithproof index represents number rowcol errbyzantinerowerrbyzantinecoll occurred index uint axis represents axis verification failed axis rsmtdaxis type share struct share byte proof nmtproof addition dasdaser creates befp currently support one fraud proof enum extended future const badencoding prooftype badencoding type badencodingproof struct height uint share contains share rowcol share pas verification rmstd nil nonnil share merkleproofs computed share sharewithproof index represents number rowcol errbyzantinerowerrbyzantinecoll occurred index uint axis represents axis verification failed axis rsmtdaxis full node broadcast befp light full node via separate subservice via proto message proto message merkleproof int start int end repeated byte node byte leafhash message sharewithproof byte share merkleproof proof enum axis row col message badencoding byte headerhash uint height repeated ipldpbshare share uint index axis axis dasdaser import data structure implement fraudbroadcaster interface libpppubsub hood broadcaster generic interface sends proof node subscribed broadcaster topic type broadcaster interface broadcast take fraud proof data structure implement standard binarymarshal interface broadcast subscribed peer broadcastctx contextcontext proof error prooftype enum type represents particular type fraud proof type prooftype string proof generic interface type fraud proof network type proof interface type prooftype headerhash byte height uint error validateheaderextendedheader error encodingbinarymarshaller encodingbinaryunmarshaler note full node detected malicious block created fraud proof also receive subscription stop respective service side node default subscribe befp topic verify message received topic type proofunmarshaller funcbyte prooferror subscriber encompasses behavior necessary subscribeunsubscribe new fraudproofs event network type subscriber interface subscribe allows subscribe pub sub topic type subscribe register pubsub validator topic subscribectx contextcontext prooftype prooftype subscription error subscription return valid proof one received topic type subscription interface proofcontextcontext proof error cancel error service implement subscriber broadcaster type service struct pubsub pubsubpubsub storeslk syncrwmutex store mapprooftypedatastoredatastore topic mapprooftypepubsubtopic getter headerfetcher datastoredatastore funcs service subscribectx contextcontext prooftype prooftype subscription error funcs service broadcastctx contextcontext proof error befp verification light node receives badencodingproof fraud proof verify merkle proof correspond particular share merkle proof correspond share befp valid badencodingproofshares light node reconstruct full row column compute merkle root rsmtd compare merkle root could retrieved dataavailabilityheader inside extendedheader merkle root match befp valid celestianodes stop dependent service upon receiving legitimate befp full light node stop syncer submittx service valid badencodingfraudproofs stored disk fraudstore interface fraud storage befp storage created first subscription bad encoding fraud proof befp stored datastore received fraudbadencodingproof path corresponding block hash key put add fraud proof datastore given key func putctx contextcontext store datastoredatastore key datastorekey proof byte error node start check datastore befp func getallctx contextcontext datastoredatastore byte error case response error empty datastoreerrnotfound befp already added storage node halted fraud sync main purpose fraudsync deliver fraud proof node started befp appears since full node create befp reconstruction fraudsync mainly implemented light node light node check local fraud storage empty start waiting new connection remote peersfullbridge node sharediscovery light node send request newly connected peer get fraud proof fraud proof received remote peer validated propagated across local subscription order stop respective service note received fraud proof end invalid remote peer added black list fulllight node register stream handler handling fraud proof request bridge node behaviour bridge node behave light node subscribing befp fraud sub listening befps befp received similarly shut dependent service including broadcasting new extendedheaders network proposed reference data availabilitybad encoding fraud proof implement stub badencodingfraudproofs
new rust architecture draft deciders dplod problem statement tegh moving rust problem developed prototype addressed fully embrace rust becoming mess file sled unstable binary notwidely supported file format lend easy user debugging like sqlite sled pubsub model led complicated debugging primary mean synchronizing data mean even thing shouldnt persisted saved disk get pubsub functionality without sled pubsub data easily synchronized actor may replace robustly make biggish change make opportune moment write updated architecture organize driver initial experiment rewriting tegh module rust shown language generally reduce amount bug created debugging difficulty bug hunt sometimes quite difficult javascript due lack type safety null let real beginning wanted try rust considered sled sqlite document store one json field data given struct indexing json ideal requires crosscompiling sqlite loadable extension sqlite traditional sql database outcome machine packagesmachine packagesmachinesrcmachineconfig mutation resolvers message actor persistent state machine ephermal able receive message one time data structs sql configbacked nonactors helper function mermaid classdiagram class machine ephemeral data sqlx machineconfig config class machineconfig config file backed machine machineconfig currently machine information spread across unintegrated module machineconfig ephemeralmachinedata machine receiveloop sendloop cumbursome instead ephemeralmachinedata receiveloop machine merged actor persisted sendloop replaced handler called graphql mutation following message stopmachine resetmachine pausetask deletetaskhistory sendtasktomachine machineconfig included teghmachine package config file update managed seperate actor teghmarlin replace duplicated config implementation dependency machine package core packagescore packagescoresrcbackupbininvitesmaterialsusersvideo rename teghauth core includes user invite video moved top level print queue packagesprintqueue packagesprintqueuesrcprintqueueprinttaskpackagepartmacros mermaid classdiagram class printqueue class print class task machineid print print class package class part printqueue print print task package part part print print refactored file pro con link httpsgithubcomsunlixactor
adding key prefix annotation kubernetes modified definition annotation support separate key prefix key name update make annotation key behave label key key prefix character long must valid dns name key name character long contain alphanumeric character plus limited punctuation see doc information label key requirement implemented annotation part metadata epic restriction exist since annotation queryable api allowed user create annotation key character long limit allowed character set api client service broker would like consistent interface annotation kubernetes planning adding concept label key prefixesnames annotation first brought following github issue leaf two problem model annotation key going forward handle existing annotation conform restriction make table structure annotation closely match schema label add keyprefix column annotation leave key column name rollingdeployment compatibility treat keyname leave key column size character backward compatibility enforce character limit ruby side validation separate migration annotation table avoid deadlocking upgrade ruby code alias key keyname method talk create time bomb test tell rename column six month new annotation stored key split keyprefix keyname key column updated annotation stored key split keyprefix keyname key column updating annotation meet new prefix validation fail error existing annotation continue readable updated since queryable cause much overhead attempt migrate existing data new structure following reason migration fail cloud foundry upgraded failed migration difficult operator recover want risk platform downtime support incident operator upgrading platform likely one created owns resource problematic annotation lazily migrating annotation updated ensures one owns get make consequence positive consequence aligned kubernetes consistent schema across label annotation separating keyprefix keyname preclude adding new feature want query prefix independently negative consequence user relying large annotation key upset took away performing migration across many different table still potential upgrade issue lazily updating annotation mean old structure long time
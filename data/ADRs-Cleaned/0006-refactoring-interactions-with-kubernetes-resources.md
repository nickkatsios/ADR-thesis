refactoring interaction kubernetes resource various component deployed via cloudcontrollerng interact kubernetes api perform crud operation variety kubernetes custom resource definition crds created cfforks deployment kubernetes api becomes source truth domain object route resource apps buildimage resource app build currently individual client interact specific kubernetes api group translates client scoped particular grouping kubernetes resource currently two client one interact kpackrelated resource one interact app networkingrelated resource found increasing amount code duplication shared logicconcerns two client client might introduce would like take note refactoring idea mitigate concern existing client currently take two responsibility wed like split translate object database kubernetes resource json object propagate kubernetes resource json kubernetes api perform required error handling translate object database proposing creating sort translation layer take various domain object database construct equivalent kubernetes route object route seems like would difficult achieve generically first pas probably create class object translated propagate kubernetes resource json would like propose creating single generic kubernetes client accepts json form kubernetes resource simply propagates desired resource kubernetes api single generic client also continue provide elegant traceable error handling least well currently existing routecrdclient kpackclient client also single place kubernetesrelated property expose configured validated would helpful generic client also provide sort validation especially providing raw json something consider also providing generic kubernetes resource template common resource key extend instead providing entire json content particular resource example kubernetes resource contain toplevel metadata key various nested key often defined name label namespace consequence benefit configure interaction kubernetes single place make configuration error discoverable implementing proposal also configuration validation dont currently single generic client help mitigate frustration weve conditionally testing part interaction kubernetes there function kubernetesapiconfigured implemented place source frustration primary source frustration dependency locator attempt instantiate kubernetes client always startup dont test single generic client also provide cleaner separation concern make following code path interaction easier risk without introducing third class wrap two described make caller difficult test test either mock adapter knowledge send client
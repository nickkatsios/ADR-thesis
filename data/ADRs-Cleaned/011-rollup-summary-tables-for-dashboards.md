adr rollup summary table dashboard earlier went materialized view approach dashboard reporting data approach worked well current report limitation term scaling complexity currently new set dashboard report rely similar set data anticipate summary data monthly quarterly report wed like try find simpler stable scalable approach making data easily accessible create rollup summary table capture recent blood pressure per patient per period rollup table updated realtime blood pressure captured removing recurring batch job denormalize much data make reporting query simple cheap execute prevent complicated sql query additional data layer caching current period completed treat data rollup table period immutable let user confidence report past period change due patient moving different facility change calculate thing focus district controlled blood pressure trend report first test case sort approach key report one wed like gather feedback quickly possible approach defining table start district based report controlled number time create rollup table schema like following consider draft change get implementation patientid registrationfacilityid bloodpressureatfacilityid bloodpressureid diastolic systolic recordedat periodtype periodname year periodtype either month quarter periodname either month name quarter number year year also start rollup table store total number registration per period facilityid registrationscount newregistrationscount periodtype periodname year add logic lowest level model layer update rollup table immediately insertsupdates upsert atomically update insert recent record table wherever possible build backfill job fill table previous period superseded reporting schema consequence neutral careful avoid denormalizing calculated value representing domain logic example store raw blood pressure value boolean controlled err side storing data think may know reporting change often fluid change frequently want minimize schema change small reporting change notion assigned facility something coming soon mindful take account advantage update table relatively easy implement without database contention retrieving data table fast simple query relatively simple inexpensive denormalize whatever data needed make query fast approach successful slowly phase materialized view time corresponding rollup table incremental rollout based new report scaling demand remove stress database continual materialized view refreshes disadvantage iterate quite bit get schema right first round report adding new column later expensive term backfills try iterate quickly first round flush problem missing field may implement sort full backdated period refresh handle exceptional case like large import old data handling updated blood pressure recordedat changed month quarter change tricky involves updating rollup old period well handle require careful backfill logic wont able handle arbitrary range show trend report jan march
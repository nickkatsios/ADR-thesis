adr amplitude model deciders redeboer spflueger problem statement perspective pwa fitter package responsibility modexpertsystem construct amplitudemodel serf blueprint function evaluated function following requirement able compute list realvalued intensity mathbbrm dataset fourmomenta mathbbrmtimes ntimes number event number final state particle contain parameter tweaked optimized regard certain estimator technical story coupling parameter amplitudemodel difficult done place dynamic intensity section counterintuitive cannot done parameter section overwriting existing dynamic old parameter cleaned parameter section parameter contain name changed result mismatch key parameter section name parameter entry point compwa math language blueprint function also discussed early mid dropped favor custom python code amplitf reasoning effort writing new math language plus generator converting mathematical expression function various backends requires much manpower driver solution requirement amplitudemodel convertible function evaluated various computation backends numpy tensorflow theano jax ideally model complete sense contains information construct complete model mean common function like breitwigner blattweisskopf form factor also contained inside amplitudemodel guarantee reproducibility adding new operatorsmodels trigger many code modification openclosed principle instance adding new dynamic formalism extendible add replace current part existing model example replace dynamic part decay change function plus dataset estimator function subtle important point function hide detail backend mathematical expression yet extendable estimator definition easy extraction component component certain subpart complete mathematical expression least needed calculation fit fraction plotting individual part intensity considered solution customized python class currently amplitudemodel contains five section instance specific class kinematics defines initial final state particle particle definition spin etc dynamic mapping defines dynamic type apply particle intensity actual amplitude model converted fitter package function described parameter inventory parameter intensity dynamic structure represented yaml see example fitter package convert intensity together dynamic function reference parameter intensity dynamic contain converted parameter function parameter initialized value listed parameter section amplitudemodel alternative solution toctree maxdepth sympy operator evaluation pro con customized python class current state positive faster implementation prototyping possible compared python operator additional dependency negative openclosed new model conversion various backends dry function replacement extension feature becomes difficult handle model complete since complete mathematical description example breitwigner function referred directly implementation defined amplitude model docsympy sympy positive easy render amplitude model latex model description complete absolutely information model included reproducibility follows openclosed principle new model formalism added without change interfacing component tensorwaves lambdify convert expression backend exprsubs substitute couple parameter replace component model instance set custom dynamic negative lambdify becomes core dependency behavior cannot modified defined sympy keep track component expression tree symbol mapping docpythons operator library operator positive control different component expression tree control convert functionality function additional dependency negative essentially reinventing sympy outcome docsympy initially leave existing amplitude builder module helicitydecay canonicaldecay alongside sympy implementation possible compare result turn setup result result comparable performance replace old amplitude builder new sympy implementation
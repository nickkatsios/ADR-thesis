introduce pihole local dns dont want make coredns container cluster local dns source truth view entirely cluster dns dont want expose service internet yet expect later dedicated domain service set internal domain via let encrypt cloudflare dns something route internal request cluster without querying external dns resolvers wont know internal cluster probably unifi setup itd likely require configuration outside controller software pihole introduces neat feature multiple spare raspberry flash raspberry minimal install microsd card card boot raspberry raspberry model rev configure ssh wired lan consider adding wlan later pihole expect single static install configure unattended upgrade install pihole consequence sure pihole configured work metallb nicely dont know right away ill starting simpler ingres setup future work ensure unattended upgrade working forward update email machine auto update cloudflared appendix command history shell prerequisite etc sudo aptget update sudo aptget distupgrade sudo aptget autoremove sudo aptget install unattendedupgrades aptlistchanges bsdmailx ufw vim sshimportid git sshimportidgh liamdawson vim etcaptaptconfdunattendedupgrades see content install pihole curl ssl httpsinstallpiholenet installsh installsh bash installsh sudo pihole set new password echo blockingmodenxdomain sudo tee etcpiholepiholeftlconf devnull sudo systemctl restart piholeftlservice configure firewall ssh sudo ufw allow tcp pihole doc sudo ufw allow tcp sudo ufw allow tcp sudo ufw allow udp sudo ufw allow tcp sudo ufw allow udp sudo ufw reject tcp sudo ufw enable setup dns http curl fslo httpsbinequinoxiocvdrwdbjqyfcloudflaredstablelinuxarmtgz tar xvzf cloudflaredstablelinuxarmtgz sudo cloudflared usrlocalbin sudo chmod usrlocalbincloudflared cloudflare sudo mkdir etccloudflared cat test dig googlecom set custom dns ipv pihole remove dns server set conditional forwarding local domain unattended upgrade configuration conf unattendedupgradeoriginspattern origindebiancodenamedistrocodenamelabeldebian origindebiancodenamedistrocodenamelabeldebiansecurity unattendedupgradepackageblacklist unattendedupgradeautofixinterrupteddpkg true unattendedupgrademinimalsteps true unattendedupgradeinstallonshutdown false unattendedupgrademail root unattendedupgraderemovenewunuseddependencies true unattendedupgraderemoveunuseddependencies true unattendedupgradeautomaticreboot true unattendedupgradeautomaticrebootwithusers true unattendedupgradeautomaticreboottime set value true get email error default always send mail unattendedupgrademail set unattendedupgrademailonlyonerror false
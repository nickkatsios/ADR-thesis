commandquerybased api git repos interacting git repos involves many finegrained operation independent others there shared state life repo disk handled independent function rather modelled method class anticipate application grows number operation likely grow maintain openclosed principle way add new operation whithout modifying much existing code also useful able test operation independently since quite involved test case single test test one class would get pretty lengthy finally would helpful able compose finegrained operation higherorder one combining operation creating branch making commit pushing origin pushcommit operation weve implemented commandbus package provides typescriptfriendly way build single dispatch function take different type message object dispatch message appropriate handler function consequence made test set git repos example easy read may possible serialize deserialize message schedule git operation background task mocking interface repo may tricky possible well want push outside core put facade around small set operation actual domain want also possible pattern confuse people although client code easy read code set dispatch function example maybe nice newcomer
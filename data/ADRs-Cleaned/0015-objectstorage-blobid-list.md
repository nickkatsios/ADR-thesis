persist blobids avoiding persisting several time blob within objectstorage proposed adoption backed performance test given mail often written blob store different component mail traffic heavily duplicated several recipient receiving similar email attachment cause given blob often persisted several time cassandra first implementation blobstore cassandra heavily write optimized nosql database one assume writes fast top cassandra thus assumed could always overwrite blob usage pattern also adopted blobstore top objectstorage however writing object storage take time billed cloud provider thus choosing right strategy avoid writing blob twice desirable however objectstorage openstack swift exist method efficient enough real cost performance saver rely storedblobidslist api know blob persisted object storage provide cassandra implementation located blobapi convenience top level api intended blobstore implementation objectstorage provide cassandrastoredblobidslist blobcassandra project guice product combining object storage cassandra define binding saving blob precomputed blobid check existence blob storage avoiding possibly expensive save saving blob big precompute blobid blob streamed temporary random blobid copy operation avoided temporary blob could directly removed cassandra probably faster write every time rather read write stored blob projection performance test run order evaluate improvement consequence expect reduce amount writes object storage expected improve operational cost cloud provider performance improvement latency reduction load persistence storedblobidslist done blob successfully saved inconsistency storedblobidslist lead duplicated saved blob current behaviour case improvement code added codebase proposal get rejected reference previous optimization proposal blob existence check persist work done objectstorage exist method prooven efficient enough httpsgithubcomlinagorajamesprojectpull jira
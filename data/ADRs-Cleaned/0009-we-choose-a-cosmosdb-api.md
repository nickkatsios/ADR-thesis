choose cosmosdb api amended chose different cosmosdb api cosmosdb provide two documentoriented apis documentdb api mongodb api purpose digital citizenship project following capability single document crud operation query capability secondary index filtering result limiting ordering conflict detection concurrency writes also want minimize coupling proprietary technology protocol comparison cosmosdb apis documentdb api mongodb api crud operation yes yes query capability yes yes conflict detection yes yes lockin high low conflict detection supported mongodb api implemented application level via mvcc addition version field document decide implement database operation via mongodb api consequence cosmosdb operation implemented via mongodb api include version field document initialized value update operation preceeded reading version document updated implement record constraint based expected version document increment version document detect update failure implement retry mechanism
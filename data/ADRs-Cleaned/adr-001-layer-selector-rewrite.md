layer selector rewrite layer selector plugin grown complexity year accumulated fair amount technical debt fixing bug adding new feature become increasingly difficult time consuming result issue current implementation widget ext tree panel provide enough control node rendered difficult add button interaction leaf node zoom extent download button etc ext tree panel separation saved state actual state inmemory representation tree often differs serialized tree state led synchronization issue lack highlevel data abstraction make difficult understand plugin transforms data rendering mutable state occasionally lead data corruption caused performing certain sequence decided rewrite layer selector scratch adding new feature resolve problem previously described new layer selector following quality defined simple underscore template retain full control look feel user interaction aspire update singular state object cause redrawn way always reflection actually exists saved state separation layer config layer data loaded runtime prevent bug result mutating single state repeatedly service layer data lazily loaded possible consequence consequence resolved initial rewrite completed configuration subregions wont supported service params supported displaylevels mode symbology autogeneralize displayonpan etc change layersjson schema backwards compatible ref httpsgistgithubcomcaseyptafbdfafd
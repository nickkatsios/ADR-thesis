record initial data retention strategy note data retention strategy revisited adr supersedes introduction february prior switching govdelivery notify wished consider approach data retention way enable data driven future aim work make suggestion enable comparable amount data currently govdelivery data flexible balanced constraint email alert api produce lot data culled regularly much disk space without justification also intends respect constraint gdpr storing personally identifiable data longer needed goal complete prior change notify avoid data black hole data answer common data query specific common data scenario based chat paul performance analyst demonstrated number scenario data look ups usage short session list likely incomplete data currently looked number people subscribed list given range many people subscribed range many unscribed total number subscriber time period activity level list given range many email sent list many bulletin list associated many email list genertaed whether list never produced email overall total count many email sent specific period time total mostly internally support query people unsubscribed dont know govdelivery track user unsubscribed list user unsubscribed happen automatically user performs action occasional check email reason happen get query link may working would look sent thing would useful knowing difference user subscribed imported initial data import leave inconsistent stats ability recreate subscription people unsubscribed suggested change summary collection change data architecture enable statistical data retained relatively low level pain implementation enable future made usage storage relatively full set data email deliveryattempt largest source data email table relationship deliveryattempt pressing problem resolve term data retention quickly build substantial quantity data suggested approach dealing two separate process adjusted learn system first process archiving one happen within hour email reaching final state either sent failed occurred row marked archived suggestion archivedat timestamp archived known safe delete later archiving would involve personally identifiable data would include subject field email example cbdbaaedcbfbd subject test email subscriberid null contentchange null subscriptionids array subscription email associated contentchangeids array contentchanges email associated digestid null createdat completedat finalstatus sent maybe include delivery attempt information ideally data would stored interim suggestion store emailarchives database table exported timeresources available configure association second process would deletion email would also remove related delivery attempt would removed period day email process completed period determined thus allow sufficient time support ticket come small investigation occur since deletion process decoupled archive one time adjusted based data additional change table replace uuid datatypes allow remove reference field deliveryattempt seems created psuedo uuid value combining database timestamp reason changing email uuid value globally unique reference without revealing system information subscriptioncontent subscriptioncontent currently glue hold together association contentchange subscription resulting email digestrunsubscriber currently email deleted cascade set value subscriptioncontent null incorrect value null indicates email scheduled generated instead foreign key set delete cascade association email email removed system proceeding subscriptioncontent value also deleted mean time data subscriptioncontent culled routinely part email deletion process digestrun digestrunsubscriber currently store digestrun association subscriber want know many subscriber due emailed digest count number digestrunsubscibers associated number subscriber related digest something known point digest creation store count digestrun alleviate storing digestrunsubscriber removed approximately interval email digestruns low data usage effectively stored indefinitely least determine approach archiving contentchange subscriptionlist contentchange subscriptionlist require change order allow build full analytics picture however would require intention delete either despite small change suggested contentchange switch primary key type autoincrementing number uuid allow sent part analytics tracking without revealing state ordering information underlying system subscriberlist updated way determine historical number contentchanges accuracy contentchanges available perform look likely time contentchanges may reach infeasible number looked value storing maintains hopefully point expected couple year away well much firmer understanding analytics usage subscriptionlists dont currently ability deleted apps likely gained ability would form archiving could still communicated user list subscription longer available subscriber subscription previously subscription ended would deleted last subscription removed subscriber would address nullified later iterated temporary soft delete subscription remove worked whether long term value looking case support query weve able determine useful store set data indefinitely would useful support query remove email address reasonable support window diagnostic purpose field would added subscriber deactivatedat would determine whether subscriber activated subscriber deactivated day personal information removed account additional activity account cause account reactivated aside deactivatedat field may required could determined lack active subscription might useful query regarding end subscriber would complex without day window intended provide sufficient time deal support query occur due account issue reasonably regular occurance subscription intention append table change subscription starting ending change frequency creates new entry table however active flag part unique index ensure user one active subscription time exception would make fully append anly additional change rename deletedat field endedat record time subscription ended purpose field enable query determine number subscription particular time period additionally suggestion include field source creating subscription include reason subscription ended finally uuid field stored subscription would likely better primary key uuid second numerical summary database change email change type serial uuid add archivedat timestamp would removed database day emailarchive table store abridged email data intention moving different data analytics storage store information subject subscriberid contentchanges see example store personally identifiable information deliveryattempt change uuid drop reference field uuid instead would removed part cascade email day subscribtioncontent would deleted automatically corresponding email deleted contentchange primary key change uuid deleted part analytics picture subscriberlist deleted part analytics picture subscriber add deactivatedat timestamp field deleted part analytics picture subscription change primary key uuid drop existing uuid field replace deletedat field endedat field create enum field source idea imported usersignup frequencychange create enum field end idea userunsubscribe nonexistentemail frequencychange create active boolean field drop current unique key replace one incorporates active relationship subscriber ondelete restrict try ensure cant lost system deleted part analytics picture plan future intention strategy provides sufficient data stored lot flexibility going forward determine analytics email alert api pressing concern following implementation would moving emailarchive data databse would still build relatively fast significant quantity data still much lower email produce following simplest way likely query data would amazon athena assuming query data could either combination data athena likely database grows though query become slow strategy require iteration closer producing analytics usage tool amazon red shift may approriate
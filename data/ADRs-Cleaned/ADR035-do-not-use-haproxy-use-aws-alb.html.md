title adr haproxy aws alb adr haproxy aws alb adr adr decided haproxy three reason writing hsts header present upstream request implementing http http redirect custom health check gorouter problem since fixed header rewriting implemented http healthchecking implemented http http redirect done aws alb currently multiple elbs classic want replace alb want alb elbs deprecated terraform cause crash alb give metric cloudwatch alb better support xforwardedfor alb support fixedresponse http http rewriting haproxy add significant complexity routing deployment maintenance proxy protocol nonstandard hard understand http http rewriting hard understand haproxy config rarely touched maintain haproxy bosh release haproxy duplicate number log receive every platform request written twice haproxy add extra network hop every request replace elbs alb alb fixedresponse redirect http http gorouter directly termination hsts header rewriting healthchecking router instance remove haproxy consequence archive alphagovpaashaproxyrelease must gorouters health endpoint drained healthchecking must communicate tenant xforwardedfor header content change longer haproxy log save money log ingestionstorage
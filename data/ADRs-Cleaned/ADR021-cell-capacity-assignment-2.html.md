title adr cell capacity assignment adr cell capacity assignment weve running cell provisioning policy adr since february havent ever run cell capacity weve observed there excess capacity paying time wrote adr fewer tenant individual tenant quota much greater proportion total memory size word single tenant could conceivably greater proportion excess capacity cell still deployed across still dont way autoscale number cell meet demand ensure surplus capacity around cell almost completely uncontended experiencing cpu disk contention cell memory month period august november usable memory free cached buffered running total cell memory maximum increase memory usage exponentially smoothed average week previously running total container capacity container usage peaked previous week average cpu usage see daily peak rep think capacity cell largest amount rep allocated memory increased week week objective state expected behaviour cell operational enough capacity allow tenant scale full quota amount excess capacity required enough accommodate fluctuation expect day period weekend reaction time deployed enough capacity allow tenant scale full quota one availability zone faileddegraded enough capacity maintain steady state app usage guaranteed able scale apps one failed system expected sufficient capacity host running apps achieve start basing capacity planning current memory occupied process cell rather sum quota given user define alert capacity planning purpose inhours support person expected respond adjusting number cell want ensure cell headroom smoothed average allow headroom increase memory consumed apps allow buffering caching occur adversely impact application performance data analysis see amount memory consumed apps reach weekagos smoothed average round include bufferingcaching fails enough capacity remaining host apps failed apps evenly divided amongst surviving two remaining surviving many apps running want headroom well want headroom evacuated apps current usage actual memory consumed process cell therefore start alerting memory occupied process cell suitably smoothed avoid noise small spike causing frequent alarm cpu usage assumed linear relation memory usage similar alert defined exceeds cell addition wanting cell run short memory also want tenant able scale apps functional order ensure allow increase requested memory mean alerting rep cumulative remaining capacity smoothed avoid false alarm also enough container capacity allow tenant scale apps deploy new apps alert sum rep container capacity smoothed ensure short lived fluctuation usage dont cause unnecessary alert likely pattern fluctuation memory week may change time review month proposed consequence alert following metric exponentially weighted moving average memory including cache averaged cell smoothed idle cpu averaged across cell note metric superceeded adr smoothed container count reported rep capacity smoothed available memory capacity reported rep remove half cell one start removing cell removing cell consider adjusting rep advertised memory capacity order allow overcommitment whether remove another original capacity current capacity save money
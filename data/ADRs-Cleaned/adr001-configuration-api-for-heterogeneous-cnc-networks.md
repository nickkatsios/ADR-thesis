configuration api heterogeneous cnc network draft deciders dplod problem statement hypothetical future maker space many networked cnc device mill lathe printer laser cutter hypothetical maker space various future version teg different plugins control machine maker space additional combinator teg host combine teg instance allows maker securely control configure machine single webrtc connection single graphql schema would configuration api teg look like accomodate different machinesteg versionteg plugin variation hypothetical future makerspace one graphql schema accessed user statically hosted printspoolio gui driver current extendedconfig gui put pluginspecific setting json text field advanced plugin setting feel tightly integrated setting felt pluginspecific setting feel like second class citizen feel way limit usefulness teg designed intent support combinators future version current configuration architecture take combinators account today may cause breaking change cause unneccessary rewrite combinators introduced future considered adr cover three related area query mutation gui configuring printer plugins considered broken query extendedconfig json field dynamic query schema json flat object mutation patch json flat object dynamic mutation schema gui extendedconfig textfield see guiqueries extendedconfig json field dynamic form outcome chosen query json flat object mutation json flat object query mutation meet criterion maintaining security via internal type safety preventing schema collision combinator present pluginspecific core setting first class citizen chosen gui gui dynamic form gui allows pluginspecific setting placed ideal arbitrary position within gui optimal pro con guiqueries extendedconfig json field extendedconfig json field added configuration object pluginspecific setting stored seperate core setting explicitly typed field graphql gui text field edit extendedconfigs json advanced setting tab closed default good simple bad pluginspecific type selfdocumented typed bad extendedconfigs queried differently core configs making second class citizen configuration query bad user know edit json document bad plugin setting hidden advanced setting tab regardless gui placed best query dynamic query schema add pluginspecific setting dynamically adding extension configuration query type graphql schema plugins host connected combinator addedremoved good type would self documented graphql bad would require graphql schema dynamically change based plugins loaded complicates host common practice graphql bad dynamic schema could conflicting type defined incompatible plugins host would unresolvable teg combinator query json flat object configuration query api configuration object allows query json field return configuration data core configs pluginspecific configs good even simpler extendedconfig good configuration query api consistent core configs pluginspecific configs bad entire configuration selfdocumented typed graphql mutation patch mutation patchconfigprinterid patch jsonpatchinput would created rfc json patch could applied config structure whole good internal graphql query would allow type safety achieved graphql opposed custom solution good allows arbitrary level nested setting within configuration good make existing standard reinvent json patch format good pluginspecific setting set first class property configuration object bad type safety enforced data updated failfast bad custom solution would needed identify prevent attempt modify readonly setting bad custom solution would needed identify patch entry create new object wrap appropriate immutable record type mutation json flat object mutation would created updateconfigobjectsprinterid input action createorupdateenum type componentorpackageenum data json array configuration object meaning component plugins general conifgs printer name wrapped tegappcore plugin could created modified transactionally updated configuration object would looked host update merged overwriting previous value keep host update logic simple configuration object would required flat object either scalar value list scalar value key finally type safety procedurally named configuration objectspecific graphql mutation addserialcontroller updateaxis updatetegcoreplugin could created type mutated internally host part action creator reducer make sure data conforms expected input type output type good internal graphql mutation would allow type safety achieved graphql opposed custom solution good readonly field implemented via internal graphql mutation good pluginspecific setting set first class property configuration object good internal graphql mutation schema printer host catch incompatible plugin field time loaded failfast goood combinators defer internal mutation delegate printer host able mutate configuration across printer without conflict incompatible plugins different host bad json data field selfdocument input mutation dynamic mutation schema modification flat object proposal input union would substituted data json scalar good updateconfigobjects input would fully selfdocumented graphql bad would require graphql schema dynamically change based plugins loaded complicates host common practice graphql dynamic schema could conflicting input type defined incompatible plugins host would unresolvable teg combinator bad graphql yet support input union static typing limited see httpsgithubcomfacebookgraphqlissues gui dynamic form schemaform jsonschemaform field would added configuration object would describe layout configuration object form clientside validation good existing standard implementation material good allows pluginspecific setting intermixed core setting appropriate best good enforces config form consistency across platform bad complicated static form link jsonschemaform
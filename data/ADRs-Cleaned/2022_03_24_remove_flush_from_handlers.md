remove flush handler problem statement working entity persisting current state one call flush method entity manager default start commits transaction possibility start transaction manually suspend autocommit feature doctrine driver avoid inconsistent data flexibility rollback change provide easy way interface object state committing transaction considered flushing handler flush command handler cause problem inconsistent state enduser decides adjust model definition implicitly flushing commit change queued far may lead error committing consistent data would additional feature would allow adjusting entity state transaction close bad implicitly flushing commit change queued far bad would additional feature flushing outside handler manually triggered transaction manual setting transaction around handler clearly defines boundary even tho may still lead error committing consistent data setting boundary outside code improves greatly adjustment object may made decorator pattern outside predefined handler good improves good transaction around handler clearly define boundary good flexibility rollback change bad may still lead error committing consistent data outcome chosen flushing outside handler manually triggered transaction straightforward solution suspend autocommit feature doctrine give control flexibility working data reference transaction concurrency
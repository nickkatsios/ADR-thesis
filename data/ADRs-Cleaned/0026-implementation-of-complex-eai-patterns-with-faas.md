implementation complex eaipatterns faa problem statement enterprise integration pattern complex structure part behaviour implemented generically part modifiable end user case system admin mico already decided faa platform provide modifiability form code configuration work well pattern complex pattern easy allow modifiability via faa especially case user want write little code possible meaning generic part component implemented mico team driver modifiability pattern must provided via faa function function contain little code possible generic code pattern provided mico platform either library import faa function component call said function challenge implement generic logic implement logic faa function implement custom logic generic logic faa function implement custom logic faa function state configuration channel faa function get current state configuration dynamic router let faa function subscribe kafka separate send current configuration together message sending multiple destination unknown destination router specific endpoint send message may even send message many endpoint implement generic routing recipientlist routingslip let faa function write route message header let function send message directly kafka stateful component pattern inherently stateful store state store state generic component send faa function message performing intermediate request step content enricher perform request get content inject message offload implementation completely user split two part one determining request needed one injecting requested content message affected pattern evalrst pattern dynamic config destination stateful router yes maybe dynamic router yes yes maybe content based router maybe yes maybe aggregator yes resequencer yes process manager maybe yes maybe message normalizer maybe outcome implement logic decided state configuration channel decided stateful function decided routing support custom routing faa function always interpreting routing slip present routing slip support multiple destination one routing step also allow make pattern possible everything stateful single generic kafka faa connector intermediate request decided evaluation implement generic logic implement generic logic faasfunction good kafka trigger function good allows easy extension modification generic logic needed bad implement generic logic supported language libraryframework bad would mean complex faa networksdependencies generic logic capsuled faa function implementing generic logic kafka faa adapter good one implementation one language bad generic logic support pattern possibly complex implementation stateful pattern store state compacted kafka topic good extra component bad useful storing configuration channel statestate change often bad many assumption bad whole channel read load state store state good really good storing querying state bad management isolation different faa function difficult send state message faa function good faa function trivially stateless bad state could large bad generic component know state send priori assumption sending multiple unknown destination allow faa function send message directly kafka good allows complex routing pattern bad faa function understand react various header field cloud event routingslip route history implement generic routing via header field routingsliprecipientlist good ensure semantics header field implementation bad header field sufficiently complex support complex routing intermediate request offload complete implementation user good request controlled user code bad user may reimplement generic code bad faa function know kafka topic split request part merge part good split implementation easyer understand good split implementation allows generic request handling implemented mico bad split pattern implementation complex
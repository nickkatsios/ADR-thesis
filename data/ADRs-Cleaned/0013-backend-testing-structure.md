separate integration package integration test user story write server side easi application decide structure testing suite complex computationally expensive access resource like call network access apis become cumbersome slow set run test include flip side mocking resource cause poor test coverage mimic production case important create testing strategy balance coverage runtime adr focus setting strategy balance resource driven integration test wide coverage unit test codebase important understand application layer pattern described truss engineering playbook driver purpose adr well focus breaking unit integration test wont try define content detail integration test likely happen endpointhandler level run production case unit test happen across codebase mock outside package focus individual function case considered dont distinguish unit integration test run together together effectively nothing integration test unit test reside testing suite run based integration test suite unit test flag testingshort case distinguish integration test testingshort running unit test short command line provides way separate execution different test however package dependency still linked move integration test separate package integration test would live integration package test could developed run separately still utilize short break apart execution would allow also break apart package dependency unit test would minimize import mock avoiding wide package surface integration test would pull production dependency mirror server setup outcome chosen move integration test separate package moving dependency wiring separate package allows unit test stay decoupled dependency may integration package existing package based production package structure route server example handler service model required pull package mimic interface dependency based production structure layered package approach push achieve integration test become synonymous wiring server dependency pro con dont distinguish unit integration test run together together early develop easy nothing lends towards bad unit testing habit including testing dependency integral test target writing unit test slow focusing api surface single responsibility principle testing suite quickly become slow clear coverage function integration unit test count coverage statistically unclear mock import run integration suite handler flag testingshort long test disabled developer workflow integration test live close unit counterpart increasing developer awareness test run functionpackage suite setupteardown happen suite level short flagging would required within individual test suite setup word short logic would sparse across test clear coverage function integration unit test count coverage statistically unclear mock import move integration test separate package integration test dependency clearly marked easily tested separate unit test dependency longer imported unit test short flagging happens suitepackage level test also run per directory dependency structure mirror production easier write unit test wider test surface optimize performance testing suite type benchmark easily testing suite slow requires developer awareness might moot current instruction testing service ignore integration test
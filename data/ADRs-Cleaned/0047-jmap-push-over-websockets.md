jmap push websockets lazy consensus implemented relates support jmap push mailboxchanges implementation requires generalize eventbus jmap push notification allow client efficiently update almost instantly stay sync data change server order support server emit newest state change client push channel implement rfc json meta application protocol jmap subprotocol websocket transport mechanism push notification generalize eventbus order achieve outofthe box publishsubscribe system jmap related event fit mailbox api implement listener registered jmap event bus websocket client order carry state change client consequence expect client push lead drastic performance enhancement data transmitted upon resynchronisation mentioned rfc usage websockets allows performance optimization request easily compressed doable http available implementation http request compression ubiquitous websockets connected authentication performed establishing connection allow reduce load needed authentication system might ease instance custom openid connect provider people deploying jmap aware loadbalancing websockets requires session stickiness sequence bob authenticates endpoint upgrade websockets granted bob register email mailbox update listener listens state change related bob account bob receives mail mailboxmanager add bob mailbox added event fired mailbox event bus mailboxchangelistener process added event handle delegation record state change fire related event account jmap event bus email addition mailbox count updated bob websocket listener receives message rabbitmq push bob bob mua aware resynchronize perform resynch request combining emailchanges emailget mailboxchanges mailboxget event bus listener created socket upon client request removed upon disconnection push explicitly canceled client multinode setup event bus registration key mechanism described adr distributed implementation ensure event routed james server holding client push registration accountid base registration key jmap rfc defines event source server sent event supported transport medium push notification yet active jmap contributor lack production experience event source already deploy websockets performance enhancement authentication request compression unlocked websockets achievable via event source note nothing refrain future implementation event source mechanism ignored disabled via reverse proxy reference support jmap websocket push
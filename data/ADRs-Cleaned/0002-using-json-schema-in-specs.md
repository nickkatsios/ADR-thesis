json schema spec graphql recommends testing behaviour graphql api client perspective test data returned graphql query conforms type definition system explored individual expectation example validating key response ruby expectresponseto includeid expectresponseto includecommonname expectresponseto includestops factorybot potentially could achieved factorybot however validating dynamic graphql query may possible example wanted test graphql query return one key type test query return multiple key testing graphql response primarily interesting shape structure data really content jsonschema jsonschema provides declarative domain specific language define validate schema json object furthermore allows define json schema test conformity tflgraphql json schema validation test response graphql query implement custom rspec matcher based article thoughtbot match given object schema defined specschemas consequence pro dynammically test schema conform graphql type definition rspec expectation schema validation short one liner matchesresponseschemaschemapath matcher valid json schema could reused purpose con extra work needed define json schema expect graphql query longer term could explore automatically generating schema perhaps consuming openapi spec
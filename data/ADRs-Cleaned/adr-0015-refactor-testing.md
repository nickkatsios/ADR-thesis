factory test object currently testing situation real drag sometimes dont test thing much effort update method documented recently problem surfaced update method scene broken didnt know tried api update scene ingeststatus added project creating object test hard example wanted create scene one user organization visibility level another scene different user organization visibility level youd currently create first organization post organization endpoint create first user organization post user endpoint create first scene post scene scene endpoint create second organization another post organization endpoint create second user another post user endpoint create second scene post new scene scene endpoint youre ready start testing good thing two combination want test really want filter different thing probably might want different scene user org different visibility might want number thing shouldnt step every time two specific scene test nevermind care varing image thumbnail attached scene well thing gruesome discus polite company solve problem far tell least three solving problem two good one auxilliary constructor auxilliary constructor method defined class take set argument initializing class could auxilliary constructor provide version constructor class datamodel example scala case class datasource uuid createdat javasqltimestamp createdby string modifiedat javasqltimestamp modifiedby string organizationid uuid name string visibility visibility colorcorrection mapstring composite mapstring extra mapstring object datasource def apply optionuuid none createdat optionjavasqltimestamp none createdby optionstring none modifiedat optionjavasqltimestamp none modifiedby optionstring none organizationid optionuuid none name optionstring none visibility optionvisibility none colorcorrection optionmapstring none composite optionmapstring none extra optionmapstring none construct datasource probably bunch getorelses asinstanceofdatasource pro would let create datasource val datasource val datasourcenamedatasource pretty easy solution add constructor give default behavior specify anything easy quick creation test object specific field varied con possible well collision json format life datamodel project auxilliary constructor would live might become legal accident post apiscenes certainly dont want remove boilerplate move around little bit would write auxilliary constructor would write lot wouldnt save anything model create testing also pretty clearly basic implementation property based testing provide object meeting specific criterion make assertion result ignoring bunch miscellaneous information thats nice simple easy see dont wonder whats going hood ever nice dont access existing tooling property based testing extent test limited patience commitment rather whatever large number might pick example proper property based testing framework object factory object factory would work like auxilliary constructor would locate separate section application different scope example datasource factory could live testfactoriesdatasourcescala could look like scala package comrasterfoundryfactories import javautiluuid import comrasterfoundrydatamodeldatasource visibility object datasourcefactory def create optionuuid none createdat optionjavasqltimestamp none createdby optionstring none modifiedat optionjavasqltimestamp none modifiedby optionstring none organizationid optionuuid none name optionstring none visibility optionvisibility none colorcorrection optionmapstring none composite optionmapstring none extra optionmapstring none datasource construct datasource probably bunch getorelses asinstanceofdatasource pro everything good auxilliary constructor plus get organize single package dont worry happens implicit json format since theyre scope con still write lot property based testing propertybased testing solves object creation problem value meet class function requirement example work scalacheck library scalacheck provides forall method take function returning bool throw parameter function something break example might write scala val scenepost forall scenecreate val resp magicpostingfunctions assert thing resp return bools hassomeproperties resp scenepostcheck specific providing generator subclassing orgscalacheckgen would allow ensure example scene different orgs different user different value cloud cover pro dont anything get scene post nice thing test would become general target application behavior well since wouldnt able make guarantee particular value parameter pas test time would also get focus writing easy set class interacting api avoid writing lot boilerplate might write scala api client accident con propertybased testing doesnt seem especially suited testing database operation two reason database operation involve lot state inputoutput object operation guarantee testing filter operation without knowing value posted could hard could maybe special generator testing filtering back writing special object every specific test hell started slide work testing database operation scalacheck look hard might make maintainability worse test database may able serve request quickly enough current pattern frequently fail test test database doesnt respond quickly enough multiplying request could hardly help might however consider different problem ignore choosing make testing life easier probably mitigate choosing huge number example obvious tradeoff complicated route like scenestoprojects might also challenging mocking package like scalamock principle let create mock object datamodel could pas around instead actual scene sound nice found setup annoying wed still manually create mock object wanted test getting mock specific property comparison bit drag shouldnt create factory make creating object easier nowish since requires additional library would let delete lot stock object thumbnailshelperscala projectspecscala exist well object work try test database behavior test api one simple model like band one complicated model related object like tool one complicated model join table like usertoorg get sense complicated might property based testing test logic variety place backend consequence well two thing move generic know thats functional programming word name thing hard object creation factory refactor testing code generic constructor appropriate actually write test thing currently messy test
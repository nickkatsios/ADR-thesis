title payment flow area checkout tag checkout payment flow provide standardized way shopware extension implement custom payment implement two possible handler synchronous payment asynchronous payment handler optionally implement acceptingprecreatedpayments payment transaction fails user choose payment method trigger flow handler synchronous payment synchronous payment intended execute payment immediately order created without user interaction client pas additional data handler process payment order handler throw syncpaymentprocessexception error occurs following diagram show happy case sequence synchronous payment handling error handling described asynchronous payment asynchronous payment handler implemented client user redirected payment gateway website client redirected actual payment site payment site later redirect client back success error page shop handler executed link prepared validates referred finalize redirect back payment service following diagram show happy case sequence asynchronous payment handling error handling described app payment app payment flow similar synchronous asynchronous flow app implement one flow define external http api endpoint callback endpoint called instead executing regular php code custom handler response define payment flow like example accepting precreated payment improve payment workflow headless system reduce order without payment payment handler implement additional interface support precreated payment client single page application prepare payment directly payment service shopware pas transaction reference token shopware complete payment payment handler verify given payload payment service shopware cannot ensure transaction created frontend valid current cart successful verification order created payment handler called charge payment charge successful payment set paid user forwarded finish page failure order payment process active highly recommended implementing optional feature creation capturing payment separated order payment error case possible produce failed payment failure case order payment process begin client choose new payment method retry payment entire payment loop synchronous asynchronous payment start
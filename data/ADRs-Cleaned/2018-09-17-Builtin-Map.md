builtin map background provides builtin map sort representing partial map sort partial mean key may associated value kevm relies concrete operation eventually support symbolic operation problem kevm requires builtin map domain support operation equivalent module map hookedsort map hookmapmap unit empty map containing key hookedsymbol unit map hookmapunit elementkey value map exactly one association key value hookedsymbol elementk map hookmapelement concatmap map combine map map association key value result one operand result bottom map map key common hookedsymbol concatmap map map hookmapconcat updatemap key value update map association key value key may may present map hookedsymbol updatemap map hookmapupdate lookupmap key map contains association key value result value otherwise result bottom hookedsymbol lookupmap hookmaplookup inkeysmap key map contains association key result dvbooltrue otherwise result dvboolfalse hookedsymbol inkeysmap bool hookmapinkeys endmodule implement concrete operation immediately existing semantics particularly kevm rely concrete map operation therefore may assume key concrete contain variable case key symbolic existing backends treat concrete pattern perform lookup exact structural equality pattern immediate purpose supporting kevm may perform key lookup exact structural equality pattern defer implementing symbolic operation eventually support concrete symbolic map operation support concrete operation add support symbolic operation keeping symbolic construction unevaluated symbolic map pattern consisting unevaluated symbolic operation upon symbolic concrete map evaluating lookup symbolic map require traversing symbolic map pattern attempting unification key looking symbolic key traverse entire map potentially expensive want fall back concrete lookup whenever possible therefore best interest implement concrete operation first tradeoff make evaluating symbolic insertion lookup either operation left unevaluated pattern evaluated symbolic operation may generate large disjunction pattern tradeoff disjunction generated tentatively decided evaluate lookup leave insertion unevaluated lookup branch key unify discarded may fewer branch explore hand result evaluating insertion always largest possible disjunction question substitution behave respect symbolic map
upgrade templating toolset auth server email deciders yogita bhatia lauren zugai jody heavener vijay budhram ben bangert orchard danny coates technical story problem statement handlebar extension mustache see difference fxaauthserver email template accommodate limited logic template pain point firefox account engineer discussion around different templating system began converting email modern templating solution opportunity evaluate stack would ideal fxa email beyond proposed templating solution includes evaluating improving preview email various state localization tool best approach landing new template production considered templating styling continue mustache adhoc inline style react serverside generate static html template tailwindcss ejs mjml offered mjml email previewing continue writeemails command storybook mailtrap furthermore worth noting wont necessarily proscons list handle generating plaintext version transitioning fluent gettext localization plan around integration involving feature flagging process outcome templating styling chosen ejs mjml offered mjml html email lot quirk mjml shift burden maintaining solution fxa engineer future react tailwind part fxa react heavy email solution since state involved component reuse across fxa would likely minimal involves complex build setup ejs mjml help significantly responsiveness email reducing time spent developing template making future email redesigns easier email previewing chosen storybook provides flexibility preview different email state together storybook deployment already place hooking fxaauthserver ensure consistency easy test perform without needing touch codebase support whether plain old tailwindcss something else note along storybook view various state template also planning continued support maildev since application beyond previewing email plaintext file well htmltotext automatically generate plaintext version template rendered html may scenario automaticallygenerated plaintext version look exactly wed like case look exporting mjml plaintext version email template file localization upgrade localization tool gettext fluent since preferred team fxa frontends chosen templating make fluents fluentdom package integration development template marked part release group could form mapped list template name variable associated template file group corresponding environment variable flag release group flag enabled template fall generating email template environment template corresponding release group enabled oldcurrent template continue served release group initially enabled staging opportunity thoroughly test evaluate template group incrementally enabled production give flexibiity add new authserver configuration value control user email supported email template supported mjml authserver expose feature flag method check value render correct template positive consequence mjml abstract html email peculiarity away handle responsiveness allows move away inline development improves style reusability consistency template file ejs allows write template javascript removing complexity custom syntax like jsx mustache negative consequence storybook setup much complex react tailwind solution introduces new dependency mjml introduces small learning curve email template battletested year change could introduce potential new bug across various client pro con templating styling fxaauthserver currently make mustache along inline style develop email template mustache logicless html templating framework proven super helpful developing mail component far due logicless nature becomes tedious include conditional statement mail component futhermore email built server style inserted inline since email client disregard style tag however since inline style arent great consistency make maintenance difficult want pick solution let reusable class development built turned inline style following section detail upon various pro con potential library framework could replace current templating toolchain continue mustache adhoc inline style description keep current setup mustache inline styling pro effort refactor template would eliminated mustache designed simple easy read con logicless nature mustache would continue bother future forcing logic occur may preferred template style continue inconsistent hampering look feel template making reusability style difficult increasing redundancy since style cannot reused inline style make nearly impossible medium query continue mustache template frontend framework fxa would continue different currently backbone contentserver mustache authserver react everywhere else react serverside generate static html template tailwindcss description template auth server email react serverside tailwindcss styling convert static html template pro con react found adr though type react describing would stateless detailed list proscons tailwind listed adr pro logicless nature template eliminated theyre refactored react storybook integration react tailwind straightforward since set package already already react tailwind fxasettings fxaadminpanel fxapaymentsserver fxareact reducing learning curve across fxa stack tailwind highly configurable without cumbersome allowing modify type spacing scale define color range set medium query meet exact tailwind setup package configuration file could shared fxa design guide exists around tailwind set package react offer many integration one mjml react already audited security team neutral tailwind class compiled inline style help juice library there potential crossshare component new email template however might able share many component email quirk con overkill atypical react email since library come far many feature may needed templating template fxaauthserver contain heavy business logic building frontendheavy framework like react might complicate thing since converting react component tailwind static html page inlined style build pipeline complex likely new dependency would added project ejs mjml offered mjml description template auth server mail component ejs mjml ejs simple templating solution allows logic mjml componentbased library extract away html email oddity handle responsiveness prebuilt component well give ability define custom component compile responsive html compilation pro ejs simple templating engine far easier logic syntax similar javascript since want keep mail template straightforward templating framework mustache react could good choice mjml created keeping mind industry standard well quirk old email client eventually saving time investigating crossbrowser compatibility template mjml help create responsive email mobilefirst approach control responsiveness automatically needing developer intervention mjml far highest weekly downloads github star comparison alternative like foundation email build pipeline straightforward react tailwind mjml provides builtin mjstyle tag define global style also provides mjattributes mjclass defined imported across template greater reusability con add new dependency stack frontend stack fxa continue differ creates slight learning curve may much component reuse package reacttailwind anyway ejs mjml email component would eliminate reuse potential package storybook setup much complex react tailwind solution mjstyle sometimes require important declaration override default mjml styling pro con email previewing notoriously difficult preview different email state look like fxa engineering design product currently manually previewing template running yarn writeemails fxaauthserver root directory doesnt account state unless manually change variable run command furthermore even maildev client requires manually trigger email running fxa locally robust solution account challenge faced team continue writeemails command description continue exclusively yarn writeemails command generate preview email template pro email guaranteed uptodate whenever run command effort refactor template would eliminated con approach cannot preview various email state simultaneously requires manually change variable trigger command script associated writeemails command break addremove import sender storybook description storybook preview email template pro approach preview different email state simultaneously storybook deployment worked great far fxa service hooking fxaauthserver view modernized component might result consistency con still going seeing html version email storybook may look different web client however could mitigate previewing maildev deployed storybook previewing requires service hosted somewhere gcp might maintenance requirement future mailtrap description mailtrap online tool safe email testing dev staging environment frequently fake smtp server catch test email view virtual inboxes debug sending real user pro mailtrap provides functionality view bccd address verify whether stay invisible main message recipient let view several test result like html preview html validation also output line code error found mailtraps automatic manual email forwarding share testing result fellow team member either sending manually automatically setting list forwarding rule con mailtrap paid service may limiting external contributor mailtrap externalonline service requiring internet connection link create new react app setting redesign react mustache ejs mjml tailwindcss maildev storybook mailtrap
sql stored procedure proposed deciders daniel stefaniuk jonathan pearce matthew begley order protect service capacity information updated user capacity api required permission core maintains user service permission therefore api requires interface core able validate api user able update capacity information requested service previous adr decided api would hold maintain user service permission please refer adr api require route interface core user service permission stored maintained following considered current core apis creation sql stored procedure lodged core database creation query module capacity api investigation performed existing core apis found although possible combine couple apis together order get desired result complexity processing wasted simply viable existing apis offered direct route information capacity api required simple query therefore starting target service propagating parent created determine whether api user permission update either target service parent target service envisaged query run core database yield result far efficient much faster way indirect route existing apis impact core timescales developer capacity api could alter logic query fine tune implement query part capacity api private beta affect core mean dependency core team addition considered core change area unlikely furthermore already decided api contain separate module refer adr query reside module core api code invoke meaning module coupling core hence reducing unlikely although potential dependency issue area core change consequence direct query far faster efficient reducing processing time complexity lodging query stored procedure core database may affect turn around response time rapidly change query private beta development stage query capacity api code base enables able work adjust fine tune private beta phase assessed query stable revisit lodge query core database introduces coupling core user service permission data model although risk countered fact area core unlikely change coupling core implemented separate module within api thus reducing potential impact minimum
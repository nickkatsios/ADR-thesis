control flow discussion proposed adam gibson april samediff support control flow statement loop however enough common looping structure still hard onnx introduced loop operation loop requires graph pre configured graph graph take output current iteration max number iteration extra condition approximates loop following code java boolean cond int maxiterations forint maxiterations cond loop body loop body represented sub graph attribute operation proposal similar onnxs loop operation coupled invoke provide new loop leverage invoke fixed convention graph loop body java loop condition information see underlying class link controlflowloopwithconditionsstring string samediff samediff string sdvariable string string param loopparams loop parameter loop return public sdvariable loopwithconditionscontrolflowloopparams loopparams loopparams loopparams look like following java public static class loopparams private string outputvarnames private string loopname private samediff parent private samediff functionbody private string functionname private sdvariable loopvars private string functionbodyinputs private string functionbodyoutputs loopparams following field outputvarnames output variable name loop name loop control name control flow scopenameloopnamevariablename convention scopename current frame within loop body loop name loop name showing loop variablename represents variable within loop frame parent invoking samediff function functionname name function looked parent invoked invoke loopvars input output loop functionbodyinputs function input name invoke functionbodyoutputs function output name returned invoke example usage java setup parent graph pas input lambda samediff parent samediffcreate sdvariable input parentplaceholderinputdatatypefloat setup loop body samediff loopbody samediffcreate sdvariable loopinput loopbodyplaceholderinput datatypefloat sdvariable output loopbodymathaddoutputloopinput initialize control flow default parameter current iteration max number iteration conditional output graph sdvariable args controlflowinitializeloopbodynew stringcurriteration maxiterations condin parent true sdvariable childargs controlflowinitializeloopbodynew stringcurriteration maxiterations condin loopbody true input name input graph input input parent string inputnames curriteration maxiterations condin input output name output lmabda result lamdas application input string outputnames curriteration maxiterations condin output setup loop variable input sdvariable finalargs new sdvariableargslength forint argslength finalargsi argsi finalargs input put together loop parameter controlflowloopparams loopparams controlflowloopparamsbuilder parentparent functionbodyloopbody functionbodyinputsinputnames functionbodyoutputsoutputnames loopvarsfinalargs loopnameloop functionnamefunc build control output parameter name string finaloutputnames new stringoutputnameslength forint finaloutputnameslength finaloutputnamesi outputnamesi final test output variable name match specified output name sdvariable loopwithconditions parentloopwithconditionsfinaloutputnamesloopparams indarray assertion ndjonesaddi mapstring indarray output parentoutputcollectionssingletonmapinput ndjones outputfinal consequence advantage explicit wrapper loop convention looping easier disadvantage parameter loop inherits complexity invoke number parameter needed number input output must match might intuitive user
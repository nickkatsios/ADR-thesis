structure terraform project wanted agree terraform code organisation manage resource different stack avoid recreate thing every time refactor code want separate code data future opensource code without disclosing implementation detail want able encrypt sensitive data repository want support sensitive data encryption part process without manage secret different repository different script etc want create terraform module reuse code want separate terraform code different project stack tier one representing logical tier specially important separate resource govuk application initial solution present three directory data module project data directory contains subdirectory per terraform project store variable value customised per environment data directory also contains secret file sensitive data encrypted sop module directory contains subdirectory per terraform provider project directory contains terraform stackstiers data gkebase commontfvars integrationtfvars gkecluster commontfvars integrationtfvars myapplication commontfvars integrationtfvars integrationsecretsjson module google containercluster maintf variablestf dnsmanagedzone maintf mysqldatabaseinstance mysqltf variablestf network networktf publicsubnetwork maintf project gkebase integrationbackend maintf variablestf gkecluster integrationbackend maintf variablestf myapplication integrationbackend maintf variablestf consequence current secret management solution implicates decrypt secret file run time make sure clean unencrypted file running terraform command parameter going common different stack instance zonename moment going configure parameter wherever needed different behaviour hiera reference parameter several part code
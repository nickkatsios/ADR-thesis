aboutcaching proposed taken data organised caching werent explicitly documented let fix method caching flru pivotframe weakmaps stats utils hook scale referential transparency react relies lot referential transparency decides rerender compare object reference called shallow comparison doesnt compare structure cheap operation underneath compare pointer example compare primitive value true compare object false const true every creates new instance object new reference referential transparency closely related purity function pure function const add number number next one pure function well const getpoint number new pointx getpoint getpoint false doesnt seem side effect produce new instance every time one solution problem memoisation would always return result const memoise const cache new map return cachehasx cachesetx return cachegetx const getpoint memoisex number new pointx getpoint getpoint true problem memory infinite clean point going many approach problem chose store number case pivotframe recently created reference show part pivotframe pivotgrid screen windowing technique practice mean following const first framecolumn framecolumn framecolumn framecolumn first framecolumn true still cache framecolumn framecolumn first framecolumn false evicted cache operation referentially transperent example dataframes pivot performance optimisation another point caching trade computational cycle memory done computation cache next time would faster store result memory example calculate maximum value total value column whole data set operation much one side side every cell pivotgrid calculate react rerender whole cost turn caching easy something like memoise question clean cache imagine load one data set calculation load another data set calculation run cache point employ nice trick solve problem especially deal referentially transparent system store cache initial object calculation memory soon away swiped garbage collector drop cache well weakmap const weakmemoise const cache new weakmap return cachehasx cachesetx return cachegetx limitation weakmap key cant primitive value fragmentframe dataframe cache key inside cache slot store empty object inside store cache column type operation cache max firstcolumn frame would stored cachegetframefirstcolumnmax soon frame removed whole slot cachegetframe removed well system work referentially transparent function example work fragmentframes groupby maybe change groupby return kind groupframe hook value like scale hard cache weakmap style cache lot component really deep nesting slot object already level hard work solve case decided hook simplify caching react attach cache react tree node downside cant render prop forced switch component see aboutrenderprops detail approach caching room improvement example cant big number argument stats function method referentially transparent may want address later consequence
adr collection simplified storage layer cosmossdk module changelog proposed proposed implemented abstract propose simplified module storage layer leverage golang generic allow module developer handle module storage simple straightforward manner whilst offering safety extensibility standardisation module developer forced manually implementing storage functionality module functionality include limited defining key byte format defining value byte format defining secondary index defining query method expose outside deal storage defining local method deal storage writing dealing genesis import export writing test brings lot problem block developer focusing important part writing business logic key byte format complex definition errorprone example format time byte way byte sorted ensure dont namespace collision dealing secondary index lack standardisation make life hard client problem exacerbated come providing proof object present state client forced maintain list object path gather proof current solution orm current sdk proposed solution problem orm whilst orm offer lot good functionality aimed solving specific problem downside requires migration newest protobuf golang api whilst sdk still mainly gogoproto integrating orm module would require developer deal two different golang framework golang protobuf gogoproto representing api object high learning curve even simple storage layer requires developer knowledge around protobuf custom cosmossdk storage extension tooling download still learn codegenerated api cosmwasm solution cwstorageplus collection api take inspiration cwstorageplus demonstrated powerful tool dealing storage cosmwasm contract simple require extra tooling make easy deal complex storage structure index snapshot etc api straightforward explicit propose port collection api whose implementation life nibiruchaincollections cosmossdk collection implement four different storage handler type map deal simple keyobject mapping keyset act set retains key object usecase allowlists item always contains one object usecase params sequence implement simple always increasing number usecase nonce indexedmap build top map keyset allows create relationship object object secondary key collection apis build top simple map type collection fully generic meaning anything key value protobuf object collection type fact delegate duty serialisation key value secondary collection api component called valueencoders keyencoders valueencoders take care converting value byte relevant map offer plug play layer allows change encode object relevant swapping serialisation framework enhancing performance collection already come default valueencoders specifically protobuf object special sdk type sdkint sdkdec keyencoders take care converting key byte collection already come default keyencoders privimite golang type uint string timetime widely sdk type sdkaccvalconsaddress sdkintdec default implementation also offer safety around proper lexicographic ordering namespacecollision example collection api found introduction httpsgithubcomnibiruchaincollectionstreemainexamples usage nibiru xoracle xepoch cosmossdks xstaking migrated httpsgithubcomtestinginprodcosmossdkpull consequence backwards compatibility design valueencoders keyencoders allows module retain bytekeybytevalue mapping making upgrade new storage layer nonstate breaking positive adr aimed removing code sdk rather adding migrating xstaking collection would yield net decrease loc even considering addition collection simplifies standardises storage layer across module sdk require deal protobuf pure golang code generalisation keyencoders valueencoders allows tie ourself data serialisation framework keyencoders valueencoders extended provide schema reflection negative golang generic battletested golang feature despite production right collection type instantiation improved neutral neutral consequence discussion automatic genesis importexport implemented api breakage schema reflection reference
architecture record abstract module one design goal arachne module relatively easily swappable user permanently committed particular technical choice instead flexibility choosing preferred tech long exists form arachne module example alternative implementation people might wish various part application http server pedestal ring database datomic rdbms one many nosql html templating hiccup enlive stringtemplate etc clientside code clojurescript coffeescript elm etc authentication passwordbased openid facebook google etc emailing smtp one many thirdparty service representative sample actual list unbounded kind flexibility raise design concern capability user always able leverage full power chosen technology code least common denominator capability datomic pro example able write datalog fully utilize inprocess peer model restricted anemic orm also compatible rdbmss uniformity tension capability desire uniformity feature set two alternative particularly distinct desirable common api implementation swapped little effort example userfacing api sending single email probably care whether ultimately sent via local sendmail server thirdparty service composition module also compose much possible general possible dependency maximize number compatible module situation actually desirable least common denominator module dependency rather depending specific implementation example many module persist data ultimately work project datomic sql rather providing multiple version one datomic user another sql would ideal could code common persistence abstraction therefore usable project persistence layer mean module following list enumerates way possible module either user application another module see adr call code module provides clojure library extend protocol module provides clojure library read attribute defined module configuration write configuration data attribute defined module tool allow definition module many different kind relationship speaking loosely relationship correspond wellknown pattern software development including composition mixins interfaceimplementation inheritance etc order simultaneously meet capability uniformity composition arachnes core module appropriate pattern abstract module abstract module define certain attribute possibly also corresponding init script dsl describe entity particular domain without providing runtime implementation module implement abstract module reading abstract entity something concrete runtime well defining specific attribute way user application dependent module rely either common abstract module specific concrete module appropriate coding abstract module yield generic least common denominator experience coding specific implementor give access unique distinguishing feature particular technology cost generality similar relationship hold library code module expose abstract module example would free define protocol intended implemented concretely code implementing module pattern fully extensible isnt limited single level abstraction abstract module could narrowing refinement another even general abstract module concrete example mentioned arachne would like support ring pedestal http server system number thing common concept server running port concept url pathroute concept terminal handler function receives request return response also key difference ring composes middleware function whereas pedestal interceptor object asynchronous response handled differently therefore make sense define abstract http module defines basic domain concept server route handler etc many dependent module application able make real subset two module provide concrete implementation one pedestal one ring contain code actually read configuration runtime build appropriate routing table start server instance etc application wish make direct specific feature like pedestal interceptor may freely attribute defined pedestal module proposed consequence module user want program lowest common denominator abstraction may cost ability full feature set library module user want full feature set library may cost able transparently replace something else larger number different arachne module available relationship complex careful thought architecture factoring module determine correct general element
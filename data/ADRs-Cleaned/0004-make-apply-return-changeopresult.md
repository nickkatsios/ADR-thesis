make changeopapply return changeopresult adr submission last updated discussion deadline wbeditentity summary message wikibase item property provides little information changed entity main message summary item changed want update summary message generated wikibase item property wbeditentity detailed informative wikibase lexeme achieved generating detailed summary message making implementation update summary object passed change instance granular information change implementing summaryaggregator class internally changeop implementation nonleaf node contain change ops order combine summary message generated leaf node effective change ops tree considered action reusing current pattern considered thing wikibase seemed little regard clean design main two place offfeeling came tree hierarchy often implemented structural purpose accessed visitor logic implementing visitor pattern currently changeop concerned representing change applied entity applying change entity generating summary message result applying entity visitor pattern design considered visitor pattern implement detailed summary generation wikibase item property changing changeop design way allows visitor class operate change ops hierarchy attain information complete job information include whether change applied discarded noop breaking change wikibaselexeme continue operate touch extract logic applying change entity outside remember logic implemented visitor scope isnt clear whether enough justification solution come cost initial implementation refactoring current changeop design relevant implementation within wikibase wikibaselexeme benefit solution standard pattern tree structure extract concern summary message generation changeop simplifying design implementation scoping domain dependency changeop decided second visitor pattern design order achieve make changeopapply return changeopresult defined following idl php encapsulates result applying change entity document interface changeopresult entity document change applied entityid getentityid whether entity document actually changed way result applying change bool isentitychanged next step change changeopapply return changeopresult provide needed implementation changeopresult capture result applying different changeop implementation example changeoplabel probably return something like changeoplabelresult defined php interface changeoplabelresult changeopresult string getoldlabel string getnewlabel string getlanguagecode update implementation changeop wikibase wikibaselexeme conform change interface consequence one consequence going visitor pattern design wikibase wikibaselexeme two separate way achieve similar requirement treated shortterm inconsistency design mitigated followup refactoring task change lexeme implementation reusing visitor pattern similar wikibase note changing changeop interface wikibase result failing job due fact wikibase also run wikibaselexeme test part pipeline creates circular situation implementation changeop interface way around order update changed method changeop interface wikibaselexeme implementation interface update method changeop interface wikibase make change depend change implementation changeop wikibase updated new method step separate follow step although situation good enough reason slightly hint changeop concept might better moved separate library versioned depended per proper mechanism wikibase wikibaselexeme